var Te=Object.defineProperty;var Se=(s,e,t)=>e in s?Te(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var me=(s,e,t)=>Se(s,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=t(n);fetch(n.href,o)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(s){const e=Object.create(null);for(const t of s.split(","))e[t]=1;return t=>t in e}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),isModelListener=s=>s.startsWith("onUpdate:"),extend=Object.assign,remove=(s,e)=>{const t=s.indexOf(e);t>-1&&s.splice(t,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(s,e)=>hasOwnProperty$1.call(s,e),isArray=Array.isArray,isMap=s=>toTypeString(s)==="[object Map]",isSet=s=>toTypeString(s)==="[object Set]",isFunction=s=>typeof s=="function",isString=s=>typeof s=="string",isSymbol=s=>typeof s=="symbol",isObject$1=s=>s!==null&&typeof s=="object",isPromise=s=>(isObject$1(s)||isFunction(s))&&isFunction(s.then)&&isFunction(s.catch),objectToString=Object.prototype.toString,toTypeString=s=>objectToString.call(s),toRawType=s=>toTypeString(s).slice(8,-1),isPlainObject=s=>toTypeString(s)==="[object Object]",isIntegerKey=s=>isString(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=s=>{const e=Object.create(null);return t=>e[t]||(e[t]=s(t))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(s=>s.replace(camelizeRE,(e,t)=>t?t.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(s=>s.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(s=>s.charAt(0).toUpperCase()+s.slice(1)),toHandlerKey=cacheStringFunction(s=>s?`on${capitalize(s)}`:""),hasChanged=(s,e)=>!Object.is(s,e),invokeArrayFns=(s,...e)=>{for(let t=0;t<s.length;t++)s[t](...e)},def=(s,e,t,i=!1)=>{Object.defineProperty(s,e,{configurable:!0,enumerable:!1,writable:i,value:t})},looseToNumber=s=>{const e=parseFloat(s);return isNaN(e)?s:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(s){if(isArray(s)){const e={};for(let t=0;t<s.length;t++){const i=s[t],n=isString(i)?parseStringStyle(i):normalizeStyle(i);if(n)for(const o in n)e[o]=n[o]}return e}else if(isString(s)||isObject$1(s))return s}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(s){const e={};return s.replace(styleCommentRE,"").split(listDelimiterRE).forEach(t=>{if(t){const i=t.split(propertyDelimiterRE);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function normalizeClass(s){let e="";if(isString(s))e=s;else if(isArray(s))for(let t=0;t<s.length;t++){const i=normalizeClass(s[t]);i&&(e+=i+" ")}else if(isObject$1(s))for(const t in s)s[t]&&(e+=t+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(s){return!!s||s===""}/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=t}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){this._active=!1;let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(this.effects.length=0,t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function getCurrentScope(){return activeEffectScope}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,t=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=e,shouldTrack=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(s,e=!1){if(s.flags|=8,e){s.next=batchedComputed,batchedComputed=s;return}s.next=batchedSub,batchedSub=s}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let s;for(;batchedSub;){let e=batchedSub;for(batchedSub=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){s||(s=i)}e=t}}if(s)throw s}function prepareDeps(s){for(let e=s.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cleanupDeps(s){let e,t=s.depsTail,i=t;for(;i;){const n=i.prevDep;i.version===-1?(i===t&&(t=n),removeSub(i),removeDep(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}s.deps=e,s.depsTail=t}function isDirty(s){for(let e=s.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(refreshComputed(e.dep.computed)||e.dep.version!==e.version))return!0;return!!s._dirty}function refreshComputed(s){if(s.flags&4&&!(s.flags&16)||(s.flags&=-17,s.globalVersion===globalVersion))return;s.globalVersion=globalVersion;const e=s.dep;if(s.flags|=2,e.version>0&&!s.isSSR&&s.deps&&!isDirty(s)){s.flags&=-3;return}const t=activeSub,i=shouldTrack;activeSub=s,shouldTrack=!0;try{prepareDeps(s);const n=s.fn(s._value);(e.version===0||hasChanged(n,s._value))&&(s._value=n,e.version++)}catch(n){throw e.version++,n}finally{activeSub=t,shouldTrack=i,cleanupDeps(s),s.flags&=-3}}function removeSub(s,e=!1){const{dep:t,prevSub:i,nextSub:n}=s;if(i&&(i.nextSub=n,s.prevSub=void 0),n&&(n.prevSub=i,s.nextSub=void 0),t.subs===s&&(t.subs=i,!i&&t.computed)){t.computed.flags&=-5;for(let o=t.computed.deps;o;o=o.nextDep)removeSub(o,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function removeDep(s){const{prevDep:e,nextDep:t}=s;e&&(e.nextDep=t,s.prevDep=void 0),t&&(t.prevDep=e,s.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const s=trackStack.pop();shouldTrack=s===void 0?!0:s}function cleanupEffect(s){const{cleanup:e}=s;if(s.cleanup=void 0,e){const t=activeSub;activeSub=void 0;try{e()}finally{activeSub=t}}}let globalVersion=0;class Link{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==activeSub)t=this.activeLink=new Link(activeSub,this),activeSub.deps?(t.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=t,activeSub.depsTail=t):activeSub.deps=activeSub.depsTail=t,addSub(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const i=t.nextDep;i.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=i),t.prevDep=activeSub.depsTail,t.nextDep=void 0,activeSub.depsTail.nextDep=t,activeSub.depsTail=t,activeSub.deps===t&&(activeSub.deps=i)}return t}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{endBatch()}}}function addSub(s){if(s.dep.sc++,s.sub.flags&4){const e=s.dep.computed;if(e&&!s.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)addSub(i)}const t=s.dep.subs;t!==s&&(s.prevSub=t,t&&(t.nextSub=s)),s.dep.subs=s}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(s,e,t){if(shouldTrack&&activeSub){let i=targetMap.get(s);i||targetMap.set(s,i=new Map);let n=i.get(t);n||(i.set(t,n=new Dep),n.map=i,n.key=t),n.track()}}function trigger(s,e,t,i,n,o){const r=targetMap.get(s);if(!r){globalVersion++;return}const a=l=>{l&&l.trigger()};if(startBatch(),e==="clear")r.forEach(a);else{const l=isArray(s),c=l&&isIntegerKey(t);if(l&&t==="length"){const u=Number(i);r.forEach((h,d)=>{(d==="length"||d===ARRAY_ITERATE_KEY||!isSymbol(d)&&d>=u)&&a(h)})}else switch((t!==void 0||r.has(void 0))&&a(r.get(t)),c&&a(r.get(ARRAY_ITERATE_KEY)),e){case"add":l?c&&a(r.get("length")):(a(r.get(ITERATE_KEY)),isMap(s)&&a(r.get(MAP_KEY_ITERATE_KEY)));break;case"delete":l||(a(r.get(ITERATE_KEY)),isMap(s)&&a(r.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(s)&&a(r.get(ITERATE_KEY));break}}endBatch()}function reactiveReadArray(s){const e=toRaw(s);return e===s?e:(track(e,"iterate",ARRAY_ITERATE_KEY),isShallow(s)?e:e.map(toReactive))}function shallowReadArray(s){return track(s=toRaw(s),"iterate",ARRAY_ITERATE_KEY),s}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...s){return reactiveReadArray(this).concat(...s.map(e=>isArray(e)?reactiveReadArray(e):e))},entries(){return iterator(this,"entries",s=>(s[1]=toReactive(s[1]),s))},every(s,e){return apply(this,"every",s,e,void 0,arguments)},filter(s,e){return apply(this,"filter",s,e,t=>t.map(toReactive),arguments)},find(s,e){return apply(this,"find",s,e,toReactive,arguments)},findIndex(s,e){return apply(this,"findIndex",s,e,void 0,arguments)},findLast(s,e){return apply(this,"findLast",s,e,toReactive,arguments)},findLastIndex(s,e){return apply(this,"findLastIndex",s,e,void 0,arguments)},forEach(s,e){return apply(this,"forEach",s,e,void 0,arguments)},includes(...s){return searchProxy(this,"includes",s)},indexOf(...s){return searchProxy(this,"indexOf",s)},join(s){return reactiveReadArray(this).join(s)},lastIndexOf(...s){return searchProxy(this,"lastIndexOf",s)},map(s,e){return apply(this,"map",s,e,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...s){return noTracking(this,"push",s)},reduce(s,...e){return reduce(this,"reduce",s,e)},reduceRight(s,...e){return reduce(this,"reduceRight",s,e)},shift(){return noTracking(this,"shift")},some(s,e){return apply(this,"some",s,e,void 0,arguments)},splice(...s){return noTracking(this,"splice",s)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(s){return reactiveReadArray(this).toSorted(s)},toSpliced(...s){return reactiveReadArray(this).toSpliced(...s)},unshift(...s){return noTracking(this,"unshift",s)},values(){return iterator(this,"values",toReactive)}};function iterator(s,e,t){const i=shallowReadArray(s),n=i[e]();return i!==s&&!isShallow(s)&&(n._next=n.next,n.next=()=>{const o=n._next();return o.value&&(o.value=t(o.value)),o}),n}const arrayProto=Array.prototype;function apply(s,e,t,i,n,o){const r=shallowReadArray(s),a=r!==s&&!isShallow(s),l=r[e];if(l!==arrayProto[e]){const h=l.apply(s,o);return a?toReactive(h):h}let c=t;r!==s&&(a?c=function(h,d){return t.call(this,toReactive(h),d,s)}:t.length>2&&(c=function(h,d){return t.call(this,h,d,s)}));const u=l.call(r,c,i);return a&&n?n(u):u}function reduce(s,e,t,i){const n=shallowReadArray(s);let o=t;return n!==s&&(isShallow(s)?t.length>3&&(o=function(r,a,l){return t.call(this,r,a,l,s)}):o=function(r,a,l){return t.call(this,r,toReactive(a),l,s)}),n[e](o,...i)}function searchProxy(s,e,t){const i=toRaw(s);track(i,"iterate",ARRAY_ITERATE_KEY);const n=i[e](...t);return(n===-1||n===!1)&&isProxy(t[0])?(t[0]=toRaw(t[0]),i[e](...t)):n}function noTracking(s,e,t=[]){pauseTracking(),startBatch();const i=toRaw(s)[e].apply(s,t);return endBatch(),resetTracking(),i}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(isSymbol));function hasOwnProperty(s){isSymbol(s)||(s=String(s));const e=toRaw(this);return track(e,"has",s),e.hasOwnProperty(s)}class BaseReactiveHandler{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){if(t==="__v_skip")return e.__v_skip;const n=this._isReadonly,o=this._isShallow;if(t==="__v_isReactive")return!n;if(t==="__v_isReadonly")return n;if(t==="__v_isShallow")return o;if(t==="__v_raw")return i===(n?o?shallowReadonlyMap:readonlyMap:o?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const r=isArray(e);if(!n){let l;if(r&&(l=arrayInstrumentations[t]))return l;if(t==="hasOwnProperty")return hasOwnProperty}const a=Reflect.get(e,t,isRef(e)?e:i);return(isSymbol(t)?builtInSymbols.has(t):isNonTrackableKeys(t))||(n||track(e,"get",t),o)?a:isRef(a)?r&&isIntegerKey(t)?a:a.value:isObject$1(a)?n?readonly(a):reactive(a):a}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,t,i,n){let o=e[t];if(!this._isShallow){const l=isReadonly(o);if(!isShallow(i)&&!isReadonly(i)&&(o=toRaw(o),i=toRaw(i)),!isArray(e)&&isRef(o)&&!isRef(i))return l?!1:(o.value=i,!0)}const r=isArray(e)&&isIntegerKey(t)?Number(t)<e.length:hasOwn(e,t),a=Reflect.set(e,t,i,isRef(e)?e:n);return e===toRaw(n)&&(r?hasChanged(i,o)&&trigger(e,"set",t,i):trigger(e,"add",t,i)),a}deleteProperty(e,t){const i=hasOwn(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&i&&trigger(e,"delete",t,void 0),n}has(e,t){const i=Reflect.has(e,t);return(!isSymbol(t)||!builtInSymbols.has(t))&&track(e,"has",t),i}ownKeys(e){return track(e,"iterate",isArray(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=s=>s,getProto=s=>Reflect.getPrototypeOf(s);function createIterableMethod(s,e,t){return function(...i){const n=this.__v_raw,o=toRaw(n),r=isMap(o),a=s==="entries"||s===Symbol.iterator&&r,l=s==="keys"&&r,c=n[s](...i),u=t?toShallow:e?toReadonly:toReactive;return!e&&track(o,"iterate",l?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(s){return function(...e){return s==="delete"?!1:s==="clear"?void 0:this}}function createInstrumentations(s,e){const t={get(n){const o=this.__v_raw,r=toRaw(o),a=toRaw(n);s||(hasChanged(n,a)&&track(r,"get",n),track(r,"get",a));const{has:l}=getProto(r),c=e?toShallow:s?toReadonly:toReactive;if(l.call(r,n))return c(o.get(n));if(l.call(r,a))return c(o.get(a));o!==r&&o.get(n)},get size(){const n=this.__v_raw;return!s&&track(toRaw(n),"iterate",ITERATE_KEY),Reflect.get(n,"size",n)},has(n){const o=this.__v_raw,r=toRaw(o),a=toRaw(n);return s||(hasChanged(n,a)&&track(r,"has",n),track(r,"has",a)),n===a?o.has(n):o.has(n)||o.has(a)},forEach(n,o){const r=this,a=r.__v_raw,l=toRaw(a),c=e?toShallow:s?toReadonly:toReactive;return!s&&track(l,"iterate",ITERATE_KEY),a.forEach((u,h)=>n.call(o,c(u),c(h),r))}};return extend(t,s?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(n){!e&&!isShallow(n)&&!isReadonly(n)&&(n=toRaw(n));const o=toRaw(this);return getProto(o).has.call(o,n)||(o.add(n),trigger(o,"add",n,n)),this},set(n,o){!e&&!isShallow(o)&&!isReadonly(o)&&(o=toRaw(o));const r=toRaw(this),{has:a,get:l}=getProto(r);let c=a.call(r,n);c||(n=toRaw(n),c=a.call(r,n));const u=l.call(r,n);return r.set(n,o),c?hasChanged(o,u)&&trigger(r,"set",n,o):trigger(r,"add",n,o),this},delete(n){const o=toRaw(this),{has:r,get:a}=getProto(o);let l=r.call(o,n);l||(n=toRaw(n),l=r.call(o,n)),a&&a.call(o,n);const c=o.delete(n);return l&&trigger(o,"delete",n,void 0),c},clear(){const n=toRaw(this),o=n.size!==0,r=n.clear();return o&&trigger(n,"clear",void 0,void 0),r}}),["keys","values","entries",Symbol.iterator].forEach(n=>{t[n]=createIterableMethod(n,s,e)}),t}function createInstrumentationGetter(s,e){const t=createInstrumentations(s,e);return(i,n,o)=>n==="__v_isReactive"?!s:n==="__v_isReadonly"?s:n==="__v_raw"?i:Reflect.get(hasOwn(t,n)&&n in i?t:i,n,o)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(s){return s.__v_skip||!Object.isExtensible(s)?0:targetTypeMap(toRawType(s))}function reactive(s){return isReadonly(s)?s:createReactiveObject(s,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(s){return createReactiveObject(s,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(s){return createReactiveObject(s,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(s){return createReactiveObject(s,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(s,e,t,i,n){if(!isObject$1(s)||s.__v_raw&&!(e&&s.__v_isReactive))return s;const o=n.get(s);if(o)return o;const r=getTargetType(s);if(r===0)return s;const a=new Proxy(s,r===2?i:t);return n.set(s,a),a}function isReactive(s){return isReadonly(s)?isReactive(s.__v_raw):!!(s&&s.__v_isReactive)}function isReadonly(s){return!!(s&&s.__v_isReadonly)}function isShallow(s){return!!(s&&s.__v_isShallow)}function isProxy(s){return s?!!s.__v_raw:!1}function toRaw(s){const e=s&&s.__v_raw;return e?toRaw(e):s}function markRaw(s){return!hasOwn(s,"__v_skip")&&Object.isExtensible(s)&&def(s,"__v_skip",!0),s}const toReactive=s=>isObject$1(s)?reactive(s):s,toReadonly=s=>isObject$1(s)?readonly(s):s;function isRef(s){return s?s.__v_isRef===!0:!1}function ref(s){return createRef(s,!1)}function createRef(s,e){return isRef(s)?s:new RefImpl(s,e)}class RefImpl{constructor(e,t){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:toRaw(e),this._value=t?e:toReactive(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,i=this.__v_isShallow||isShallow(e)||isReadonly(e);e=i?e:toRaw(e),hasChanged(e,t)&&(this._rawValue=e,this._value=i?e:toReactive(e),this.dep.trigger())}}function unref(s){return isRef(s)?s.value:s}const shallowUnwrapHandlers={get:(s,e,t)=>e==="__v_raw"?s:unref(Reflect.get(s,e,t)),set:(s,e,t,i)=>{const n=s[e];return isRef(n)&&!isRef(t)?(n.value=t,!0):Reflect.set(s,e,t,i)}};function proxyRefs(s){return isReactive(s)?s:new Proxy(s,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(e,t,i){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed$1(s,e,t=!1){let i,n;return isFunction(s)?i=s:(i=s.get,n=s.set),new ComputedRefImpl(i,n,t)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(s,e=!1,t=activeWatcher){if(t){let i=cleanupMap.get(t);i||cleanupMap.set(t,i=[]),i.push(s)}}function watch$1(s,e,t=EMPTY_OBJ){const{immediate:i,deep:n,once:o,scheduler:r,augmentJob:a,call:l}=t,c=C=>n?C:isShallow(C)||n===!1||n===0?traverse(C,1):traverse(C);let u,h,d,y,b=!1,w=!1;if(isRef(s)?(h=()=>s.value,b=isShallow(s)):isReactive(s)?(h=()=>c(s),b=!0):isArray(s)?(w=!0,b=s.some(C=>isReactive(C)||isShallow(C)),h=()=>s.map(C=>{if(isRef(C))return C.value;if(isReactive(C))return c(C);if(isFunction(C))return l?l(C,2):C()})):isFunction(s)?e?h=l?()=>l(s,2):s:h=()=>{if(d){pauseTracking();try{d()}finally{resetTracking()}}const C=activeWatcher;activeWatcher=u;try{return l?l(s,3,[y]):s(y)}finally{activeWatcher=C}}:h=NOOP,e&&n){const C=h,M=n===!0?1/0:n;h=()=>traverse(C(),M)}const g=getCurrentScope(),_=()=>{u.stop(),g&&g.active&&remove(g.effects,u)};if(o&&e){const C=e;e=(...M)=>{C(...M),_()}}let k=w?new Array(s.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const O=C=>{if(!(!(u.flags&1)||!u.dirty&&!C))if(e){const M=u.run();if(n||b||(w?M.some((L,D)=>hasChanged(L,k[D])):hasChanged(M,k))){d&&d();const L=activeWatcher;activeWatcher=u;try{const D=[M,k===INITIAL_WATCHER_VALUE?void 0:w&&k[0]===INITIAL_WATCHER_VALUE?[]:k,y];l?l(e,3,D):e(...D),k=M}finally{activeWatcher=L}}}else u.run()};return a&&a(O),u=new ReactiveEffect(h),u.scheduler=r?()=>r(O,!1):O,y=C=>onWatcherCleanup(C,!1,u),d=u.onStop=()=>{const C=cleanupMap.get(u);if(C){if(l)l(C,4);else for(const M of C)M();cleanupMap.delete(u)}},e?i?O(!0):k=u.run():r?r(O.bind(null,!0),!0):u.run(),_.pause=u.pause.bind(u),_.resume=u.resume.bind(u),_.stop=_,_}function traverse(s,e=1/0,t){if(e<=0||!isObject$1(s)||s.__v_skip||(t=t||new Set,t.has(s)))return s;if(t.add(s),e--,isRef(s))traverse(s.value,e,t);else if(isArray(s))for(let i=0;i<s.length;i++)traverse(s[i],e,t);else if(isSet(s)||isMap(s))s.forEach(i=>{traverse(i,e,t)});else if(isPlainObject(s)){for(const i in s)traverse(s[i],e,t);for(const i of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,i)&&traverse(s[i],e,t)}return s}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(s,...e){if(isWarning)return;isWarning=!0,pauseTracking();const t=stack.length?stack[stack.length-1].component:null,i=t&&t.appContext.config.warnHandler,n=getComponentTrace();if(i)callWithErrorHandling(i,t,11,[s+e.map(o=>{var r,a;return(a=(r=o.toString)==null?void 0:r.call(o))!=null?a:JSON.stringify(o)}).join(""),t&&t.proxy,n.map(({vnode:o})=>`at <${formatComponentName(t,o.type)}>`).join(`
`),n]);else{const o=[`[Vue warn]: ${s}`,...e];n.length&&o.push(`
`,...formatTrace(n)),console.warn(...o)}resetTracking(),isWarning=!1}function getComponentTrace(){let s=stack[stack.length-1];if(!s)return[];const e=[];for(;s;){const t=e[0];t&&t.vnode===s?t.recurseCount++:e.push({vnode:s,recurseCount:0});const i=s.component&&s.component.parent;s=i&&i.vnode}return e}function formatTrace(s){const e=[];return s.forEach((t,i)=>{e.push(...i===0?[]:[`
`],...formatTraceEntry(t))}),e}function formatTraceEntry({vnode:s,recurseCount:e}){const t=e>0?`... (${e} recursive calls)`:"",i=s.component?s.component.parent==null:!1,n=` at <${formatComponentName(s.component,s.type,i)}`,o=">"+t;return s.props?[n,...formatProps(s.props),o]:[n+o]}function formatProps(s){const e=[],t=Object.keys(s);return t.slice(0,3).forEach(i=>{e.push(...formatProp(i,s[i]))}),t.length>3&&e.push(" ..."),e}function formatProp(s,e,t){return isString(e)?(e=JSON.stringify(e),t?e:[`${s}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?t?e:[`${s}=${e}`]:isRef(e)?(e=formatProp(s,toRaw(e.value),!0),t?e:[`${s}=Ref<`,e,">"]):isFunction(e)?[`${s}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),t?e:[`${s}=`,e])}function callWithErrorHandling(s,e,t,i){try{return i?s(...i):s()}catch(n){handleError(n,e,t)}}function callWithAsyncErrorHandling(s,e,t,i){if(isFunction(s)){const n=callWithErrorHandling(s,e,t,i);return n&&isPromise(n)&&n.catch(o=>{handleError(o,e,t)}),n}if(isArray(s)){const n=[];for(let o=0;o<s.length;o++)n.push(callWithAsyncErrorHandling(s[o],e,t,i));return n}}function handleError(s,e,t,i=!0){const n=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:r}=e&&e.appContext.config||EMPTY_OBJ;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](s,l,c)===!1)return}a=a.parent}if(o){pauseTracking(),callWithErrorHandling(o,null,10,[s,l,c]),resetTracking();return}}logError(s,t,n,i,r)}function logError(s,e,t,i=!0,n=!1){if(n)throw s;console.error(s)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick$1(s){const e=currentFlushPromise||resolvedPromise;return s?e.then(this?s.bind(this):s):e}function findInsertionIndex(s){let e=flushIndex+1,t=queue.length;for(;e<t;){const i=e+t>>>1,n=queue[i],o=getId(n);o<s||o===s&&n.flags&2?e=i+1:t=i}return e}function queueJob(s){if(!(s.flags&1)){const e=getId(s),t=queue[queue.length-1];!t||!(s.flags&2)&&e>=getId(t)?queue.push(s):queue.splice(findInsertionIndex(e),0,s),s.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(s){isArray(s)?pendingPostFlushCbs.push(...s):activePostFlushCbs&&s.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,s):s.flags&1||(pendingPostFlushCbs.push(s),s.flags|=1),queueFlush()}function flushPreFlushCbs(s,e,t=flushIndex+1){for(;t<queue.length;t++){const i=queue[t];if(i&&i.flags&2){if(s&&i.id!==s.uid)continue;queue.splice(t,1),t--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function flushPostFlushCbs(s){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((t,i)=>getId(t)-getId(i));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const t=activePostFlushCbs[postFlushIndex];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=s=>s.id==null?s.flags&2?-1:1/0:s.id;function flushJobs(s){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),callWithErrorHandling(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&(e.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(s){const e=currentRenderingInstance;return currentRenderingInstance=s,currentScopeId=s&&s.type.__scopeId||null,e}function withCtx(s,e=currentRenderingInstance,t){if(!e||s._n)return s;const i=(...n)=>{i._d&&setBlockTracking(-1);const o=setCurrentRenderingInstance(e);let r;try{r=s(...n)}finally{setCurrentRenderingInstance(o),i._d&&setBlockTracking(1)}return r};return i._n=!0,i._c=!0,i._d=!0,i}function invokeDirectiveHook(s,e,t,i){const n=s.dirs,o=e&&e.dirs;for(let r=0;r<n.length;r++){const a=n[r];o&&(a.oldValue=o[r].value);let l=a.dir[i];l&&(pauseTracking(),callWithAsyncErrorHandling(l,t,8,[s.el,a,s,e]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=s=>s.__isTeleport;function setTransitionHooks(s,e){s.shapeFlag&6&&s.component?(s.transition=e,setTransitionHooks(s.component.subTree,e)):s.shapeFlag&128?(s.ssContent.transition=e.clone(s.ssContent),s.ssFallback.transition=e.clone(s.ssFallback)):s.transition=e}function markAsyncBoundary(s){s.ids=[s.ids[0]+s.ids[2]+++"-",0,0]}function setRef(s,e,t,i,n=!1){if(isArray(s)){s.forEach((b,w)=>setRef(b,e&&(isArray(e)?e[w]:e),t,i,n));return}if(isAsyncWrapper(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&setRef(s,e,t,i.component.subTree);return}const o=i.shapeFlag&4?getComponentPublicInstance(i.component):i.el,r=n?null:o,{i:a,r:l}=s,c=e&&e.r,u=a.refs===EMPTY_OBJ?a.refs={}:a.refs,h=a.setupState,d=toRaw(h),y=h===EMPTY_OBJ?()=>!1:b=>hasOwn(d,b);if(c!=null&&c!==l&&(isString(c)?(u[c]=null,y(c)&&(h[c]=null)):isRef(c)&&(c.value=null)),isFunction(l))callWithErrorHandling(l,a,12,[r,u]);else{const b=isString(l),w=isRef(l);if(b||w){const g=()=>{if(s.f){const _=b?y(l)?h[l]:u[l]:l.value;n?isArray(_)&&remove(_,o):isArray(_)?_.includes(o)||_.push(o):b?(u[l]=[o],y(l)&&(h[l]=u[l])):(l.value=[o],s.k&&(u[s.k]=l.value))}else b?(u[l]=r,y(l)&&(h[l]=r)):w&&(l.value=r,s.k&&(u[s.k]=r))};r?(g.id=-1,queuePostRenderEffect(g,t)):g()}}}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=s=>!!s.type.__asyncLoader,isKeepAlive=s=>s.type.__isKeepAlive;function onActivated(s,e){registerKeepAliveHook(s,"a",e)}function onDeactivated(s,e){registerKeepAliveHook(s,"da",e)}function registerKeepAliveHook(s,e,t=currentInstance){const i=s.__wdc||(s.__wdc=()=>{let n=t;for(;n;){if(n.isDeactivated)return;n=n.parent}return s()});if(injectHook(e,i,t),t){let n=t.parent;for(;n&&n.parent;)isKeepAlive(n.parent.vnode)&&injectToKeepAliveRoot(i,e,t,n),n=n.parent}}function injectToKeepAliveRoot(s,e,t,i){const n=injectHook(e,s,i,!0);onUnmounted(()=>{remove(i[e],n)},t)}function injectHook(s,e,t=currentInstance,i=!1){if(t){const n=t[s]||(t[s]=[]),o=e.__weh||(e.__weh=(...r)=>{pauseTracking();const a=setCurrentInstance(t),l=callWithAsyncErrorHandling(e,t,s,r);return a(),resetTracking(),l});return i?n.unshift(o):n.push(o),o}}const createHook=s=>(e,t=currentInstance)=>{(!isInSSRComponentSetup||s==="sp")&&injectHook(s,(...i)=>e(...i),t)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(s,e=currentInstance){injectHook("ec",s,e)}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc"),getPublicInstance=s=>s?isStatefulComponent(s)?getComponentPublicInstance(s):getPublicInstance(s.parent):null,publicPropertiesMap=extend(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>getPublicInstance(s.parent),$root:s=>getPublicInstance(s.root),$host:s=>s.ce,$emit:s=>s.emit,$options:s=>resolveMergedOptions(s),$forceUpdate:s=>s.f||(s.f=()=>{queueJob(s.update)}),$nextTick:s=>s.n||(s.n=nextTick$1.bind(s.proxy)),$watch:s=>instanceWatch.bind(s)}),hasSetupBinding=(s,e)=>s!==EMPTY_OBJ&&!s.__isScriptSetup&&hasOwn(s,e),PublicInstanceProxyHandlers={get({_:s},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:i,data:n,props:o,accessCache:r,type:a,appContext:l}=s;let c;if(e[0]!=="$"){const y=r[e];if(y!==void 0)switch(y){case 1:return i[e];case 2:return n[e];case 4:return t[e];case 3:return o[e]}else{if(hasSetupBinding(i,e))return r[e]=1,i[e];if(n!==EMPTY_OBJ&&hasOwn(n,e))return r[e]=2,n[e];if((c=s.propsOptions[0])&&hasOwn(c,e))return r[e]=3,o[e];if(t!==EMPTY_OBJ&&hasOwn(t,e))return r[e]=4,t[e];shouldCacheAccess&&(r[e]=0)}}const u=publicPropertiesMap[e];let h,d;if(u)return e==="$attrs"&&track(s.attrs,"get",""),u(s);if((h=a.__cssModules)&&(h=h[e]))return h;if(t!==EMPTY_OBJ&&hasOwn(t,e))return r[e]=4,t[e];if(d=l.config.globalProperties,hasOwn(d,e))return d[e]},set({_:s},e,t){const{data:i,setupState:n,ctx:o}=s;return hasSetupBinding(n,e)?(n[e]=t,!0):i!==EMPTY_OBJ&&hasOwn(i,e)?(i[e]=t,!0):hasOwn(s.props,e)||e[0]==="$"&&e.slice(1)in s?!1:(o[e]=t,!0)},has({_:{data:s,setupState:e,accessCache:t,ctx:i,appContext:n,propsOptions:o}},r){let a;return!!t[r]||s!==EMPTY_OBJ&&hasOwn(s,r)||hasSetupBinding(e,r)||(a=o[0])&&hasOwn(a,r)||hasOwn(i,r)||hasOwn(publicPropertiesMap,r)||hasOwn(n.config.globalProperties,r)},defineProperty(s,e,t){return t.get!=null?s._.accessCache[e]=0:hasOwn(t,"value")&&this.set(s,e,t.value,null),Reflect.defineProperty(s,e,t)}};function normalizePropsOrEmits(s){return isArray(s)?s.reduce((e,t)=>(e[t]=null,e),{}):s}let shouldCacheAccess=!0;function applyOptions(s){const e=resolveMergedOptions(s),t=s.proxy,i=s.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,s,"bc");const{data:n,computed:o,methods:r,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:y,updated:b,activated:w,deactivated:g,beforeDestroy:_,beforeUnmount:k,destroyed:O,unmounted:C,render:M,renderTracked:L,renderTriggered:D,errorCaptured:K,serverPrefetch:J,expose:X,inheritAttrs:j,components:oe,directives:de,filters:ge}=e;if(c&&resolveInjections(c,i,null),r)for(const Y in r){const V=r[Y];isFunction(V)&&(i[Y]=V.bind(t))}if(n){const Y=n.call(t,t);isObject$1(Y)&&(s.data=reactive(Y))}if(shouldCacheAccess=!0,o)for(const Y in o){const V=o[Y],ae=isFunction(V)?V.bind(t,t):isFunction(V.get)?V.get.bind(t,t):NOOP,fe=!isFunction(V)&&isFunction(V.set)?V.set.bind(t):NOOP,le=computed({get:ae,set:fe});Object.defineProperty(i,Y,{enumerable:!0,configurable:!0,get:()=>le.value,set:te=>le.value=te})}if(a)for(const Y in a)createWatcher(a[Y],i,t,Y);if(l){const Y=isFunction(l)?l.call(t):l;Reflect.ownKeys(Y).forEach(V=>{provide(V,Y[V])})}u&&callHook(u,s,"c");function G(Y,V){isArray(V)?V.forEach(ae=>Y(ae.bind(t))):V&&Y(V.bind(t))}if(G(onBeforeMount,h),G(onMounted,d),G(onBeforeUpdate,y),G(onUpdated,b),G(onActivated,w),G(onDeactivated,g),G(onErrorCaptured,K),G(onRenderTracked,L),G(onRenderTriggered,D),G(onBeforeUnmount,k),G(onUnmounted,C),G(onServerPrefetch,J),isArray(X))if(X.length){const Y=s.exposed||(s.exposed={});X.forEach(V=>{Object.defineProperty(Y,V,{get:()=>t[V],set:ae=>t[V]=ae})})}else s.exposed||(s.exposed={});M&&s.render===NOOP&&(s.render=M),j!=null&&(s.inheritAttrs=j),oe&&(s.components=oe),de&&(s.directives=de),J&&markAsyncBoundary(s)}function resolveInjections(s,e,t=NOOP){isArray(s)&&(s=normalizeInject(s));for(const i in s){const n=s[i];let o;isObject$1(n)?"default"in n?o=inject(n.from||i,n.default,!0):o=inject(n.from||i):o=inject(n),isRef(o)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:r=>o.value=r}):e[i]=o}}function callHook(s,e,t){callWithAsyncErrorHandling(isArray(s)?s.map(i=>i.bind(e.proxy)):s.bind(e.proxy),e,t)}function createWatcher(s,e,t,i){let n=i.includes(".")?createPathGetter(t,i):()=>t[i];if(isString(s)){const o=e[s];isFunction(o)&&watch(n,o)}else if(isFunction(s))watch(n,s.bind(t));else if(isObject$1(s))if(isArray(s))s.forEach(o=>createWatcher(o,e,t,i));else{const o=isFunction(s.handler)?s.handler.bind(t):e[s.handler];isFunction(o)&&watch(n,o,s)}}function resolveMergedOptions(s){const e=s.type,{mixins:t,extends:i}=e,{mixins:n,optionsCache:o,config:{optionMergeStrategies:r}}=s.appContext,a=o.get(e);let l;return a?l=a:!n.length&&!t&&!i?l=e:(l={},n.length&&n.forEach(c=>mergeOptions(l,c,r,!0)),mergeOptions(l,e,r)),isObject$1(e)&&o.set(e,l),l}function mergeOptions(s,e,t,i=!1){const{mixins:n,extends:o}=e;o&&mergeOptions(s,o,t,!0),n&&n.forEach(r=>mergeOptions(s,r,t,!0));for(const r in e)if(!(i&&r==="expose")){const a=internalOptionMergeStrats[r]||t&&t[r];s[r]=a?a(s[r],e[r]):e[r]}return s}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(s,e){return e?s?function(){return extend(isFunction(s)?s.call(this,this):s,isFunction(e)?e.call(this,this):e)}:e:s}function mergeInject(s,e){return mergeObjectOptions(normalizeInject(s),normalizeInject(e))}function normalizeInject(s){if(isArray(s)){const e={};for(let t=0;t<s.length;t++)e[s[t]]=s[t];return e}return s}function mergeAsArray(s,e){return s?[...new Set([].concat(s,e))]:e}function mergeObjectOptions(s,e){return s?extend(Object.create(null),s,e):e}function mergeEmitsOrPropsOptions(s,e){return s?isArray(s)&&isArray(e)?[...new Set([...s,...e])]:extend(Object.create(null),normalizePropsOrEmits(s),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(s,e){if(!s)return e;if(!e)return s;const t=extend(Object.create(null),s);for(const i in e)t[i]=mergeAsArray(s[i],e[i]);return t}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(s,e){return function(i,n=null){isFunction(i)||(i=extend({},i)),n!=null&&!isObject$1(n)&&(n=null);const o=createAppContext(),r=new WeakSet,a=[];let l=!1;const c=o.app={_uid:uid$1++,_component:i,_props:n,_container:null,_context:o,_instance:null,version,get config(){return o.config},set config(u){},use(u,...h){return r.has(u)||(u&&isFunction(u.install)?(r.add(u),u.install(c,...h)):isFunction(u)&&(r.add(u),u(c,...h))),c},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),c},component(u,h){return h?(o.components[u]=h,c):o.components[u]},directive(u,h){return h?(o.directives[u]=h,c):o.directives[u]},mount(u,h,d){if(!l){const y=c._ceVNode||createVNode(i,n);return y.appContext=o,d===!0?d="svg":d===!1&&(d=void 0),s(y,u,d),l=!0,c._container=u,u.__vue_app__=c,getComponentPublicInstance(y.component)}},onUnmount(u){a.push(u)},unmount(){l&&(callWithAsyncErrorHandling(a,c._instance,16),s(null,c._container),delete c._container.__vue_app__)},provide(u,h){return o.provides[u]=h,c},runWithContext(u){const h=currentApp;currentApp=c;try{return u()}finally{currentApp=h}}};return c}}let currentApp=null;function provide(s,e){if(currentInstance){let t=currentInstance.provides;const i=currentInstance.parent&&currentInstance.parent.provides;i===t&&(t=currentInstance.provides=Object.create(i)),t[s]=e}}function inject(s,e,t=!1){const i=currentInstance||currentRenderingInstance;if(i||currentApp){const n=currentApp?currentApp._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&s in n)return n[s];if(arguments.length>1)return t&&isFunction(e)?e.call(i&&i.proxy):e}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=s=>Object.getPrototypeOf(s)===internalObjectProto;function initProps(s,e,t,i=!1){const n={},o=createInternalObject();s.propsDefaults=Object.create(null),setFullProps(s,e,n,o);for(const r in s.propsOptions[0])r in n||(n[r]=void 0);t?s.props=i?n:shallowReactive(n):s.type.props?s.props=n:s.props=o,s.attrs=o}function updateProps(s,e,t,i){const{props:n,attrs:o,vnode:{patchFlag:r}}=s,a=toRaw(n),[l]=s.propsOptions;let c=!1;if((i||r>0)&&!(r&16)){if(r&8){const u=s.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(isEmitListener(s.emitsOptions,d))continue;const y=e[d];if(l)if(hasOwn(o,d))y!==o[d]&&(o[d]=y,c=!0);else{const b=camelize(d);n[b]=resolvePropValue(l,a,b,y,s,!1)}else y!==o[d]&&(o[d]=y,c=!0)}}}else{setFullProps(s,e,n,o)&&(c=!0);let u;for(const h in a)(!e||!hasOwn(e,h)&&((u=hyphenate(h))===h||!hasOwn(e,u)))&&(l?t&&(t[h]!==void 0||t[u]!==void 0)&&(n[h]=resolvePropValue(l,a,h,void 0,s,!0)):delete n[h]);if(o!==a)for(const h in o)(!e||!hasOwn(e,h))&&(delete o[h],c=!0)}c&&trigger(s.attrs,"set","")}function setFullProps(s,e,t,i){const[n,o]=s.propsOptions;let r=!1,a;if(e)for(let l in e){if(isReservedProp(l))continue;const c=e[l];let u;n&&hasOwn(n,u=camelize(l))?!o||!o.includes(u)?t[u]=c:(a||(a={}))[u]=c:isEmitListener(s.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,r=!0)}if(o){const l=toRaw(t),c=a||EMPTY_OBJ;for(let u=0;u<o.length;u++){const h=o[u];t[h]=resolvePropValue(n,l,h,c[h],s,!hasOwn(c,h))}}return r}function resolvePropValue(s,e,t,i,n,o){const r=s[t];if(r!=null){const a=hasOwn(r,"default");if(a&&i===void 0){const l=r.default;if(r.type!==Function&&!r.skipFactory&&isFunction(l)){const{propsDefaults:c}=n;if(t in c)i=c[t];else{const u=setCurrentInstance(n);i=c[t]=l.call(null,e),u()}}else i=l;n.ce&&n.ce._setProp(t,i)}r[0]&&(o&&!a?i=!1:r[1]&&(i===""||i===hyphenate(t))&&(i=!0))}return i}const mixinPropsCache=new WeakMap;function normalizePropsOptions(s,e,t=!1){const i=t?mixinPropsCache:e.propsCache,n=i.get(s);if(n)return n;const o=s.props,r={},a=[];let l=!1;if(!isFunction(s)){const u=h=>{l=!0;const[d,y]=normalizePropsOptions(h,e,!0);extend(r,d),y&&a.push(...y)};!t&&e.mixins.length&&e.mixins.forEach(u),s.extends&&u(s.extends),s.mixins&&s.mixins.forEach(u)}if(!o&&!l)return isObject$1(s)&&i.set(s,EMPTY_ARR),EMPTY_ARR;if(isArray(o))for(let u=0;u<o.length;u++){const h=camelize(o[u]);validatePropName(h)&&(r[h]=EMPTY_OBJ)}else if(o)for(const u in o){const h=camelize(u);if(validatePropName(h)){const d=o[u],y=r[h]=isArray(d)||isFunction(d)?{type:d}:extend({},d),b=y.type;let w=!1,g=!0;if(isArray(b))for(let _=0;_<b.length;++_){const k=b[_],O=isFunction(k)&&k.name;if(O==="Boolean"){w=!0;break}else O==="String"&&(g=!1)}else w=isFunction(b)&&b.name==="Boolean";y[0]=w,y[1]=g,(w||hasOwn(y,"default"))&&a.push(h)}}const c=[r,a];return isObject$1(s)&&i.set(s,c),c}function validatePropName(s){return s[0]!=="$"&&!isReservedProp(s)}const isInternalKey=s=>s[0]==="_"||s==="$stable",normalizeSlotValue=s=>isArray(s)?s.map(normalizeVNode):[normalizeVNode(s)],normalizeSlot=(s,e,t)=>{if(e._n)return e;const i=withCtx((...n)=>normalizeSlotValue(e(...n)),t);return i._c=!1,i},normalizeObjectSlots=(s,e,t)=>{const i=s._ctx;for(const n in s){if(isInternalKey(n))continue;const o=s[n];if(isFunction(o))e[n]=normalizeSlot(n,o,i);else if(o!=null){const r=normalizeSlotValue(o);e[n]=()=>r}}},normalizeVNodeSlots=(s,e)=>{const t=normalizeSlotValue(e);s.slots.default=()=>t},assignSlots=(s,e,t)=>{for(const i in e)(t||i!=="_")&&(s[i]=e[i])},initSlots=(s,e,t)=>{const i=s.slots=createInternalObject();if(s.vnode.shapeFlag&32){const n=e._;n?(assignSlots(i,e,t),t&&def(i,"_",n,!0)):normalizeObjectSlots(e,i)}else e&&normalizeVNodeSlots(s,e)},updateSlots=(s,e,t)=>{const{vnode:i,slots:n}=s;let o=!0,r=EMPTY_OBJ;if(i.shapeFlag&32){const a=e._;a?t&&a===1?o=!1:assignSlots(n,e,t):(o=!e.$stable,normalizeObjectSlots(e,n)),r=e}else e&&(normalizeVNodeSlots(s,e),r={default:1});if(o)for(const a in n)!isInternalKey(a)&&r[a]==null&&delete n[a]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(s){return baseCreateRenderer(s)}function baseCreateRenderer(s,e){const t=getGlobalThis();t.__VUE__=!0;const{insert:i,remove:n,patchProp:o,createElement:r,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:y=NOOP,insertStaticContent:b}=s,w=(f,m,v,T=null,x=null,E=null,I=void 0,R=null,A=!!m.dynamicChildren)=>{if(f===m)return;f&&!isSameVNodeType(f,m)&&(T=pe(f),te(f,x,E,!0),f=null),m.patchFlag===-2&&(A=!1,m.dynamicChildren=null);const{type:S,ref:q,shapeFlag:P}=m;switch(S){case Text:g(f,m,v,T);break;case Comment:_(f,m,v,T);break;case Static:f==null&&k(m,v,T,I);break;case Fragment:oe(f,m,v,T,x,E,I,R,A);break;default:P&1?M(f,m,v,T,x,E,I,R,A):P&6?de(f,m,v,T,x,E,I,R,A):(P&64||P&128)&&S.process(f,m,v,T,x,E,I,R,A,ue)}q!=null&&x&&setRef(q,f&&f.ref,E,m||f,!m)},g=(f,m,v,T)=>{if(f==null)i(m.el=a(m.children),v,T);else{const x=m.el=f.el;m.children!==f.children&&c(x,m.children)}},_=(f,m,v,T)=>{f==null?i(m.el=l(m.children||""),v,T):m.el=f.el},k=(f,m,v,T)=>{[f.el,f.anchor]=b(f.children,m,v,T,f.el,f.anchor)},O=({el:f,anchor:m},v,T)=>{let x;for(;f&&f!==m;)x=d(f),i(f,v,T),f=x;i(m,v,T)},C=({el:f,anchor:m})=>{let v;for(;f&&f!==m;)v=d(f),n(f),f=v;n(m)},M=(f,m,v,T,x,E,I,R,A)=>{m.type==="svg"?I="svg":m.type==="math"&&(I="mathml"),f==null?L(m,v,T,x,E,I,R,A):J(f,m,x,E,I,R,A)},L=(f,m,v,T,x,E,I,R)=>{let A,S;const{props:q,shapeFlag:P,transition:N,dirs:F}=f;if(A=f.el=r(f.type,E,q&&q.is,q),P&8?u(A,f.children):P&16&&K(f.children,A,null,T,x,resolveChildrenNamespace(f,E),I,R),F&&invokeDirectiveHook(f,null,T,"created"),D(A,f,f.scopeId,I,T),q){for(const W in q)W!=="value"&&!isReservedProp(W)&&o(A,W,null,q[W],E,T);"value"in q&&o(A,"value",null,q.value,E),(S=q.onVnodeBeforeMount)&&invokeVNodeHook(S,T,f)}F&&invokeDirectiveHook(f,null,T,"beforeMount");const B=needTransition(x,N);B&&N.beforeEnter(A),i(A,m,v),((S=q&&q.onVnodeMounted)||B||F)&&queuePostRenderEffect(()=>{S&&invokeVNodeHook(S,T,f),B&&N.enter(A),F&&invokeDirectiveHook(f,null,T,"mounted")},x)},D=(f,m,v,T,x)=>{if(v&&y(f,v),T)for(let E=0;E<T.length;E++)y(f,T[E]);if(x){let E=x.subTree;if(m===E||isSuspense(E.type)&&(E.ssContent===m||E.ssFallback===m)){const I=x.vnode;D(f,I,I.scopeId,I.slotScopeIds,x.parent)}}},K=(f,m,v,T,x,E,I,R,A=0)=>{for(let S=A;S<f.length;S++){const q=f[S]=R?cloneIfMounted(f[S]):normalizeVNode(f[S]);w(null,q,m,v,T,x,E,I,R)}},J=(f,m,v,T,x,E,I)=>{const R=m.el=f.el;let{patchFlag:A,dynamicChildren:S,dirs:q}=m;A|=f.patchFlag&16;const P=f.props||EMPTY_OBJ,N=m.props||EMPTY_OBJ;let F;if(v&&toggleRecurse(v,!1),(F=N.onVnodeBeforeUpdate)&&invokeVNodeHook(F,v,m,f),q&&invokeDirectiveHook(m,f,v,"beforeUpdate"),v&&toggleRecurse(v,!0),(P.innerHTML&&N.innerHTML==null||P.textContent&&N.textContent==null)&&u(R,""),S?X(f.dynamicChildren,S,R,v,T,resolveChildrenNamespace(m,x),E):I||V(f,m,R,null,v,T,resolveChildrenNamespace(m,x),E,!1),A>0){if(A&16)j(R,P,N,v,x);else if(A&2&&P.class!==N.class&&o(R,"class",null,N.class,x),A&4&&o(R,"style",P.style,N.style,x),A&8){const B=m.dynamicProps;for(let W=0;W<B.length;W++){const z=B[W],Z=P[z],Q=N[z];(Q!==Z||z==="value")&&o(R,z,Z,Q,x,v)}}A&1&&f.children!==m.children&&u(R,m.children)}else!I&&S==null&&j(R,P,N,v,x);((F=N.onVnodeUpdated)||q)&&queuePostRenderEffect(()=>{F&&invokeVNodeHook(F,v,m,f),q&&invokeDirectiveHook(m,f,v,"updated")},T)},X=(f,m,v,T,x,E,I)=>{for(let R=0;R<m.length;R++){const A=f[R],S=m[R],q=A.el&&(A.type===Fragment||!isSameVNodeType(A,S)||A.shapeFlag&70)?h(A.el):v;w(A,S,q,null,T,x,E,I,!0)}},j=(f,m,v,T,x)=>{if(m!==v){if(m!==EMPTY_OBJ)for(const E in m)!isReservedProp(E)&&!(E in v)&&o(f,E,m[E],null,x,T);for(const E in v){if(isReservedProp(E))continue;const I=v[E],R=m[E];I!==R&&E!=="value"&&o(f,E,R,I,x,T)}"value"in v&&o(f,"value",m.value,v.value,x)}},oe=(f,m,v,T,x,E,I,R,A)=>{const S=m.el=f?f.el:a(""),q=m.anchor=f?f.anchor:a("");let{patchFlag:P,dynamicChildren:N,slotScopeIds:F}=m;F&&(R=R?R.concat(F):F),f==null?(i(S,v,T),i(q,v,T),K(m.children||[],v,q,x,E,I,R,A)):P>0&&P&64&&N&&f.dynamicChildren?(X(f.dynamicChildren,N,v,x,E,I,R),(m.key!=null||x&&m===x.subTree)&&traverseStaticChildren(f,m,!0)):V(f,m,v,q,x,E,I,R,A)},de=(f,m,v,T,x,E,I,R,A)=>{m.slotScopeIds=R,f==null?m.shapeFlag&512?x.ctx.activate(m,v,T,I,A):ge(m,v,T,x,E,I,A):we(f,m,A)},ge=(f,m,v,T,x,E,I)=>{const R=f.component=createComponentInstance(f,T,x);if(isKeepAlive(f)&&(R.ctx.renderer=ue),setupComponent(R,!1,I),R.asyncDep){if(x&&x.registerDep(R,G,I),!f.el){const A=R.subTree=createVNode(Comment);_(null,A,m,v)}}else G(R,f,m,v,x,E,I)},we=(f,m,v)=>{const T=m.component=f.component;if(shouldUpdateComponent(f,m,v))if(T.asyncDep&&!T.asyncResolved){Y(T,m,v);return}else T.next=m,T.update();else m.el=f.el,T.vnode=m},G=(f,m,v,T,x,E,I)=>{const R=()=>{if(f.isMounted){let{next:P,bu:N,u:F,parent:B,vnode:W}=f;{const ie=locateNonHydratedAsyncRoot(f);if(ie){P&&(P.el=W.el,Y(f,P,I)),ie.asyncDep.then(()=>{f.isUnmounted||R()});return}}let z=P,Z;toggleRecurse(f,!1),P?(P.el=W.el,Y(f,P,I)):P=W,N&&invokeArrayFns(N),(Z=P.props&&P.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Z,B,P,W),toggleRecurse(f,!0);const Q=renderComponentRoot(f),se=f.subTree;f.subTree=Q,w(se,Q,h(se.el),pe(se),f,x,E),P.el=Q.el,z===null&&updateHOCHostEl(f,Q.el),F&&queuePostRenderEffect(F,x),(Z=P.props&&P.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Z,B,P,W),x)}else{let P;const{el:N,props:F}=m,{bm:B,m:W,parent:z,root:Z,type:Q}=f,se=isAsyncWrapper(m);toggleRecurse(f,!1),B&&invokeArrayFns(B),!se&&(P=F&&F.onVnodeBeforeMount)&&invokeVNodeHook(P,z,m),toggleRecurse(f,!0);{Z.ce&&Z.ce._injectChildStyle(Q);const ie=f.subTree=renderComponentRoot(f);w(null,ie,v,T,f,x,E),m.el=ie.el}if(W&&queuePostRenderEffect(W,x),!se&&(P=F&&F.onVnodeMounted)){const ie=m;queuePostRenderEffect(()=>invokeVNodeHook(P,z,ie),x)}(m.shapeFlag&256||z&&isAsyncWrapper(z.vnode)&&z.vnode.shapeFlag&256)&&f.a&&queuePostRenderEffect(f.a,x),f.isMounted=!0,m=v=T=null}};f.scope.on();const A=f.effect=new ReactiveEffect(R);f.scope.off();const S=f.update=A.run.bind(A),q=f.job=A.runIfDirty.bind(A);q.i=f,q.id=f.uid,A.scheduler=()=>queueJob(q),toggleRecurse(f,!0),S()},Y=(f,m,v)=>{m.component=f;const T=f.vnode.props;f.vnode=m,f.next=null,updateProps(f,m.props,T,v),updateSlots(f,m.children,v),pauseTracking(),flushPreFlushCbs(f),resetTracking()},V=(f,m,v,T,x,E,I,R,A=!1)=>{const S=f&&f.children,q=f?f.shapeFlag:0,P=m.children,{patchFlag:N,shapeFlag:F}=m;if(N>0){if(N&128){fe(S,P,v,T,x,E,I,R,A);return}else if(N&256){ae(S,P,v,T,x,E,I,R,A);return}}F&8?(q&16&&ce(S,x,E),P!==S&&u(v,P)):q&16?F&16?fe(S,P,v,T,x,E,I,R,A):ce(S,x,E,!0):(q&8&&u(v,""),F&16&&K(P,v,T,x,E,I,R,A))},ae=(f,m,v,T,x,E,I,R,A)=>{f=f||EMPTY_ARR,m=m||EMPTY_ARR;const S=f.length,q=m.length,P=Math.min(S,q);let N;for(N=0;N<P;N++){const F=m[N]=A?cloneIfMounted(m[N]):normalizeVNode(m[N]);w(f[N],F,v,null,x,E,I,R,A)}S>q?ce(f,x,E,!0,!1,P):K(m,v,T,x,E,I,R,A,P)},fe=(f,m,v,T,x,E,I,R,A)=>{let S=0;const q=m.length;let P=f.length-1,N=q-1;for(;S<=P&&S<=N;){const F=f[S],B=m[S]=A?cloneIfMounted(m[S]):normalizeVNode(m[S]);if(isSameVNodeType(F,B))w(F,B,v,null,x,E,I,R,A);else break;S++}for(;S<=P&&S<=N;){const F=f[P],B=m[N]=A?cloneIfMounted(m[N]):normalizeVNode(m[N]);if(isSameVNodeType(F,B))w(F,B,v,null,x,E,I,R,A);else break;P--,N--}if(S>P){if(S<=N){const F=N+1,B=F<q?m[F].el:T;for(;S<=N;)w(null,m[S]=A?cloneIfMounted(m[S]):normalizeVNode(m[S]),v,B,x,E,I,R,A),S++}}else if(S>N)for(;S<=P;)te(f[S],x,E,!0),S++;else{const F=S,B=S,W=new Map;for(S=B;S<=N;S++){const ee=m[S]=A?cloneIfMounted(m[S]):normalizeVNode(m[S]);ee.key!=null&&W.set(ee.key,S)}let z,Z=0;const Q=N-B+1;let se=!1,ie=0;const he=new Array(Q);for(S=0;S<Q;S++)he[S]=0;for(S=F;S<=P;S++){const ee=f[S];if(Z>=Q){te(ee,x,E,!0);continue}let ne;if(ee.key!=null)ne=W.get(ee.key);else for(z=B;z<=N;z++)if(he[z-B]===0&&isSameVNodeType(ee,m[z])){ne=z;break}ne===void 0?te(ee,x,E,!0):(he[ne-B]=S+1,ne>=ie?ie=ne:se=!0,w(ee,m[ne],v,null,x,E,I,R,A),Z++)}const _e=se?getSequence(he):EMPTY_ARR;for(z=_e.length-1,S=Q-1;S>=0;S--){const ee=B+S,ne=m[ee],xe=ee+1<q?m[ee+1].el:T;he[S]===0?w(null,ne,v,xe,x,E,I,R,A):se&&(z<0||S!==_e[z]?le(ne,v,xe,2):z--)}}},le=(f,m,v,T,x=null)=>{const{el:E,type:I,transition:R,children:A,shapeFlag:S}=f;if(S&6){le(f.component.subTree,m,v,T);return}if(S&128){f.suspense.move(m,v,T);return}if(S&64){I.move(f,m,v,ue);return}if(I===Fragment){i(E,m,v);for(let P=0;P<A.length;P++)le(A[P],m,v,T);i(f.anchor,m,v);return}if(I===Static){O(f,m,v);return}if(T!==2&&S&1&&R)if(T===0)R.beforeEnter(E),i(E,m,v),queuePostRenderEffect(()=>R.enter(E),x);else{const{leave:P,delayLeave:N,afterLeave:F}=R,B=()=>i(E,m,v),W=()=>{P(E,()=>{B(),F&&F()})};N?N(E,B,W):W()}else i(E,m,v)},te=(f,m,v,T=!1,x=!1)=>{const{type:E,props:I,ref:R,children:A,dynamicChildren:S,shapeFlag:q,patchFlag:P,dirs:N,cacheIndex:F}=f;if(P===-2&&(x=!1),R!=null&&setRef(R,null,v,f,!0),F!=null&&(m.renderCache[F]=void 0),q&256){m.ctx.deactivate(f);return}const B=q&1&&N,W=!isAsyncWrapper(f);let z;if(W&&(z=I&&I.onVnodeBeforeUnmount)&&invokeVNodeHook(z,m,f),q&6)ke(f.component,v,T);else{if(q&128){f.suspense.unmount(v,T);return}B&&invokeDirectiveHook(f,null,m,"beforeUnmount"),q&64?f.type.remove(f,m,v,ue,T):S&&!S.hasOnce&&(E!==Fragment||P>0&&P&64)?ce(S,m,v,!1,!0):(E===Fragment&&P&384||!x&&q&16)&&ce(A,m,v),T&&be(f)}(W&&(z=I&&I.onVnodeUnmounted)||B)&&queuePostRenderEffect(()=>{z&&invokeVNodeHook(z,m,f),B&&invokeDirectiveHook(f,null,m,"unmounted")},v)},be=f=>{const{type:m,el:v,anchor:T,transition:x}=f;if(m===Fragment){Ee(v,T);return}if(m===Static){C(f);return}const E=()=>{n(v),x&&!x.persisted&&x.afterLeave&&x.afterLeave()};if(f.shapeFlag&1&&x&&!x.persisted){const{leave:I,delayLeave:R}=x,A=()=>I(v,E);R?R(f.el,E,A):A()}else E()},Ee=(f,m)=>{let v;for(;f!==m;)v=d(f),n(f),f=v;n(m)},ke=(f,m,v)=>{const{bum:T,scope:x,job:E,subTree:I,um:R,m:A,a:S}=f;invalidateMount(A),invalidateMount(S),T&&invokeArrayFns(T),x.stop(),E&&(E.flags|=8,te(I,f,m,v)),R&&queuePostRenderEffect(R,m),queuePostRenderEffect(()=>{f.isUnmounted=!0},m),m&&m.pendingBranch&&!m.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===m.pendingId&&(m.deps--,m.deps===0&&m.resolve())},ce=(f,m,v,T=!1,x=!1,E=0)=>{for(let I=E;I<f.length;I++)te(f[I],m,v,T,x)},pe=f=>{if(f.shapeFlag&6)return pe(f.component.subTree);if(f.shapeFlag&128)return f.suspense.next();const m=d(f.anchor||f.el),v=m&&m[TeleportEndKey];return v?d(v):m};let ye=!1;const ve=(f,m,v)=>{f==null?m._vnode&&te(m._vnode,null,null,!0):w(m._vnode||null,f,m,null,null,null,v),m._vnode=f,ye||(ye=!0,flushPreFlushCbs(),flushPostFlushCbs(),ye=!1)},ue={p:w,um:te,m:le,r:be,mt:ge,mc:K,pc:V,pbc:X,n:pe,o:s};return{render:ve,hydrate:void 0,createApp:createAppAPI(ve)}}function resolveChildrenNamespace({type:s,props:e},t){return t==="svg"&&s==="foreignObject"||t==="mathml"&&s==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function toggleRecurse({effect:s,job:e},t){t?(s.flags|=32,e.flags|=4):(s.flags&=-33,e.flags&=-5)}function needTransition(s,e){return(!s||s&&!s.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(s,e,t=!1){const i=s.children,n=e.children;if(isArray(i)&&isArray(n))for(let o=0;o<i.length;o++){const r=i[o];let a=n[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[o]=cloneIfMounted(n[o]),a.el=r.el),!t&&a.patchFlag!==-2&&traverseStaticChildren(r,a)),a.type===Text&&(a.el=r.el)}}function getSequence(s){const e=s.slice(),t=[0];let i,n,o,r,a;const l=s.length;for(i=0;i<l;i++){const c=s[i];if(c!==0){if(n=t[t.length-1],s[n]<c){e[i]=n,t.push(i);continue}for(o=0,r=t.length-1;o<r;)a=o+r>>1,s[t[a]]<c?o=a+1:r=a;c<s[t[o]]&&(o>0&&(e[i]=t[o-1]),t[o]=i)}}for(o=t.length,r=t[o-1];o-- >0;)t[o]=r,r=e[r];return t}function locateNonHydratedAsyncRoot(s){const e=s.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}function invalidateMount(s){if(s)for(let e=0;e<s.length;e++)s[e].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watch(s,e,t){return doWatch(s,e,t)}function doWatch(s,e,t=EMPTY_OBJ){const{immediate:i,deep:n,flush:o,once:r}=t,a=extend({},t),l=e&&i||!e&&o!=="post";let c;if(isInSSRComponentSetup){if(o==="sync"){const y=useSSRContext();c=y.__watcherHandles||(y.__watcherHandles=[])}else if(!l){const y=()=>{};return y.stop=NOOP,y.resume=NOOP,y.pause=NOOP,y}}const u=currentInstance;a.call=(y,b,w)=>callWithAsyncErrorHandling(y,u,b,w);let h=!1;o==="post"?a.scheduler=y=>{queuePostRenderEffect(y,u&&u.suspense)}:o!=="sync"&&(h=!0,a.scheduler=(y,b)=>{b?y():queueJob(y)}),a.augmentJob=y=>{e&&(y.flags|=4),h&&(y.flags|=2,u&&(y.id=u.uid,y.i=u))};const d=watch$1(s,e,a);return isInSSRComponentSetup&&(c?c.push(d):l&&d()),d}function instanceWatch(s,e,t){const i=this.proxy,n=isString(s)?s.includes(".")?createPathGetter(i,s):()=>i[s]:s.bind(i,i);let o;isFunction(e)?o=e:(o=e.handler,t=e);const r=setCurrentInstance(this),a=doWatch(n,o.bind(i),t);return r(),a}function createPathGetter(s,e){const t=e.split(".");return()=>{let i=s;for(let n=0;n<t.length&&i;n++)i=i[t[n]];return i}}const getModelModifiers=(s,e)=>e==="modelValue"||e==="model-value"?s.modelModifiers:s[`${e}Modifiers`]||s[`${camelize(e)}Modifiers`]||s[`${hyphenate(e)}Modifiers`];function emit(s,e,...t){if(s.isUnmounted)return;const i=s.vnode.props||EMPTY_OBJ;let n=t;const o=e.startsWith("update:"),r=o&&getModelModifiers(i,e.slice(7));r&&(r.trim&&(n=t.map(u=>isString(u)?u.trim():u)),r.number&&(n=t.map(looseToNumber)));let a,l=i[a=toHandlerKey(e)]||i[a=toHandlerKey(camelize(e))];!l&&o&&(l=i[a=toHandlerKey(hyphenate(e))]),l&&callWithAsyncErrorHandling(l,s,6,n);const c=i[a+"Once"];if(c){if(!s.emitted)s.emitted={};else if(s.emitted[a])return;s.emitted[a]=!0,callWithAsyncErrorHandling(c,s,6,n)}}function normalizeEmitsOptions(s,e,t=!1){const i=e.emitsCache,n=i.get(s);if(n!==void 0)return n;const o=s.emits;let r={},a=!1;if(!isFunction(s)){const l=c=>{const u=normalizeEmitsOptions(c,e,!0);u&&(a=!0,extend(r,u))};!t&&e.mixins.length&&e.mixins.forEach(l),s.extends&&l(s.extends),s.mixins&&s.mixins.forEach(l)}return!o&&!a?(isObject$1(s)&&i.set(s,null),null):(isArray(o)?o.forEach(l=>r[l]=null):extend(r,o),isObject$1(s)&&i.set(s,r),r)}function isEmitListener(s,e){return!s||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(s,e[0].toLowerCase()+e.slice(1))||hasOwn(s,hyphenate(e))||hasOwn(s,e))}function markAttrsAccessed(){}function renderComponentRoot(s){const{type:e,vnode:t,proxy:i,withProxy:n,propsOptions:[o],slots:r,attrs:a,emit:l,render:c,renderCache:u,props:h,data:d,setupState:y,ctx:b,inheritAttrs:w}=s,g=setCurrentRenderingInstance(s);let _,k;try{if(t.shapeFlag&4){const C=n||i,M=C;_=normalizeVNode(c.call(M,C,u,h,y,d,b)),k=a}else{const C=e;_=normalizeVNode(C.length>1?C(h,{attrs:a,slots:r,emit:l}):C(h,null)),k=e.props?a:getFunctionalFallthrough(a)}}catch(C){blockStack.length=0,handleError(C,s,1),_=createVNode(Comment)}let O=_;if(k&&w!==!1){const C=Object.keys(k),{shapeFlag:M}=O;C.length&&M&7&&(o&&C.some(isModelListener)&&(k=filterModelListeners(k,o)),O=cloneVNode(O,k,!1,!0))}return t.dirs&&(O=cloneVNode(O,null,!1,!0),O.dirs=O.dirs?O.dirs.concat(t.dirs):t.dirs),t.transition&&setTransitionHooks(O,t.transition),_=O,setCurrentRenderingInstance(g),_}const getFunctionalFallthrough=s=>{let e;for(const t in s)(t==="class"||t==="style"||isOn(t))&&((e||(e={}))[t]=s[t]);return e},filterModelListeners=(s,e)=>{const t={};for(const i in s)(!isModelListener(i)||!(i.slice(9)in e))&&(t[i]=s[i]);return t};function shouldUpdateComponent(s,e,t){const{props:i,children:n,component:o}=s,{props:r,children:a,patchFlag:l}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?hasPropsChanged(i,r,c):!!r;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(r[d]!==i[d]&&!isEmitListener(c,d))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:i===r?!1:i?r?hasPropsChanged(i,r,c):!0:!!r;return!1}function hasPropsChanged(s,e,t){const i=Object.keys(e);if(i.length!==Object.keys(s).length)return!0;for(let n=0;n<i.length;n++){const o=i[n];if(e[o]!==s[o]&&!isEmitListener(t,o))return!0}return!1}function updateHOCHostEl({vnode:s,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===s&&(i.el=s.el),i===s)(s=e.vnode).el=t,e=e.parent;else break}}const isSuspense=s=>s.__isSuspense;function queueEffectWithSuspense(s,e){e&&e.pendingBranch?isArray(s)?e.effects.push(...s):e.effects.push(s):queuePostFlushCb(s)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(s=!1){blockStack.push(currentBlock=s?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(s,e=!1){isBlockTreeEnabled+=s,s<0&&currentBlock&&e&&(currentBlock.hasOnce=!0)}function setupBlock(s){return s.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(s),s}function createElementBlock(s,e,t,i,n,o){return setupBlock(createBaseVNode(s,e,t,i,n,o,!0))}function createBlock(s,e,t,i,n){return setupBlock(createVNode(s,e,t,i,n,!0))}function isVNode(s){return s?s.__v_isVNode===!0:!1}function isSameVNodeType(s,e){return s.type===e.type&&s.key===e.key}const normalizeKey=({key:s})=>s??null,normalizeRef=({ref:s,ref_key:e,ref_for:t})=>(typeof s=="number"&&(s=""+s),s!=null?isString(s)||isRef(s)||isFunction(s)?{i:currentRenderingInstance,r:s,k:e,f:!!t}:s:null);function createBaseVNode(s,e=null,t=null,i=0,n=null,o=s===Fragment?0:1,r=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:s,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return a?(normalizeChildren(l,t),o&128&&s.normalize(l)):t&&(l.shapeFlag|=isString(t)?8:16),isBlockTreeEnabled>0&&!r&&currentBlock&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&currentBlock.push(l),l}const createVNode=_createVNode;function _createVNode(s,e=null,t=null,i=0,n=null,o=!1){if((!s||s===NULL_DYNAMIC_COMPONENT)&&(s=Comment),isVNode(s)){const a=cloneVNode(s,e,!0);return t&&normalizeChildren(a,t),isBlockTreeEnabled>0&&!o&&currentBlock&&(a.shapeFlag&6?currentBlock[currentBlock.indexOf(s)]=a:currentBlock.push(a)),a.patchFlag=-2,a}if(isClassComponent(s)&&(s=s.__vccOpts),e){e=guardReactiveProps(e);let{class:a,style:l}=e;a&&!isString(a)&&(e.class=normalizeClass(a)),isObject$1(l)&&(isProxy(l)&&!isArray(l)&&(l=extend({},l)),e.style=normalizeStyle(l))}const r=isString(s)?1:isSuspense(s)?128:isTeleport(s)?64:isObject$1(s)?4:isFunction(s)?2:0;return createBaseVNode(s,e,t,i,n,r,o,!0)}function guardReactiveProps(s){return s?isProxy(s)||isInternalObject(s)?extend({},s):s:null}function cloneVNode(s,e,t=!1,i=!1){const{props:n,ref:o,patchFlag:r,children:a,transition:l}=s,c=e?mergeProps(n||{},e):n,u={__v_isVNode:!0,__v_skip:!0,type:s.type,props:c,key:c&&normalizeKey(c),ref:e&&e.ref?t&&o?isArray(o)?o.concat(normalizeRef(e)):[o,normalizeRef(e)]:normalizeRef(e):o,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:a,target:s.target,targetStart:s.targetStart,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:e&&s.type!==Fragment?r===-1?16:r|16:r,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:l,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&cloneVNode(s.ssContent),ssFallback:s.ssFallback&&cloneVNode(s.ssFallback),el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return l&&i&&setTransitionHooks(u,l.clone(u)),u}function createTextVNode(s=" ",e=0){return createVNode(Text,null,s,e)}function normalizeVNode(s){return s==null||typeof s=="boolean"?createVNode(Comment):isArray(s)?createVNode(Fragment,null,s.slice()):isVNode(s)?cloneIfMounted(s):createVNode(Text,null,String(s))}function cloneIfMounted(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:cloneVNode(s)}function normalizeChildren(s,e){let t=0;const{shapeFlag:i}=s;if(e==null)e=null;else if(isArray(e))t=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),normalizeChildren(s,n()),n._c&&(n._d=!0));return}else{t=32;const n=e._;!n&&!isInternalObject(e)?e._ctx=currentRenderingInstance:n===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,s.patchFlag|=1024))}else isFunction(e)?(e={default:e,_ctx:currentRenderingInstance},t=32):(e=String(e),i&64?(t=16,e=[createTextVNode(e)]):t=8);s.children=e,s.shapeFlag|=t}function mergeProps(...s){const e={};for(let t=0;t<s.length;t++){const i=s[t];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=normalizeClass([e.class,i.class]));else if(n==="style")e.style=normalizeStyle([e.style,i.style]);else if(isOn(n)){const o=e[n],r=i[n];r&&o!==r&&!(isArray(o)&&o.includes(r))&&(e[n]=o?[].concat(o,r):r)}else n!==""&&(e[n]=i[n])}return e}function invokeVNodeHook(s,e,t,i=null){callWithAsyncErrorHandling(s,e,7,[t,i])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(s,e,t){const i=s.type,n=(e?e.appContext:s.appContext)||emptyAppContext,o={uid:uid++,vnode:s,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(i,n),emitsOptions:normalizeEmitsOptions(i,n),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:i.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=emit.bind(null,o),s.ce&&s.ce(o),o}let currentInstance=null,internalSetCurrentInstance,setInSSRSetupState;{const s=getGlobalThis(),e=(t,i)=>{let n;return(n=s[t])||(n=s[t]=[]),n.push(i),o=>{n.length>1?n.forEach(r=>r(o)):n[0](o)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",t=>currentInstance=t),setInSSRSetupState=e("__VUE_SSR_SETTERS__",t=>isInSSRComponentSetup=t)}const setCurrentInstance=s=>{const e=currentInstance;return internalSetCurrentInstance(s),s.scope.on(),()=>{s.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(s){return s.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(s,e=!1,t=!1){e&&setInSSRSetupState(e);const{props:i,children:n}=s.vnode,o=isStatefulComponent(s);initProps(s,i,o,e),initSlots(s,n,t);const r=o?setupStatefulComponent(s,e):void 0;return e&&setInSSRSetupState(!1),r}function setupStatefulComponent(s,e){const t=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,PublicInstanceProxyHandlers);const{setup:i}=t;if(i){pauseTracking();const n=s.setupContext=i.length>1?createSetupContext(s):null,o=setCurrentInstance(s),r=callWithErrorHandling(i,s,0,[s.props,n]),a=isPromise(r);if(resetTracking(),o(),(a||s.sp)&&!isAsyncWrapper(s)&&markAsyncBoundary(s),a){if(r.then(unsetCurrentInstance,unsetCurrentInstance),e)return r.then(l=>{handleSetupResult(s,l)}).catch(l=>{handleError(l,s,0)});s.asyncDep=r}else handleSetupResult(s,r)}else finishComponentSetup(s)}function handleSetupResult(s,e,t){isFunction(e)?s.type.__ssrInlineRender?s.ssrRender=e:s.render=e:isObject$1(e)&&(s.setupState=proxyRefs(e)),finishComponentSetup(s)}function finishComponentSetup(s,e,t){const i=s.type;s.render||(s.render=i.render||NOOP);{const n=setCurrentInstance(s);pauseTracking();try{applyOptions(s)}finally{resetTracking(),n()}}}const attrsProxyHandlers={get(s,e){return track(s,"get",""),s[e]}};function createSetupContext(s){const e=t=>{s.exposed=t||{}};return{attrs:new Proxy(s.attrs,attrsProxyHandlers),slots:s.slots,emit:s.emit,expose:e}}function getComponentPublicInstance(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(proxyRefs(markRaw(s.exposed)),{get(e,t){if(t in e)return e[t];if(t in publicPropertiesMap)return publicPropertiesMap[t](s)},has(e,t){return t in e||t in publicPropertiesMap}})):s.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=s=>s.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(s,e=!0){return isFunction(s)?s.displayName||s.name:s.name||e&&s.__name}function formatComponentName(s,e,t=!1){let i=getComponentName(e);if(!i&&e.__file){const n=e.__file.match(/([^/\\]+)\.\w+$/);n&&(i=n[1])}if(!i&&s&&s.parent){const n=o=>{for(const r in o)if(o[r]===e)return r};i=n(s.components||s.parent.type.components)||n(s.appContext.components)}return i?classify(i):t?"App":"Anonymous"}function isClassComponent(s){return isFunction(s)&&"__vccOpts"in s}const computed=(s,e)=>computed$1(s,e,isInSSRComponentSetup),version="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:s=>s})}catch{}const unsafeToTrustedHTML=policy?s=>policy.createHTML(s):s=>s,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(s,e,t)=>{e.insertBefore(s,t||null)},remove:s=>{const e=s.parentNode;e&&e.removeChild(s)},createElement:(s,e,t,i)=>{const n=e==="svg"?doc.createElementNS(svgNS,s):e==="mathml"?doc.createElementNS(mathmlNS,s):t?doc.createElement(s,{is:t}):doc.createElement(s);return s==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:s=>doc.createTextNode(s),createComment:s=>doc.createComment(s),setText:(s,e)=>{s.nodeValue=e},setElementText:(s,e)=>{s.textContent=e},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>doc.querySelector(s),setScopeId(s,e){s.setAttribute(e,"")},insertStaticContent(s,e,t,i,n,o){const r=t?t.previousSibling:e.lastChild;if(n&&(n===o||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),t),!(n===o||!(n=n.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(i==="svg"?`<svg>${s}</svg>`:i==="mathml"?`<math>${s}</math>`:s);const a=templateContainer.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[r?r.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(s,e,t){const i=s[vtcKey];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?s.removeAttribute("class"):t?s.setAttribute("class",e):s.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(s,e,t){const i=s.style,n=isString(t);let o=!1;if(t&&!n){if(e)if(isString(e))for(const r of e.split(";")){const a=r.slice(0,r.indexOf(":")).trim();t[a]==null&&setStyle(i,a,"")}else for(const r in e)t[r]==null&&setStyle(i,r,"");for(const r in t)r==="display"&&(o=!0),setStyle(i,r,t[r])}else if(n){if(e!==t){const r=i[CSS_VAR_TEXT];r&&(t+=";"+r),i.cssText=t,o=displayRE.test(t)}}else e&&s.removeAttribute("style");vShowOriginalDisplay in s&&(s[vShowOriginalDisplay]=o?i.display:"",s[vShowHidden]&&(i.display="none"))}const importantRE=/\s*!important$/;function setStyle(s,e,t){if(isArray(t))t.forEach(i=>setStyle(s,e,i));else if(t==null&&(t=""),e.startsWith("--"))s.setProperty(e,t);else{const i=autoPrefix(s,e);importantRE.test(t)?s.setProperty(hyphenate(i),t.replace(importantRE,""),"important"):s[i]=t}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(s,e){const t=prefixCache[e];if(t)return t;let i=camelize(e);if(i!=="filter"&&i in s)return prefixCache[e]=i;i=capitalize(i);for(let n=0;n<prefixes.length;n++){const o=prefixes[n]+i;if(o in s)return prefixCache[e]=o}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(s,e,t,i,n,o=isSpecialBooleanAttr(e)){i&&e.startsWith("xlink:")?t==null?s.removeAttributeNS(xlinkNS,e.slice(6,e.length)):s.setAttributeNS(xlinkNS,e,t):t==null||o&&!includeBooleanAttr(t)?s.removeAttribute(e):s.setAttribute(e,o?"":isSymbol(t)?String(t):t)}function patchDOMProp(s,e,t,i,n){if(e==="innerHTML"||e==="textContent"){t!=null&&(s[e]=e==="innerHTML"?unsafeToTrustedHTML(t):t);return}const o=s.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?s.getAttribute("value")||"":s.value,l=t==null?s.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in s))&&(s.value=l),t==null&&s.removeAttribute(e),s._value=t;return}let r=!1;if(t===""||t==null){const a=typeof s[e];a==="boolean"?t=includeBooleanAttr(t):t==null&&a==="string"?(t="",r=!0):a==="number"&&(t=0,r=!0)}try{s[e]=t}catch{}r&&s.removeAttribute(n||e)}function addEventListener$1(s,e,t,i){s.addEventListener(e,t,i)}function removeEventListener$1(s,e,t,i){s.removeEventListener(e,t,i)}const veiKey=Symbol("_vei");function patchEvent(s,e,t,i,n=null){const o=s[veiKey]||(s[veiKey]={}),r=o[e];if(i&&r)r.value=i;else{const[a,l]=parseName(e);if(i){const c=o[e]=createInvoker(i,n);addEventListener$1(s,a,c,l)}else r&&(removeEventListener$1(s,a,r,l),o[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(s){let e;if(optionsModifierRE.test(s)){e={};let i;for(;i=s.match(optionsModifierRE);)s=s.slice(0,s.length-i[0].length),e[i[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):hyphenate(s.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(s,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(i,t.value),e,5,[i])};return t.value=s,t.attached=getNow(),t}function patchStopImmediatePropagation(s,e){if(isArray(e)){const t=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{t.call(s),s._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const isNativeOn=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,patchProp=(s,e,t,i,n,o)=>{const r=n==="svg";e==="class"?patchClass(s,i,r):e==="style"?patchStyle(s,t,i):isOn(e)?isModelListener(e)||patchEvent(s,e,t,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(s,e,i,r))?(patchDOMProp(s,e,i),!s.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&patchAttr(s,e,i,r,o,e!=="value")):s._isVueCE&&(/[A-Z]/.test(e)||!isString(i))?patchDOMProp(s,camelize(e),i,o,e):(e==="true-value"?s._trueValue=i:e==="false-value"&&(s._falseValue=i),patchAttr(s,e,i,r))};function shouldSetAsProp(s,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in s&&isNativeOn(e)&&isFunction(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&s.tagName==="INPUT"||e==="type"&&s.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const n=s.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return isNativeOn(e)&&isString(t)?!1:e in s}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...s)=>{const e=ensureRenderer().createApp(...s),{mount:t}=e;return e.mount=i=>{const n=normalizeContainer(i);if(!n)return;const o=e._component;!isFunction(o)&&!o.render&&!o.template&&(o.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const r=t(n,!1,resolveRootNamespace(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),r},e};function resolveRootNamespace(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function normalizeContainer(s){return isString(s)?document.querySelector(s):s}class w2event{constructor(e,t){Object.assign(this,{type:t.type??null,detail:t,owner:e,target:t.target??null,phase:t.phase??"before",object:t.object??null,execute:null,isStopped:!1,isCancelled:!1,onComplete:null,listeners:[]}),delete t.type,delete t.target,delete t.object,this.complete=new Promise((i,n)=>{this._resolve=i,this._reject=n}),this.complete.catch(()=>{})}finish(e){e&&w2utils.extend(this.detail,e),this.phase="after",this.owner.trigger.call(this.owner,this)}done(e){this.listeners.push(e)}preventDefault(){this._reject(),this.isCancelled=!0}stopPropagation(){this.isStopped=!0}}class w2base{constructor(e){if(this.activeEvents=[],this.listeners=[],e!==void 0){if(!w2utils.checkName(e))return;w2ui[e]=this}this.debug=!1}on(e,t){return(e=typeof e=="string"?e.split(/[,\s]+/):[e]).forEach(i=>{var n,o,r,a=typeof i=="string"?i:i.type+":"+i.execute+"."+i.scope;typeof i=="string"&&([o,n]=i.split("."),[o,r]=o.replace(":complete",":after").replace(":done",":after").split(":"),i={type:o,execute:r??"before",scope:n}),(i=w2utils.extend({type:null,execute:"before",onComplete:null},i)).type?t?(Array.isArray(this.listeners)||(this.listeners=[]),this.listeners.push({name:a,edata:i,handler:t}),this.debug&&console.log("w2base: add event",{name:a,edata:i,handler:t})):console.log("ERROR: You must specify event handler function when calling .on() method of "+this.name):console.log("ERROR: You must specify event type when calling .on() method of "+this.name)}),this}off(e,t){return(e=typeof e=="string"?e.split(/[,\s]+/):[e]).forEach(i=>{var n,o,r,a=typeof i=="string"?i:i.type+":"+i.execute+"."+i.scope;if(typeof i=="string"&&([o,n]=i.split("."),[o,r]=o.replace(":complete",":after").replace(":done",":after").split(":"),i={type:o||"*",execute:r||"",scope:n||""}),(i=w2utils.extend({type:null,execute:null,onComplete:null},i)).type||i.scope){t=t||null;let l=0;this.listeners=this.listeners.filter(c=>i.type!=="*"&&i.type!==c.edata.type||i.execute!==""&&i.execute!==c.edata.execute||i.scope!==""&&i.scope!==c.edata.scope||i.handler!=null&&i.handler!==c.edata.handler||(l++,!1)),this.debug&&console.log(`w2base: remove event (${l})`,{name:a,edata:i,handler:t})}else console.log("ERROR: You must specify event type when calling .off() method of "+this.name)}),this}trigger(e,t){if(arguments.length==1?t=e:(t.type=e,t.target=t.target??this),w2utils.isPlainObject(t)&&t.phase=="after"){if(!(t=this.activeEvents.find(r=>r.type==t.type&&r.target==t.target)))return void console.log(`ERROR: Cannot find even handler for "${t.type}" on "${t.target}".`);console.log(`NOTICE: This syntax "edata.trigger({ phase: 'after' })" is outdated. Use edata.finish() instead.`)}else t instanceof w2event||(t=new w2event(this,t),this.activeEvents.push(t));let i,n,o;Array.isArray(this.listeners)||(this.listeners=[]),this.debug&&console.log(`w2base: trigger "${t.type}:${t.phase}"`,t);for(let r=this.listeners.length-1;0<=r;r--){let a=this.listeners[r];if(!(a==null||a.edata.type!==t.type&&a.edata.type!=="*"||a.edata.target!==t.target&&a.edata.target!=null||a.edata.execute!==t.phase&&a.edata.execute!=="*"&&a.edata.phase!=="*")&&(Object.keys(a.edata).forEach(l=>{t[l]==null&&a.edata[l]!=null&&(t[l]=a.edata[l])}),i=[],o=new RegExp(/\((.*?)\)/).exec(String(a.handler).split("=>")[0]),(i=o?o[1].split(/\s*,\s*/):i).length===2?(a.handler.call(this,t.target,t),this.debug&&console.log(" - call (old)",a.handler)):(a.handler.call(this,t),this.debug&&console.log(" - call",a.handler)),t.isStopped===!0||t.stop===!0))return t}if(e="on"+t.type.substr(0,1).toUpperCase()+t.type.substr(1),!(t.phase==="before"&&typeof this[e]=="function"&&(n=this[e],i=[],o=new RegExp(/\((.*?)\)/).exec(String(n).split("=>")[0]),(i=o?o[1].split(/\s*,\s*/):i).length===2?(n.call(this,t.target,t),this.debug&&console.log(" - call: on[Event] (old)",n)):(n.call(this,t),this.debug&&console.log(" - call: on[Event]",n)),t.isStopped===!0||t.stop===!0)||t.object!=null&&t.phase==="before"&&typeof t.object[e]=="function"&&(n=t.object[e],i=[],o=new RegExp(/\((.*?)\)/).exec(String(n).split("=>")[0]),(i=o?o[1].split(/\s*,\s*/):i).length===2?(n.call(this,t.target,t),this.debug&&console.log(" - call: edata.object (old)",n)):(n.call(this,t),this.debug&&console.log(" - call: edata.object",n)),t.isStopped===!0||t.stop===!0)||t.phase!=="after")){typeof t.onComplete=="function"&&t.onComplete.call(this,t);for(let r=0;r<t.listeners.length;r++)typeof t.listeners[r]=="function"&&(t.listeners[r].call(this,t),this.debug)&&console.log(" - call: done",n);t._resolve(t),this.debug&&console.log(`w2base: trigger "${t.type}:${t.phase}"`,t)}return t}}const w2locale={locale:"en-US",dateFormat:"m/d/yyyy",timeFormat:"hh:mi pm",datetimeFormat:"m/d/yyyy|hh:mi pm",currencyPrefix:"$",currencySuffix:"",currencyPrecision:2,groupSymbol:",",decimalSymbol:".",shortmonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fullmonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortdays:["M","T","W","T","F","S","S"],fulldays:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],weekStarts:"S",phrases:{"${count} letters or more...":"---","Add new record":"---","Add New":"---","Advanced Search":"---",after:"---","AJAX error. See console for more details.":"---","All Fields":"---",All:"---",Any:"---","Are you sure you want to delete ${count} ${records}?":"---","Attach files by dragging and dropping or Click to Select":"---",before:"---","begins with":"---",begins:"---",between:"---",buffered:"---",Cancel:"---",Close:"---",Column:"---",Confirmation:"---",contains:"---",Copied:"---","Copy to clipboard":"---","Current Date & Time":"---","Delete selected records":"---",Delete:"---",'Do you want to delete search item "${item}"?':"---","Edit selected record":"---",Edit:"---","Empty list":"---","ends with":"---",ends:"---","Field should be at least ${count} characters.":"---",Hide:"---",in:"---","is not":"---",is:"---","less than":"---","Line #":"---","Load ${count} more...":"---","Loading...":"---","Maximum number of files is ${count}":"---","Maximum total size is ${count}":"---",Modified:"---","more than":"---","Multiple Fields":"---",Name:"---","No items found":"---","No matches":"---",No:"---",none:"---","Not a float":"---","Not a hex number":"---","Not a valid date":"---","Not a valid email":"---","Not alpha-numeric":"---","Not an integer":"---","Not in money format":"---","not in":"---",Notification:"---",of:"---",Ok:"---",Opacity:"---","Record ID":"---",record:"---",records:"---","Refreshing...":"---","Reload data in the list":"---",Remove:"---","Remove This Field":"---","Request aborted.":"---","Required field":"---",Reset:"---","Restore Default State":"---","Returned data is not in valid JSON format.":"---","Save changed records":"---","Save Grid State":"---",Save:"---","Saved Searches":"---","Saving...":"---","Search took ${count} seconds":"---",Search:"---","Select Hour":"---","Select Minute":"---",selected:"---","Server Response ${count} seconds":"---","Show/hide columns":"---",Show:"---",Size:"---",Skip:"---","Sorting took ${count} seconds":"---","Type to search...":"---",Type:"---",Yes:"---",Yesterday:"---","Your remote data source record count has changed, reloading from the first record.":"---"}},U=class U{constructor(e,t,i){this.context=t??document,this.previous=i??null;let n=[];if(Array.isArray(e))n=e;else if(e instanceof Node||e instanceof Window)n=[e];else if(e instanceof U)n=e.nodes;else if(typeof e=="string"){if(typeof this.context.querySelector!="function")throw new Error("Invalid context");n=Array.from(this.context.querySelectorAll(e))}else if(e==null)n=[];else{if(t=Array.from(e??[]),typeof e!="object"||!Array.isArray(t))throw new Error(`Invalid selector "${e}"`);n=t}this.nodes=n,this.length=n.length,this.each((o,r)=>{this[r]=o})}static _fragment(e){let t=document.createElement("template");return t.innerHTML=e,t.content.childNodes.forEach(i=>{var n=U._scriptConvert(i);n!=i&&t.content.replaceChild(n,i)}),t.content}static _scriptConvert(e){let t=i=>{var n=i.ownerDocument.createElement("script"),o=(n.text=i.text,i.attributes);for(let r=0;r<o.length;r++)n.setAttribute(o[r].name,o[r].value);return n};return(e=e.tagName=="SCRIPT"?t(e):e).querySelectorAll&&e.querySelectorAll("script").forEach(i=>{i.parentNode.replaceChild(t(i),i)}),e}static _fixProp(e){var t={cellpadding:"cellPadding",cellspacing:"cellSpacing",class:"className",colspan:"colSpan",contenteditable:"contentEditable",for:"htmlFor",frameborder:"frameBorder",maxlength:"maxLength",readonly:"readOnly",rowspan:"rowSpan",tabindex:"tabIndex",usemap:"useMap"};return t[e]||e}_insert(e,t){let i=[],n=this.length;if(!(n<1)){let o=this;if(typeof t=="string")this.each(r=>{var a=U._fragment(t);i.push(...a.childNodes),r[e](a)});else if(t instanceof U){let r=n==1;t.each(a=>{this.each(l=>{var c=r?a:a.cloneNode(!0);i.push(c),l[e](c),U._scriptConvert(c)})}),r||t.remove()}else{if(!(t instanceof Node))throw new Error(`Incorrect argument for "${e}(html)". It expects one string argument.`);this.each(r=>{var a=n===1?t:U._fragment(t.outerHTML);i.push(...n===1?[t]:a.childNodes),r[e](a)}),1<n&&t.remove()}return o=e=="replaceWith"?new U(i,this.context,this):o}}_save(e,t,i){e._mQuery=e._mQuery??{},Array.isArray(i)?(e._mQuery[t]=e._mQuery[t]??[],e._mQuery[t].push(...i)):i!=null?e._mQuery[t]=i:delete e._mQuery[t]}get(e){var t=this[e=e<0?this.length+e:e];return t||(e!=null?null:this.nodes)}eq(e){let t=[this[e=e<0?this.length+e:e]];return t[0]==null&&(t=[]),new U(t,this.context,this)}then(e){return e=e(this),e??this}find(e){let t=[];return this.each(i=>{i=Array.from(i.querySelectorAll(e)),0<i.length&&t.push(...i)}),new U(t,this.context,this)}filter(e){let t=[];return this.each(i=>{(i===e||typeof e=="string"&&i.matches&&i.matches(e)||typeof e=="function"&&e(i))&&t.push(i)}),new U(t,this.context,this)}next(){let e=[];return this.each(t=>{t=t.nextElementSibling,t&&e.push(t)}),new U(e,this.context,this)}prev(){let e=[];return this.each(t=>{t=t.previousElementSibling,t&&e.push(t)}),new U(e,this.context,this)}shadow(e){let t=[];this.each(n=>{n.shadowRoot&&t.push(n.shadowRoot)});var i=new U(t,this.context,this);return e?i.find(e):i}closest(e){let t=[];return this.each(i=>{i=i.closest(e),i&&t.push(i)}),new U(t,this.context,this)}host(e){let t=[],i=o=>o.parentNode?i(o.parentNode):o,n=o=>{o=i(o),t.push(o.host||o),o.host&&e&&n(o.host)};return this.each(o=>{n(o)}),new U(t,this.context,this)}parent(e){return this.parents(e,!0)}parents(e,t){let i=[],n=r=>{if(i.indexOf(r)==-1&&i.push(r),!t&&r.parentNode)return n(r.parentNode)};this.each(r=>{r.parentNode&&n(r.parentNode)});var o=new U(i,this.context,this);return e?o.filter(e):o}add(e){return e=e instanceof U?e.nodes:Array.isArray(e)?e:[e],new U(this.nodes.concat(e),this.context,this)}each(e){return this.nodes.forEach((t,i)=>{e(t,i,this)}),this}append(e){return this._insert("append",e)}prepend(e){return this._insert("prepend",e)}after(e){return this._insert("after",e)}before(e){return this._insert("before",e)}replace(e){return this._insert("replaceWith",e)}remove(){return this.each(e=>{e.remove()}),this}css(e,t){let i=e;var n,o=arguments.length;return o===0||o===1&&typeof e=="string"?this[0]?(o=this[0].style,typeof e=="string"?(n=o.getPropertyPriority(e),o.getPropertyValue(e)+(n?"!"+n:"")):Object.fromEntries(this[0].style.cssText.split(";").filter(r=>!!r).map(r=>r.split(":").map(a=>a.trim())))):void 0:(typeof e!="object"&&((i={})[e]=t),this.each((r,a)=>{Object.keys(i).forEach(l=>{var c=String(i[l]).toLowerCase().includes("!important")?"important":"";r.style.setProperty(l,String(i[l]).replace(/\!important/i,""),c)})}),this)}addClass(e){return this.toggleClass(e,!0),this}removeClass(e){return this.toggleClass(e,!1),this}toggleClass(e,t){return typeof e=="string"&&(e=e.split(/[,\s]+/)),this.each(i=>{let n=e;(n=n==null&&t===!1?Array.from(i.classList):n).forEach(o=>{if(o!==""){let r=t!=null?t?"add":"remove":"toggle";i.classList[r](o)}})}),this}hasClass(e){if((e=typeof e=="string"?e.split(/[,\s]+/):e)==null&&0<this.length)return Array.from(this[0].classList);let t=!1;return this.each(i=>{t=t||e.every(n=>Array.from(i.classList??[]).includes(n))}),t}on(e,t,i){typeof t=="function"&&(i=t,t=void 0);let n;return t!=null&&t.delegate&&(n=t.delegate,delete t.delegate),(e=e.split(/[,\s]+/)).forEach(o=>{let[r,a]=String(o).toLowerCase().split(".");if(n){let l=i;i=c=>{var u=query(c.target).parents(n);0<u.length?c.delegate=u[0]:c.delegate=c.target,(c.target.matches(n)||0<u.length)&&l(c)}}this.each(l=>{this._save(l,"events",[{event:r,scope:a,callback:i,options:t}]),l.addEventListener(r,i,t)})}),this}off(e,t,i){return typeof t=="function"&&(i=t,t=void 0),(e=(e??"").split(/[,\s]+/)).forEach(n=>{let[o,r]=String(n).toLowerCase().split(".");this.each(a=>{var c;if(Array.isArray((c=a._mQuery)==null?void 0:c.events))for(let u=a._mQuery.events.length-1;0<=u;u--){var l=a._mQuery.events[u];r==null||r===""?l.event!=o&&o!==""||l.callback!=i&&i!=null||(a.removeEventListener(l.event,l.callback,l.options),a._mQuery.events.splice(u,1)):l.event!=o&&o!==""||l.scope!=r||(a.removeEventListener(l.event,l.callback,l.options),a._mQuery.events.splice(u,1))}})}),this}trigger(e,t){let i;return i=e instanceof Event||e instanceof CustomEvent?e:new(["click","dblclick","mousedown","mouseup","mousemove"].includes(e)?MouseEvent:["keydown","keyup","keypress"].includes(e)?KeyboardEvent:Event)(e,t),this.each(n=>{n.dispatchEvent(i)}),this}attr(e,t){if(t===void 0&&typeof e=="string")return this[0]?this[0].getAttribute(e):void 0;{let i={};return typeof e=="object"?i=e:i[e]=t,this.each(n=>{Object.entries(i).forEach(([o,r])=>{n.setAttribute(o,r)})}),this}}removeAttr(){return this.each(e=>{Array.from(arguments).forEach(t=>{e.removeAttribute(t)})}),this}prop(e,t){if(t===void 0&&typeof e=="string")return this[0]?this[0][e]:void 0;{let i={};return typeof e=="object"?i=e:i[e]=t,this.each(n=>{Object.entries(i).forEach(([o,r])=>{o=U._fixProp(o),n[o]=r,o=="innerHTML"&&U._scriptConvert(n)})}),this}}removeProp(){return this.each(e=>{Array.from(arguments).forEach(t=>{delete e[U._fixProp(t)]})}),this}data(e,t){if(e instanceof Object)Object.entries(e).forEach(i=>{this.data(i[0],i[1])});else{if(e&&e.indexOf("-")!=-1&&console.error(`Key "${e}" contains "-" (dash). Dashes are not allowed in property names. Use camelCase instead.`),!(arguments.length<2))return this.each(i=>{t!=null?i.dataset[e]=t instanceof Object?JSON.stringify(t):t:delete i.dataset[e]}),this;if(this[0]){let i=Object.assign({},this[0].dataset);return Object.keys(i).forEach(n=>{if(i[n].startsWith("[")||i[n].startsWith("{"))try{i[n]=JSON.parse(i[n])}catch{}}),e?i[e]:i}}}removeData(e){return typeof e=="string"&&(e=e.split(/[,\s]+/)),this.each(t=>{e.forEach(i=>{delete t.dataset[i]})}),this}show(){return this.toggle(!0)}hide(){return this.toggle(!1)}toggle(e){return this.each(t=>{var a;var i,n=t.style.display,o=getComputedStyle(t).display,r=n=="none"||o=="none";!r||e!=null&&e!==!0||(i=t instanceof HTMLTableRowElement?"table-row":t instanceof HTMLTableCellElement?"table-cell":"block",t.style.display=((a=t._mQuery)==null?void 0:a.prevDisplay)??(n==o&&o!="none"?"":i),this._save(t,"prevDisplay",null)),r||e!=null&&e!==!1||(o!="none"&&this._save(t,"prevDisplay",o),t.style.setProperty("display","none"))})}empty(){return this.html("")}html(e){return this.prop("innerHTML",e)}text(e){return this.prop("textContent",e)}val(e){return this.prop("value",e)}change(){return this.trigger("change")}click(){return this.trigger("click")}};me(U,"version",.7);let Query=U,query=function(s,e){if(typeof s!="function")return new Query(s,e);document.readyState=="complete"?s():window.addEventListener("load",s)},w2ui=(query.html=s=>(s=Query._fragment(s),query(s.children,s)),query.version=Query.version,{});class Utils{constructor(){this.version="2.0.x",this.tmp={},this.settings=this.extend({},{dataType:"HTTPJSON",dateStartYear:1950,dateEndYear:2030,macButtonOrder:!1,warnNoPhrase:!1},w2locale,{phrases:null}),this.i18nCompare=Intl.Collator().compare,this.hasLocalStorage=function(){var e="w2ui_test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch{return!1}}(),this.isMac=/Mac/i.test(navigator.platform),this.isMobile=/(iphone|ipod|ipad|mobile|android)/i.test(navigator.userAgent),this.isIOS=/(iphone|ipod|ipad)/i.test(navigator.platform),this.isAndroid=/(android)/i.test(navigator.userAgent),this.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),this.formatters={number(e,t){return 20<parseInt(t)&&(t=20),parseInt(t)<0&&(t=0),e==null||e===""?"":w2utils.formatNumber(parseFloat(e),t,!0)},float(e,t){return w2utils.formatters.number(e,t)},int(e,t){return w2utils.formatters.number(e,0)},money(e,t){return e==null||e===""?"":(e=w2utils.formatNumber(Number(e),w2utils.settings.currencyPrecision),(w2utils.settings.currencyPrefix||"")+e+(w2utils.settings.currencySuffix||""))},currency(e,t){return w2utils.formatters.money(e,t)},percent(e,t){return e==null||e===""?"":w2utils.formatNumber(e,t||1)+"%"},size(e,t){return e==null||e===""?"":w2utils.formatSize(parseInt(e))},date(e,t){if(t===""&&(t=w2utils.settings.dateFormat),e==null||e===0||e==="")return"";let i=w2utils.isDateTime(e,t,!0);return'<span title="'+(i=i===!1?w2utils.isDate(e,t,!0):i)+'">'+w2utils.formatDate(i,t)+"</span>"},datetime(e,t){if(t===""&&(t=w2utils.settings.datetimeFormat),e==null||e===0||e==="")return"";let i=w2utils.isDateTime(e,t,!0);return'<span title="'+(i=i===!1?w2utils.isDate(e,t,!0):i)+'">'+w2utils.formatDateTime(i,t)+"</span>"},time(e,t){if(t===""&&(t=w2utils.settings.timeFormat),e==null||e===0||e==="")return"";let i=w2utils.isDateTime(e,t=(t=t==="h12"?"hh:mi pm":t)==="h24"?"h24:mi":t,!0);return'<span title="'+(i=i===!1?w2utils.isDate(e,t,!0):i)+'">'+w2utils.formatTime(e,t)+"</span>"},timestamp(e,t){if(t===""&&(t=w2utils.settings.datetimeFormat),e==null||e===0||e==="")return"";let i=w2utils.isDateTime(e,t,!0);return(i=i===!1?w2utils.isDate(e,t,!0):i).toString?i.toString():""},gmt(e,t){if(t===""&&(t=w2utils.settings.datetimeFormat),e==null||e===0||e==="")return"";let i=w2utils.isDateTime(e,t,!0);return(i=i===!1?w2utils.isDate(e,t,!0):i).toUTCString?i.toUTCString():""},age(e,t){if(e==null||e===0||e==="")return"";let i=w2utils.isDateTime(e,null,!0);return'<span title="'+(i=i===!1?w2utils.isDate(e,null,!0):i)+'">'+w2utils.age(e)+(t?" "+t:"")+"</span>"},interval(e,t){return e==null||e===0||e===""?"":w2utils.interval(e)+(t?" "+t:"")},toggle(e,t){return e?"Yes":""},password(e,t){let i="";for(let n=0;n<e.length;n++)i+="*";return i}}}isBin(e){return/^[0-1]+$/.test(e)}isInt(e){return/^[-+]?[0-9]+$/.test(e)}isFloat(e){return(typeof(e=typeof e=="string"?e.replace(this.settings.groupSymbol,"").replace(this.settings.decimalSymbol,"."):e)=="number"||typeof e=="string"&&e!=="")&&!isNaN(Number(e))}isMoney(e){var t,i;return typeof e!="object"&&e!==""&&(!!this.isFloat(e)||(t=this.settings,i=new RegExp("^"+(t.currencyPrefix?"\\"+t.currencyPrefix+"?":"")+"[-+]?"+(t.currencyPrefix?"\\"+t.currencyPrefix+"?":"")+"[0-9]*[\\"+t.decimalSymbol+"]?[0-9]+"+(t.currencySuffix?"\\"+t.currencySuffix+"?":"")+"$","i"),typeof e=="string"&&(e=e.replace(new RegExp(t.groupSymbol,"g"),"")),i.test(e)))}isHex(e){return/^(0x)?[0-9a-fA-F]+$/.test(e)}isAlphaNumeric(e){return/^[a-zA-Z0-9_-]+$/.test(e)}isEmail(e){return/^[a-zA-Z0-9._%\-+]+@[--a-zA-Z0-9.-]+\.[--a-zA-Z]+$/.test(e)}isIpAddress(e){return new RegExp("^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?).){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$").test(e)}isDate(e,t,i){if(!e)return!1;var n="Invalid Date";let o,r,a;if(t==null&&(t=this.settings.dateFormat),typeof e.getFullYear=="function")a=e.getFullYear(),o=e.getMonth()+1,r=e.getDate();else if(parseInt(e)==e&&0<parseInt(e))e=new Date(parseInt(e)),a=e.getFullYear(),o=e.getMonth()+1,r=e.getDate();else{if(e=String(e),new RegExp("mon","ig").test(t)){t=t.replace(/month/gi,"m").replace(/mon/gi,"m").replace(/dd/gi,"d").replace(/[, ]/gi,"/").replace(/\/\//g,"/").toLowerCase(),e=e.replace(/[, ]/gi,"/").replace(/\/\//g,"/").toLowerCase();for(let h=0,d=this.settings.fullmonths.length;h<d;h++){var l=this.settings.fullmonths[h];e=e.replace(new RegExp(l,"ig"),parseInt(h)+1).replace(new RegExp(l.substr(0,3),"ig"),parseInt(h)+1)}}var c=e.replace(/-/g,"/").replace(/\./g,"/").toLowerCase().split("/"),t=t.replace(/-/g,"/").replace(/\./g,"/").toLowerCase();t==="mm/dd/yyyy"&&(o=c[0],r=c[1],a=c[2]),t==="m/d/yyyy"&&(o=c[0],r=c[1],a=c[2]),t==="dd/mm/yyyy"&&(o=c[1],r=c[0],a=c[2]),t==="d/m/yyyy"&&(o=c[1],r=c[0],a=c[2]),t==="yyyy/dd/mm"&&(o=c[2],r=c[1],a=c[0]),t==="yyyy/d/m"&&(o=c[2],r=c[1],a=c[0]),t==="yyyy/mm/dd"&&(o=c[1],r=c[2],a=c[0]),t==="yyyy/m/d"&&(o=c[1],r=c[2],a=c[0]),t==="mm/dd/yy"&&(o=c[0],r=c[1],a=c[2]),t==="m/d/yy"&&(o=c[0],r=c[1],a=parseInt(c[2])+1900),t==="dd/mm/yy"&&(o=c[1],r=c[0],a=parseInt(c[2])+1900),t==="d/m/yy"&&(o=c[1],r=c[0],a=parseInt(c[2])+1900),t==="yy/dd/mm"&&(o=c[2],r=c[1],a=parseInt(c[0])+1900),t==="yy/d/m"&&(o=c[2],r=c[1],a=parseInt(c[0])+1900),t==="yy/mm/dd"&&(o=c[1],r=c[2],a=parseInt(c[0])+1900),t==="yy/m/d"&&(o=c[1],r=c[2],a=parseInt(c[0])+1900)}return!!this.isInt(a)&&!!this.isInt(o)&&!!this.isInt(r)&&(a=+a,o=+o,r=+r,(n=new Date(a,o-1,r)).setFullYear(a),o!=null)&&String(n)!=="Invalid Date"&&n.getMonth()+1===o&&n.getDate()===r&&n.getFullYear()===a&&(i!==!0||n)}isTime(a,t){if(a==null)return!1;let i,n,o;n=0<=(a=(a=String(a)).toUpperCase()).indexOf("AM");var r=(o=0<=a.indexOf("PM"))||n,a=(i=r?12:24,(a=a.replace("AM","").replace("PM","").trim()).split(":"));let l=parseInt(a[0]||0),c=parseInt(a[1]||0),u=parseInt(a[2]||0);return(r&&a.length===1||a.length===2||a.length===3)&&!(a[0]===""||l<0||l>i||!this.isInt(a[0])||2<a[0].length||1<a.length&&(a[1]===""||c<0||59<c||!this.isInt(a[1])||a[1].length!==2)||2<a.length&&(a[2]===""||u<0||59<u||!this.isInt(a[2])||a[2].length!==2)||!(r||i!==l||c===0&&u===0)||r&&a.length===1&&l===0)&&(t!==!0||(o&&l!==12&&(l+=12),n&&l===12&&(l+=12),{hours:l,minutes:c,seconds:u}))}isDateTime(e,t,i){var n;return typeof e.getFullYear=="function"?i!==!0||e:(n=parseInt(e))===e?!(n<0)&&(i!==!0||new Date(n)):(n=String(e).indexOf(" "))<0?!(String(e).indexOf("T")<0||String(new Date(e))=="Invalid Date")&&(i!==!0||new Date(e)):(t=(t=t??this.settings.datetimeFormat).split("|"),e=[e.substr(0,n),e.substr(n).trim()],t[0]=t[0].trim(),t[1]&&(t[1]=t[1].trim()),n=this.isDate(e[0],t[0],!0),t=this.isTime(e[1],!0),n!==!1&&t!==!1&&(i!==!0||(n.setHours(t.hours),n.setMinutes(t.minutes),n.setSeconds(t.seconds),n)))}age(e){let t;if(e===""||e==null||(t=typeof e.getFullYear=="function"?e:parseInt(e)==e&&0<parseInt(e)?new Date(parseInt(e)):new Date(e),String(t)==="Invalid Date"))return"";e=(new Date().getTime()-t.getTime())/1e3;let i="",n="";return e<0?(i=0,n="sec"):e<60?(i=Math.floor(e),n="sec",e<0&&(i=0,n="sec")):e<3600?(i=Math.floor(e/60),n="min"):e<86400?(i=Math.floor(e/60/60),n="hour"):e<2592e3?(i=Math.floor(e/24/60/60),n="day"):e<31536e3?(i=Math.floor(e/30/24/60/60*10)/10,n="month"):e<126144e3?(i=Math.floor(e/365/24/60/60*10)/10,n="year"):126144e3<=e&&(i=Math.floor(e/365.25/24/60/60*10)/10,n="year"),i+" "+n+(1<i?"s":"")}interval(e){return e<100?"< 0.01 sec":e<1e3?Math.floor(e/10)/100+" sec":e<1e4?Math.floor(e/100)/10+" sec":e<6e4?Math.floor(e/1e3)+" secs":e<36e5?Math.floor(e/6e4)+" mins":e<864e5?Math.floor(e/36e5*10)/10+" hours":e<2628e6?Math.floor(e/864e5*10)/10+" days":e<31536e6?Math.floor(e/2628e6*10)/10+" months":Math.floor(e/31536e5)/10+" years"}date(o){if(o===""||o==null||typeof o=="object"&&!o.getMonth)return"";let t=new Date(o);if(this.isInt(o)&&(t=new Date(Number(o))),String(t)==="Invalid Date")return"";var o=this.settings.shortmonths,n=new Date,r=new Date,i=(r.setTime(r.getTime()-864e5),o[t.getMonth()]+" "+t.getDate()+", "+t.getFullYear()),n=o[n.getMonth()]+" "+n.getDate()+", "+n.getFullYear(),o=o[r.getMonth()]+" "+r.getDate()+", "+r.getFullYear(),r=t.getHours()-(12<t.getHours()?12:0)+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+" "+(12<=t.getHours()?"pm":"am");let a=i==n?r:i;return'<span title="'+i+" "+(t.getHours()-(12<t.getHours()?12:0)+":"+(t.getMinutes()<10?"0":"")+t.getMinutes()+":"+(t.getSeconds()<10?"0":"")+t.getSeconds()+" "+(12<=t.getHours()?"pm":"am"))+'">'+(a=i==o?this.lang("Yesterday"):a)+"</span>"}formatSize(e){var t;return this.isFloat(e)&&e!==""?(e=parseFloat(e))===0?0:(t=parseInt(Math.floor(Math.log(e)/Math.log(1024))),(Math.floor(e/Math.pow(1024,t)*10)/10).toFixed(t===0?0:1)+" "+(["Bt","KB","MB","GB","TB","PB","EB","ZB"][t]||"??")):""}formatNumber(e,t,i){return e==null||e===""||typeof e=="object"?"":(i={minimumFractionDigits:parseInt(t),maximumFractionDigits:parseInt(t),useGrouping:!!i},(t==null||t<0)&&(i.minimumFractionDigits=0,i.maximumFractionDigits=20),parseFloat(e).toLocaleString(this.settings.locale,i))}formatDate(e,t){if(t=t||this.settings.dateFormat,e===""||e==null||typeof e=="object"&&!e.getMonth)return"";let i=new Date(e);var n,o;return this.isInt(e)&&(i=new Date(Number(e))),String(i)==="Invalid Date"?"":(e=i.getFullYear(),n=i.getMonth(),o=i.getDate(),t.toLowerCase().replace("month",this.settings.fullmonths[n]).replace("mon",this.settings.shortmonths[n]).replace(/yyyy/g,("000"+e).slice(-4)).replace(/yyy/g,("000"+e).slice(-4)).replace(/yy/g,("0"+e).slice(-2)).replace(/(^|[^a-z$])y/g,"$1"+e).replace(/mm/g,("0"+(n+1)).slice(-2)).replace(/dd/g,("0"+o).slice(-2)).replace(/th/g,o==1?"st":"th").replace(/th/g,o==2?"nd":"th").replace(/th/g,o==3?"rd":"th").replace(/(^|[^a-z$])m/g,"$1"+(n+1)).replace(/(^|[^a-z$])d/g,"$1"+o))}formatTime(e,t){if(t=t||this.settings.timeFormat,e===""||e==null||typeof e=="object"&&!e.getMonth)return"";let i=new Date(e);if(this.isInt(e)&&(i=new Date(Number(e))),this.isTime(e)&&(e=this.isTime(e,!0),(i=new Date).setHours(e.hours),i.setMinutes(e.minutes)),String(i)==="Invalid Date")return"";let n="am",o=i.getHours();e=i.getHours();let r=i.getMinutes(),a=i.getSeconds();return r<10&&(r="0"+r),a<10&&(a="0"+a),t.indexOf("am")===-1&&t.indexOf("pm")===-1||(12<=o&&(n="pm"),12<o&&(o-=12),o===0&&(o=12)),t.toLowerCase().replace("am",n).replace("pm",n).replace("hhh",o<10?"0"+o:o).replace("hh24",e<10?"0"+e:e).replace("h24",e).replace("hh",o).replace("mm",r).replace("mi",r).replace("ss",a).replace(/(^|[^a-z$])h/g,"$1"+o).replace(/(^|[^a-z$])m/g,"$1"+r).replace(/(^|[^a-z$])s/g,"$1"+a)}formatDateTime(e,t){let i;return e===""||e==null||typeof e=="object"&&!e.getMonth?"":(typeof t!="string"?i=[this.settings.dateFormat,this.settings.timeFormat]:((i=t.split("|"))[0]=i[0].trim(),i[1]=1<i.length?i[1].trim():this.settings.timeFormat),i[1]==="h12"&&(i[1]="h:m pm"),i[1]==="h24"&&(i[1]="h24:m"),this.formatDate(e,i[0])+" "+this.formatTime(e,i[1]))}stripSpaces(e){if(e!=null)switch(typeof e){case"number":break;case"string":e=String(e).replace(/(?:\r\n|\r|\n)/g," ").replace(/\s\s+/g," ").trim();break;case"object":Array.isArray(e)?(e=this.extend([],e)).forEach((t,i)=>{e[i]=this.stripSpaces(t)}):(e=this.extend({},e),Object.keys(e).forEach(t=>{e[t]=this.stripSpaces(e[t])}))}return e}stripTags(e){if(e!=null)switch(typeof e){case"number":break;case"string":e=String(e).replace(/<(?:[^>=]|='[^']*'|="[^"]*"|=[^'"][^\s>]*)*>/gi,"");break;case"object":Array.isArray(e)?(e=this.extend([],e)).forEach((t,i)=>{e[i]=this.stripTags(t)}):(e=this.extend({},e),Object.keys(e).forEach(t=>{e[t]=this.stripTags(e[t])}))}return e}encodeTags(e){if(e!=null)switch(typeof e){case"number":break;case"string":e=String(e).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;");break;case"object":Array.isArray(e)?(e=this.extend([],e)).forEach((t,i)=>{e[i]=this.encodeTags(t)}):(e=this.extend({},e),Object.keys(e).forEach(t=>{e[t]=this.encodeTags(e[t])}))}return e}decodeTags(e){if(e!=null)switch(typeof e){case"number":break;case"string":e=String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&");break;case"object":Array.isArray(e)?(e=this.extend([],e)).forEach((t,i)=>{e[i]=this.decodeTags(t)}):(e=this.extend({},e),Object.keys(e).forEach(t=>{e[t]=this.decodeTags(e[t])}))}return e}escapeId(e){return e===""||e==null?"":(e+"").replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,(t,i)=>i?t==="\0"?"":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t)}unescapeId(e){return e===""||e==null?"":e.replace(/\\[\da-fA-F]{1,6}[\x20\t\r\n\f]?|\\([^\r\n\f])/g,(t,i)=>(t="0x"+t.slice(1)-65536,i||(t<0?String.fromCharCode(65536+t):String.fromCharCode(t>>10|55296,1023&t|56320))))}base64encode(e){return btoa(e)}base64decode(e){return atob(e)}async sha256(e){return e=new TextEncoder().encode(e),crypto.subtle.digest("SHA-256",e).then(t=>Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join(""))}transition(e,t,i,n){return new Promise((o,r)=>{var a=getComputedStyle(e);let l=parseInt(a.width),c=parseInt(a.height);if(e&&t){switch(e.parentNode.style.cssText+="perspective: 900px; overflow: hidden;",e.style.cssText+="; position: absolute; z-index: 1019; backface-visibility: hidden",t.style.cssText+="; position: absolute; z-index: 1020; backface-visibility: hidden",i){case"slide-left":e.style.cssText+="overflow: hidden; transform: translate3d(0, 0, 0)",t.style.cssText+="overflow: hidden; transform: translate3d("+l+"px, 0, 0)",query(t).show(),setTimeout(()=>{t.style.cssText+="transition: 0.5s; transform: translate3d(0, 0, 0)",e.style.cssText+="transition: 0.5s; transform: translate3d(-"+l+"px, 0, 0)"},1);break;case"slide-right":e.style.cssText+="overflow: hidden; transform: translate3d(0, 0, 0)",t.style.cssText+="overflow: hidden; transform: translate3d(-"+l+"px, 0, 0)",query(t).show(),setTimeout(()=>{t.style.cssText+="transition: 0.5s; transform: translate3d(0px, 0, 0)",e.style.cssText+="transition: 0.5s; transform: translate3d("+l+"px, 0, 0)"},1);break;case"slide-down":e.style.cssText+="overflow: hidden; z-index: 1; transform: translate3d(0, 0, 0)",t.style.cssText+="overflow: hidden; z-index: 0; transform: translate3d(0, 0, 0)",query(t).show(),setTimeout(()=>{t.style.cssText+="transition: 0.5s; transform: translate3d(0, 0, 0)",e.style.cssText+="transition: 0.5s; transform: translate3d(0, "+c+"px, 0)"},1);break;case"slide-up":e.style.cssText+="overflow: hidden; transform: translate3d(0, 0, 0)",t.style.cssText+="overflow: hidden; transform: translate3d(0, "+c+"px, 0)",query(t).show(),setTimeout(()=>{t.style.cssText+="transition: 0.5s; transform: translate3d(0, 0, 0)",e.style.cssText+="transition: 0.5s; transform: translate3d(0, 0, 0)"},1);break;case"flip-left":e.style.cssText+="overflow: hidden; transform: rotateY(0deg)",t.style.cssText+="overflow: hidden; transform: rotateY(-180deg)",query(t).show(),setTimeout(()=>{t.style.cssText+="transition: 0.5s; transform: rotateY(0deg)",e.style.cssText+="transition: 0.5s; transform: rotateY(180deg)"},1);break;case"flip-right":e.style.cssText+="overflow: hidden; transform: rotateY(0deg)",t.style.cssText+="overflow: hidden; transform: rotateY(180deg)",query(t).show(),setTimeout(()=>{t.style.cssText+="transition: 0.5s; transform: rotateY(0deg)",e.style.cssText+="transition: 0.5s; transform: rotateY(-180deg)"},1);break;case"flip-down":e.style.cssText+="overflow: hidden; transform: rotateX(0deg)",t.style.cssText+="overflow: hidden; transform: rotateX(180deg)",query(t).show(),setTimeout(()=>{t.style.cssText+="transition: 0.5s; transform: rotateX(0deg)",e.style.cssText+="transition: 0.5s; transform: rotateX(-180deg)"},1);break;case"flip-up":e.style.cssText+="overflow: hidden; transform: rotateX(0deg)",t.style.cssText+="overflow: hidden; transform: rotateX(-180deg)",query(t).show(),setTimeout(()=>{t.style.cssText+="transition: 0.5s; transform: rotateX(0deg)",e.style.cssText+="transition: 0.5s; transform: rotateX(180deg)"},1);break;case"pop-in":e.style.cssText+="overflow: hidden; transform: translate3d(0, 0, 0)",t.style.cssText+="overflow: hidden; transform: translate3d(0, 0, 0); transform: scale(.8); opacity: 0;",query(t).show(),setTimeout(()=>{t.style.cssText+="transition: 0.5s; transform: scale(1); opacity: 1;",e.style.cssText+="transition: 0.5s;"},1);break;case"pop-out":e.style.cssText+="overflow: hidden; transform: translate3d(0, 0, 0); transform: scale(1); opacity: 1;",t.style.cssText+="overflow: hidden; transform: translate3d(0, 0, 0); opacity: 0;",query(t).show(),setTimeout(()=>{t.style.cssText+="transition: 0.5s; opacity: 1;",e.style.cssText+="transition: 0.5s; transform: scale(1.7); opacity: 0;"},1);break;default:e.style.cssText+="overflow: hidden; transform: translate3d(0, 0, 0)",t.style.cssText+="overflow: hidden; translate3d(0, 0, 0); opacity: 0;",query(t).show(),setTimeout(()=>{t.style.cssText+="transition: 0.5s; opacity: 1;",e.style.cssText+="transition: 0.5s"},1)}setTimeout(()=>{i==="slide-down"&&(query(e).css("z-index","1019"),query(t).css("z-index","1020")),t&&query(t).css({opacity:"1"}).css({transition:"",transform:""}),e&&query(e).css({opacity:"1"}).css({transition:"",transform:""}),typeof n=="function"&&n(),o()},500)}else console.log("ERROR: Cannot do transition when one of the divs is null")})}lock(e,t={}){if(e!=null){typeof t=="string"&&(t={msg:t}),arguments[2]&&(t.spinner=arguments[2]),t=this.extend({spinner:!1},t),(e==null?void 0:e[0])instanceof Node&&(e=Array.isArray(e)?e:e.get()),t.msg||t.msg===0||(t.msg=""),this.unlock(e);var i=query(e).get(0);let n=i.scrollWidth,o=i.scrollHeight,r=(i.tagName=="BODY"&&(n<innerWidth&&(n=innerWidth),o<innerHeight)&&(o=innerHeight),query(e).prepend(`<div class="w2ui-lock" style="height: ${o}px; width: ${n}px"></div><div class="w2ui-lock-msg"></div>`),query(e).find(".w2ui-lock"));i=query(e).find(".w2ui-lock-msg"),e=(t.msg||i.css({"background-color":"transparent","background-image":"none",border:"0px","box-shadow":"none"}),t.spinner===!0&&(t.msg=`<div class="w2ui-spinner" ${t.msg?"":'style="width: 35px; height: 35px"'}></div>`+t.msg),t.msg?i.html(t.msg).css("display","block"):i.remove(),t.opacity!=null&&r.css("opacity",t.opacity),r.css({display:"block"}),t.bgColor&&r.css({"background-color":t.bgColor}),getComputedStyle(r.get(0)));let a=e.opacity??.15;r.on("mousedown",function(){typeof t.onClick=="function"?t.onClick():r.css({transition:".2s",opacity:1.5*a})}).on("mouseup",function(){typeof t.onClick!="function"&&r.css({transition:".2s",opacity:a})}).on("mousewheel",function(l){l&&(l.stopPropagation(),l.preventDefault())})}}unlock(e,t){var i;e!=null&&(clearTimeout(e._prevUnlock),(e==null?void 0:e[0])instanceof Node&&(e=Array.isArray(e)?e:e.get()),this.isInt(t)&&0<t?(query(e).find(".w2ui-lock").css({transition:t/1e3+"s",opacity:0}),i=query(e).get(0),clearTimeout(i._prevUnlock),i._prevUnlock=setTimeout(()=>{query(e).find(".w2ui-lock").remove()},t)):query(e).find(".w2ui-lock").remove(),query(e).find(".w2ui-lock-msg").remove())}message(e,t){var b,w;let i,n,o;var r=()=>{var _;var g=query(e==null?void 0:e.box).find(".w2ui-message");g.length!=0&&typeof((_=t=g.get(0)._msg_options||{})==null?void 0:_.close)=="function"&&t.close()};let a=g=>{var O,C;var _,k=g.box._msg_prevFocus;query(e.box).find(".w2ui-message").length<=1?e.owner?e.owner.unlock(e.param,150):this.unlock(e.box,150):query(e.box).find(`#w2ui-message-${(O=e.owner)==null?void 0:O.name}-`+(g.msgIndex-1)).css("z-index",1500),k?0<(_=query(k).closest(".w2ui-message")).length?_.get(0)._msg_options.setFocus(k):k.focus():typeof((C=e.owner)==null?void 0:C.focus)=="function"&&e.owner.focus(),query(g.box).remove(),g.msgIndex===0&&(y.css("z-index",g.tmp.zIndex),query(e.box).css("overflow",g.tmp.overflow)),g.trigger&&o.finish()};if(typeof(t=typeof t!="string"&&typeof t!="number"?t:{width:String(t).length<300?350:550,height:String(t).length<300?170:250,text:String(t)})!="object")return void r();t.text!=null&&(t.body=`<div class="w2ui-centered w2ui-msg-text">${t.text}</div>`),t.width==null&&(t.width=350),t.height==null&&(t.height=170),t.hideOn==null&&(t.hideOn=["esc"]),t.on==null&&(u=t,t=new w2base,w2utils.extend(t,u)),t.on("open",g=>{w2utils.bindEvents(query(t.box).find(".w2ui-eaction"),t),query(g.detail.box).find("button, input, textarea, [name=hidden-first]").off(".message").on("keydown.message",function(_){_.keyCode==27&&t.hideOn.includes("esc")&&(t.cancelAction?t.action(t.cancelAction):t.close())}),setTimeout(()=>t.setFocus(t.focus),300)}),t.off(".prom");let l={self:t,action(g){return t.on("action.prom",g),l},close(g){return t.on("close.prom",g),l},open(g){return t.on("open.prom",g),l},then(g){return t.on("open:after.prom",g),l}},c=(t.actions==null&&t.buttons==null&&t.html==null&&(t.actions={Ok(g){g.detail.self.close()}}),t.off(".buttons"),t.actions!=null&&(t.buttons="",Object.keys(t.actions).forEach(g=>{var _=t.actions[g];let k=g;typeof _=="function"&&(t.buttons+=`<button class="w2ui-btn w2ui-eaction" data-click='["action","${g}","event"]' name="${g}">${g}</button>`),typeof _=="object"&&(t.buttons+=`<button class="w2ui-btn w2ui-eaction ${_.class||""}" name="${g}" data-click='["action","${g}","event"]'
                        style="${_.style??""}" ${_.attrs??""}>${_.text||g}</button>`,k=Array.isArray(t.actions)?_.text:g),typeof _=="string"&&(t.buttons+=`<button class="w2ui-btn w2ui-eaction" name="${_}" data-click='["action","${_}","event"]'>${_}</button>`,k=_),typeof k=="string"&&(k=k[0].toLowerCase()+k.substr(1).replace(/\s+/g,"")),l[k]=function(O){return t.on("action.buttons",C=>{C.detail.action[0].toLowerCase()+C.detail.action.substr(1).replace(/\s+/g,"")==k&&O(C)}),l}})),Array("html","body","buttons").forEach(g=>{t[g]=String(t[g]??"").trim()}),t.body===""&&t.buttons===""||(t.html=`
                <div class="w2ui-message-body">${t.body||""}</div>
                <div class="w2ui-message-buttons">${t.buttons||""}</div>
            `),getComputedStyle(query(e.box).get(0)));var u=parseFloat(c.width),h=parseFloat(c.height);let d=0,y=(0<query(e.after).length&&(c=getComputedStyle(query(e.after).get(0)),d=parseInt(c.display!="none"?parseInt(c.height):0)),t.width>u&&(t.width=u-10),t.height>h-d&&(t.height=h-10-d),t.originalWidth=t.width,t.originalHeight=t.height,parseInt(t.width)<0&&(t.width=u+t.width),parseInt(t.width)<10&&(t.width=10),parseInt(t.height)<0&&(t.height=h+t.height-d),parseInt(t.height)<10&&(t.height=10),t.originalHeight<0&&(t.height=h+t.originalHeight-d),t.originalWidth<0&&(t.width=u+2*t.originalWidth),query(e.box).find(e.after));return t.tmp||(t.tmp={zIndex:y.css("z-index"),overflow:c.overflow}),t.html===""&&t.body===""&&t.buttons===""?r():(t.msgIndex=query(e.box).find(".w2ui-message").length,t.msgIndex===0&&typeof this.lock=="function"&&(query(e.box).css("overflow","hidden"),e.owner?e.owner.lock(e.param):this.lock(e.box)),query(e.box).find(".w2ui-message").css("z-index",1390),y.css("z-index",1501),h=`
                <div id="w2ui-message-${(b=e.owner)==null?void 0:b.name}-${t.msgIndex}" class="w2ui-message" data-mousedown="stop"
                    style="z-index: 1500; left: ${(u-t.width)/2}px; top: ${d}px;
                        width: ${t.width}px; height: ${t.height}px; transform: translateY(-${t.height}px)"
                    ${t.hideOn.includes("click")?e.param?`data-click='["message", "${e.param}"]`:'data-click="message"':""}>
                    <span name="hidden-first" tabindex="0" style="position: absolute; top: 0; outline: none"></span>
                    ${t.html}
                    <span name="hidden-last" tabindex="0" style="position: absolute; top: 0; outline: none"></span>
                </div>`,0<query(e.after).length?query(e.box).find(e.after).after(h):query(e.box).prepend(h),t.box=query(e.box).find(`#w2ui-message-${(w=e.owner)==null?void 0:w.name}-`+t.msgIndex)[0],w2utils.bindEvents(t.box,this),query(t.box).addClass("animating"),(t.box._msg_options=t).box._msg_prevFocus=document.activeElement,setTimeout(()=>{var g;(o=t.trigger("open",{target:this.name,box:t.box,self:t})).isCancelled===!0?(query(e.box).find(`#w2ui-message-${(g=e.owner)==null?void 0:g.name}-`+t.msgIndex).remove(),t.msgIndex===0&&(y.css("z-index",t.tmp.zIndex),query(e.box).css("overflow",t.tmp.overflow))):query(t.box).css({transition:"0.3s",transform:"translateY(0px)"})},0),n=setTimeout(()=>{var g;query(e.box).find(`#w2ui-message-${(g=e.owner)==null?void 0:g.name}-`+t.msgIndex).removeClass("animating").css({transition:"0s"}),o.finish()},300)),t.action=(g,_)=>{let k=t.actions[g];k instanceof Object&&k.onClick&&(k=k.onClick),g=t.trigger("action",{target:this.name,action:g,self:t,originalEvent:_,value:t.input?t.input.value:null}),g.isCancelled!==!0&&(typeof k=="function"&&k(g),g.finish())},t.close=()=>{var g;(o=t.trigger("close",{target:"self",box:t.box,self:t})).isCancelled!==!0&&(clearTimeout(n),query(t.box).hasClass("animating")?(clearTimeout(i),a(t)):(query(t.box).addClass("w2ui-closing animating").css({transition:"0.15s",transform:"translateY(-"+t.height+"px)"}),t.msgIndex!==0&&query(e.box).find(`#w2ui-message-${(g=e.owner)==null?void 0:g.name}-`+(t.msgIndex-1)).css("z-index",1499),i=setTimeout(()=>{a(t)},150)))},t.setFocus=g=>{var C,M;var _=query(e.box).find(".w2ui-message").length-1;let k=query(e.box).find(`#w2ui-message-${(C=e.owner)==null?void 0:C.name}-`+_),O="input, button, select, textarea, [contentEditable], .w2ui-input";(M=g!=null?isNaN(g)?k.find(O).filter(g).get(0):k.find(O).get(g):k.find("[name=hidden-first]").get(0))==null||M.focus(),query(e.box).find(".w2ui-message").find(O+",[name=hidden-first],[name=hidden-last]").off(".keep-focus"),query(k).find(O+",[name=hidden-first],[name=hidden-last]").on("blur.keep-focus",function(L){setTimeout(()=>{var X,j,oe;var D=document.activeElement,K=0<query(k).find(O).filter(D).length,J=query(D).attr("name");!K&&D&&D!==document.body&&((X=query(k).find(O).get(0))==null||X.focus()),J=="hidden-last"&&((j=query(k).find(O).get(0))==null||j.focus()),J=="hidden-first"&&((oe=query(k).find(O).get(-1))==null||oe.focus())},1)})},l}notify(e,t){return new Promise(i=>{if(typeof e=="object"&&(e=(t=e).text),(t=t||{}).where=t.where??document.body,t.timeout=t.timeout??15e3,typeof this.tmp.notify_resolve=="function"&&(this.tmp.notify_resolve(),query(this.tmp.notify_where).find("#w2ui-notify").remove()),this.tmp.notify_resolve=i,this.tmp.notify_where=t.where,clearTimeout(this.tmp.notify_timer),e){if(typeof t.actions=="object"){let o={};Object.keys(t.actions).forEach(r=>{o[r]=`<a class="w2ui-notify-link" value="${r}">${r}</a>`}),e=this.execTemplate(e,o)}var n=`
                    <div id="w2ui-notify">
                        <div class="${t.class} ${t.error?"w2ui-notify-error":""}">
                            ${e}
                            <span class="w2ui-notify-close w2ui-icon-cross"></span>
                        </div>
                    </div>`;query(t.where).append(n),query(t.where).find("#w2ui-notify").find(".w2ui-notify-close").on("click",o=>{query(t.where).find("#w2ui-notify").remove(),i()}),t.actions&&query(t.where).find("#w2ui-notify .w2ui-notify-link").on("click",o=>{o=query(o.target).attr("value"),t.actions[o](),query(t.where).find("#w2ui-notify").remove(),i()}),0<t.timeout&&(this.tmp.notify_timer=setTimeout(()=>{query(t.where).find("#w2ui-notify").remove(),i()},t.timeout))}})}confirm(e,t){return w2utils.normButtons(t=typeof t=="string"?{text:t}:t,{yes:"Yes",no:"No"}),e=w2utils.message(e,t),e&&e.action(i=>{i.detail.self.close()}),e}normButtons(e,t){e.actions=e.actions??{};var i=Object.keys(t);return i.forEach(n=>{var o=e["btn_"+n];o&&(t[n]={text:w2utils.lang(o.text??""),class:o.class??"",style:o.style??"",attrs:o.attrs??""},delete e["btn_"+n]),Array("text","class","style","attrs").forEach(r=>{e[n+"_"+r]&&(typeof t[n]=="string"&&(t[n]={text:t[n]}),t[n][r]=e[n+"_"+r],delete e[n+"_"+r])})}),i.includes("yes")&&i.includes("no")&&(w2utils.settings.macButtonOrder?w2utils.extend(e.actions,{no:t.no,yes:t.yes}):w2utils.extend(e.actions,{yes:t.yes,no:t.no})),i.includes("ok")&&i.includes("cancel")&&(w2utils.settings.macButtonOrder?w2utils.extend(e.actions,{cancel:t.cancel,ok:t.ok}):w2utils.extend(e.actions,{ok:t.ok,cancel:t.cancel})),e}getSize(e,t){let i=0;if(0<(e=query(e)).length){e=e[0];var n=getComputedStyle(e);switch(t){case"width":i=parseFloat(n.width),n.width==="auto"&&(i=0);break;case"height":i=parseFloat(n.height),n.height==="auto"&&(i=0);break;default:i=parseFloat(n[t]??0)||0}}return i}getStrWidth(e,t){return query("body").append(`
            <div id="_tmp_width" style="position: absolute; top: -9000px; ${t||""}">
                ${this.encodeTags(e)}
            </div>`),t=query("#_tmp_width")[0].clientWidth,query("#_tmp_width").remove(),t}execTemplate(e,t){return typeof e=="string"&&t&&typeof t=="object"?e.replace(/\${([^}]+)?}/g,function(i,n){return t[n]||n}):e}marker(e,t,i={onlyFirst:!1,wholeWord:!1}){Array.isArray(t)||(t=t!=null&&t!==""?[t]:[]);let n=i.wholeWord;query(e).each(o=>{for(var r=o,a=/\<span class=\"w2ui\-marker\"\>((.|\n|\r)*)\<\/span\>/gi;r.innerHTML.indexOf('<span class="w2ui-marker"')!==-1;)r.innerHTML=r.innerHTML.replace(a,"$1");t.forEach(l=>{l=(l=typeof l!="string"?String(l):l).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&").replace(/&/g,"&amp;").replace(/</g,"&gt;").replace(/>/g,"&lt;"),l=new RegExp((n?"\\b":"")+l+(n?"\\b":"")+"(?!([^<]+)?>)","i"+(i.onlyFirst?"":"g")),o.innerHTML=o.innerHTML.replace(l,c=>'<span class="w2ui-marker">'+c+"</span>")})})}lang(e,t){if(!e||this.settings.phrases==null||typeof e!="string"||"<=>=".includes(e))return this.execTemplate(e,t);let i=this.settings.phrases[e];return i==null?(i=e,this.settings.warnNoPhrase&&(this.settings.missing||(this.settings.missing={}),this.settings.missing[e]="---",this.settings.phrases[e]="---",console.log(`Missing translation for "%c${e}%c", see %c w2utils.settings.phrases %c with value "---"`,"color: orange","","color: #999",""))):i!=="---"||this.settings.warnNoPhrase||(i=e),i==="---"&&(i=`<span ${this.tooltip(e)}>---</span>`),this.execTemplate(i,t)}locale(e,t,i){return new Promise((n,o)=>{if(Array.isArray(e)){this.settings.phrases={};let r=[],a={};e.forEach((l,c)=>{l.length===5&&(l="locale/"+l.toLowerCase()+".json",e[c]=l),r.push(this.locale(l,!0,!1))}),Promise.allSettled(r).then(l=>{l.forEach(c=>{c.value&&(a[c.value.file]=c.value.data)}),e.forEach(c=>{this.settings=this.extend({},this.settings,a[c])}),n()})}else(e=e||"en-us")instanceof Object?this.settings=this.extend({},this.settings,w2locale,e):(e.length===5&&(e="locale/"+e.toLowerCase()+".json"),fetch(e,{method:"GET"}).then(r=>r.json()).then(r=>{i!==!0&&(this.settings=t?this.extend({},this.settings,r):this.extend({},this.settings,w2locale,{phrases:{}},r)),n({file:e,data:r})}).catch(r=>{console.log("ERROR: Cannot load locale "+e),o(r)}))})}scrollBarSize(){return this.tmp.scrollBarSize||(query("body").append(`
            <div id="_scrollbar_width" style="position: absolute; top: -300px; width: 100px; height: 100px; overflow-y: scroll;">
                <div style="height: 120px">1</div>
            </div>
        `),this.tmp.scrollBarSize=100-query("#_scrollbar_width > div")[0].clientWidth,query("#_scrollbar_width").remove()),this.tmp.scrollBarSize}checkName(e){return e==null?(console.log('ERROR: Property "name" is required but not supplied.'),!1):w2ui[e]!=null?(console.log(`ERROR: Object named "${e}" is already registered as w2ui.${e}.`),!1):!!this.isAlphaNumeric(e)||(console.log('ERROR: Property "name" has to be alpha-numeric (a-z, 0-9, dash and underscore).'),!1)}checkUniqueId(e,t,i,n){Array.isArray(t)||(t=[t]);let o=!0;return t.forEach(r=>{r.id===e&&(console.log(`ERROR: The item id="${e}" is not unique within the ${i} "${n}".`,t),o=!1)}),o}encodeParams(e,t=""){let i="";return Object.keys(e).forEach(n=>{i!=""&&(i+="&"),typeof e[n]=="object"?i+=this.encodeParams(e[n],t+n+(t?"]":"")+"["):i+=""+t+n+(t?"]":"")+"="+e[n]}),i}parseRoute(e){let t=[];return e=e.replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,(i,n,o,r,a,l)=>(t.push({name:r,optional:!!l}),n=n||"",(l?"":n)+"(?:"+(l?n:"")+(o||"")+(a||(o?"([^/.]+?)":"([^/]+?)"))+")"+(l||""))).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),{path:new RegExp("^"+e+"$","i"),keys:t}}getCursorPosition(e){if(e==null)return null;let t=0;var i,n=e.ownerDocument||e.document,o=n.defaultView||n.parentWindow;let r;return["INPUT","TEXTAREA"].includes(e.tagName)?t=e.selectionStart:o.getSelection?0<(r=o.getSelection()).rangeCount&&((i=(o=r.getRangeAt(0)).cloneRange()).selectNodeContents(e),i.setEnd(o.endContainer,o.endOffset),t=i.toString().length):(r=n.selection)&&r.type!=="Control"&&(o=r.createRange(),(i=n.body.createTextRange()).moveToElementText(e),i.setEndPoint("EndToEnd",o),t=i.text.length),t}setCursorPosition(e,t,i){if(e!=null){var n=document.createRange();let o,r=window.getSelection();if(["INPUT","TEXTAREA"].includes(e.tagName))e.setSelectionRange(t,i??t);else{for(let a=0;a<e.childNodes.length;a++){let l=query(e.childNodes[a]).text();if(t<=(l=e.childNodes[a].tagName?(l=query(e.childNodes[a]).html()).replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&nbsp;/g," "):l).length){(o=(o=e.childNodes[a]).childNodes&&0<o.childNodes.length?o.childNodes[0]:o).childNodes&&0<o.childNodes.length&&(o=o.childNodes[0]);break}t-=l.length}o!=null&&(t>o.length&&(t=o.length),n.setStart(o,t),i?n.setEnd(o,i):n.collapse(!0),r.removeAllRanges(),r.addRange(n))}}}parseColor(e){if(typeof e!="string")return null;let t={};if((e=(e=e.trim().toUpperCase())[0]==="#"?e.substr(1):e).length===3)t={r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:1};else if(e.length===6)t={r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:1};else if(e.length===8)t={r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:Math.round(parseInt(e.substr(6,2),16)/255*100)/100};else if(4<e.length&&e.substr(0,4)==="RGB("){var i=e.replace("RGB","").replace(/\(/g,"").replace(/\)/g,"").split(",");t={r:parseInt(i[0],10),g:parseInt(i[1],10),b:parseInt(i[2],10),a:1}}else{if(!(5<e.length&&e.substr(0,5)==="RGBA("))return null;i=e.replace("RGBA","").replace(/\(/g,"").replace(/\)/g,"").split(","),t={r:parseInt(i[0],10),g:parseInt(i[1],10),b:parseInt(i[2],10),a:parseFloat(i[3])}}return t}hsv2rgb(e,t,i,n){let o,r,a,l,c,u,h,d;switch(arguments.length===1&&(t=e.s,i=e.v,n=e.a,e=e.h),u=(i/=100)*(1-(t/=100)),h=i*(1-(c=6*(e/=360)-(l=Math.floor(6*e)))*t),d=i*(1-(1-c)*t),l%6){case 0:o=i,r=d,a=u;break;case 1:o=h,r=i,a=u;break;case 2:o=u,r=i,a=d;break;case 3:o=u,r=h,a=i;break;case 4:o=d,r=u,a=i;break;case 5:o=i,r=u,a=h}return{r:Math.round(255*o),g:Math.round(255*r),b:Math.round(255*a),a:n??1}}rgb2hsv(e,t,i,n){arguments.length===1&&(t=e.g,i=e.b,n=e.a,e=e.r);let o=Math.max(e,t,i),r=Math.min(e,t,i),a=o-r,l,c=o===0?0:a/o,u=o/255;switch(o){case r:l=0;break;case e:l=t-i+a*(t<i?6:0),l/=6*a;break;case t:l=i-e+2*a,l/=6*a;break;case i:l=e-t+4*a,l/=6*a}return{h:Math.round(360*l),s:Math.round(100*c),v:Math.round(100*u),a:n??1}}tooltip(e,t){let i="mouseenter",n="mouseleave";return t=(t=typeof e=="object"?e:t)||{},typeof e=="string"&&(t.html=e),t.showOn&&(i=t.showOn,delete t.showOn),t.hideOn&&(n=t.hideOn,delete t.hideOn),t.name||(t.name="no-name"),` on${i}="w2tooltip.show(this, JSON.parse(w2utils.base64decode('${this.base64encode(JSON.stringify(t))}')))" on${n}="w2tooltip.hide('${t.name}')"`}isPlainObject(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"&&(e.constructor===void 0||(e=Object.getPrototypeOf(e))===null||e===Object.prototype)}clone(e,t){let i;return t=Object.assign({functions:!0,elements:!0,events:!0,exclude:[]},t??{}),Array.isArray(e)?(i=Array.from(e)).forEach((n,o)=>{i[o]=this.clone(n,t)}):this.isPlainObject(e)?(i={},Object.assign(i,e),t.exclude&&t.exclude.forEach(n=>{delete i[n]}),Object.keys(i).forEach(n=>{i[n]=this.clone(i[n],t),i[n]===void 0&&delete i[n]})):e instanceof Function&&!t.functions||e instanceof Node&&!t.elements||e instanceof Event&&!t.events||(i=e),i}extend(e,t){if(Array.isArray(e)){if(!Array.isArray(t))throw new Error("Arrays can be extended with arrays only");e.splice(0,e.length),t.forEach(i=>{e.push(this.clone(i))})}else{if(e instanceof Node||e instanceof Event)throw new Error("HTML elmenents and events cannot be extended");if(e&&typeof e=="object"&&t!=null){if(typeof t!="object")throw new Error("Object can be extended with other objects only.");Object.keys(t).forEach(i=>{var n;e[i]!=null&&typeof e[i]=="object"&&t[i]!=null&&typeof t[i]=="object"?(n=this.clone(t[i]),e[i]instanceof Node||e[i]instanceof Event?e[i]=n:(Array.isArray(e[i])&&this.isPlainObject(n)&&(e[i]={}),this.extend(e[i],n))):e[i]=this.clone(t[i])})}else if(t!=null)throw new Error("Object is not extendable, only {} or [] can be extended.")}if(2<arguments.length)for(let i=2;i<arguments.length;i++)this.extend(e,arguments[i]);return e}naturalCompare(e,t){let i,n,o=1,r=0,a=0,l=String.alphabet;function c(u,h,d){if(d){for(i=h;(d=c(u,i))<76&&65<d;)++i;return+u.slice(h-1,i)}return-1<(d=l&&l.indexOf(u.charAt(h)))?d+76:(d=u.charCodeAt(h)||0)<45||127<d?d:d<46?65:d<48?d-1:d<58?d+18:d<65?d-11:d<91?d+11:d<97?d-37:d<123?d+5:d-63}if((e+="")!=(t+="")){for(;o;)if(n=c(e,r++),o=c(t,a++),n<76&&o<76&&66<n&&66<o&&(n=c(e,r,r),o=c(t,a,r=i),a=i),n!=o)return n<o?-1:1}return 0}normMenu(e,t){return Array.isArray(e)?(e.forEach((i,n)=>{typeof i=="string"||typeof i=="number"?e[n]={id:i,text:String(i)}:i!=null?(i.caption!=null&&i.text==null&&(i.text=i.caption),i.text!=null&&i.id==null&&(i.id=i.text),i.text==null&&i.id!=null&&(i.text=i.id)):e[n]={id:null,text:"null"}}),e):typeof e=="function"?(t=e.call(this,e,t),w2utils.normMenu.call(this,t)):typeof e=="object"?Object.keys(e).map(i=>({id:i,text:e[i]})):void 0}prepareParams(e,t,i){i=i??w2utils.settings.dataType;let n=t.body;switch(i){case"HTTPJSON":n={request:n},["PUT","DELETE"].includes(t.method)&&(t.method="POST"),o();break;case"HTTP":["PUT","DELETE"].includes(t.method)&&(t.method="POST"),o();break;case"RESTFULL":["PUT","DELETE"].includes(t.method)?t.headers["Content-Type"]="application/json":o();break;case"JSON":t.method=="GET"?(n={request:n},o()):(t.headers["Content-Type"]="application/json",t.method="POST")}return t.body=typeof t.body=="string"?t.body:JSON.stringify(t.body),t;function o(){Object.keys(n).forEach(r=>{let a=n[r];typeof a=="object"&&(a=JSON.stringify(a)),e.searchParams.append(r,a)}),delete t.body}}bindEvents(e,t){e.length!=0&&((e==null?void 0:e[0])instanceof Node&&(e=Array.isArray(e)?e:e.get()),query(e).each(i=>{let n=query(i).data();Object.keys(n).forEach(o=>{if(["click","dblclick","mouseenter","mouseleave","mouseover","mouseout","mousedown","mousemove","mouseup","contextmenu","focus","focusin","focusout","blur","input","change","keydown","keyup","keypress"].indexOf(String(o).toLowerCase())!=-1){let r=n[o],a=(r=typeof r=="string"?r.split("|").map(l=>{(l=(l=(l=l==="true"?!0:l)==="false"?!1:l)==="undefined"?void 0:l)==="null"&&(l=null);var c=["'",'"',"`"];return l=typeof(l=parseFloat(l)==l?parseFloat(l):l)=="string"&&c.includes(l[0])&&c.includes(l[l.length-1])?l.substring(1,l.length-1):l}):r)[0];r=r.slice(1),query(i).off(o+".w2utils-bind").on(o+".w2utils-bind",function(l){switch(a){case"alert":alert(r[0]);break;case"stop":l.stopPropagation();break;case"prevent":l.preventDefault();break;case"stopPrevent":return l.stopPropagation(),l.preventDefault(),!1;default:if(t[a]==null)throw new Error(`Cannot dispatch event as the method "${a}" does not exist.`);t[a].apply(t,r.map((c,u)=>{switch(String(c).toLowerCase()){case"event":return l;case"this":return this;default:return c}}))}})}})}))}debounce(e,t=250){let i;return(...n)=>{clearTimeout(i),i=setTimeout(()=>{e(...n)},t)}}}var w2utils=new Utils;class Dialog extends w2base{constructor(){super(),this.defaults={title:"",text:"",body:"",buttons:"",width:450,height:250,focus:null,actions:null,style:"",speed:.3,modal:!1,maximized:!1,keyboard:!0,showClose:!0,showMax:!1,transition:null,openMaximized:!1,moved:!1},this.name="popup",this.status="closed",this.onOpen=null,this.onClose=null,this.onMax=null,this.onMin=null,this.onToggle=null,this.onKeydown=null,this.onAction=null,this.onMove=null,this.tmp={},this.handleResize=e=>{this.options.moved||this.center(void 0,void 0,!0)}}open(e){let t=this;this.status!="closing"&&!query("#w2ui-popup").hasClass("animating")||this.close(!0);var i=this.options;(e=["string","number"].includes(typeof e)?w2utils.extend({title:"Notification",body:`<div class="w2ui-centered">${e}</div>`,actions:{Ok(){t.close()}},cancelAction:"ok"},arguments[1]??{}):e).text!=null&&(e.body=`<div class="w2ui-centered w2ui-msg-text">${e.text}</div>`),e=Object.assign({},this.defaults,i,{title:"",body:""},e,{maximized:!1}),this.options=e,query("#w2ui-popup").length===0&&(this.off("*"),Object.keys(this).forEach(u=>{u.startsWith("on")&&u!="on"&&(this[u]=null)})),Object.keys(e).forEach(u=>{u.startsWith("on")&&u!="on"&&e[u]&&(this[u]=e[u])}),e.width=parseInt(e.width),e.height=parseInt(e.height);let n,o,r;var{top:a,left:l}=this.center();let c={self:this,action(u){return t.on("action.prom",u),c},close(u){return t.on("close.prom",u),c},then(u){return t.on("open:after.prom",u),c}};if(e.actions==null||e.buttons||(e.buttons="",Object.keys(e.actions).forEach(u=>{var h=e.actions[u];let d=u;typeof h=="function"&&(e.buttons+=`<button class="w2ui-btn w2ui-eaction" data-click='["action","${u}","event"]'>${u}</button>`),typeof h=="object"&&(e.buttons+=`<button class="w2ui-btn w2ui-eaction ${h.class||""}" name="${u}" data-click='["action","${u}","event"]'
                        style="${h.style}" ${h.attrs}>${h.text||u}</button>`,d=Array.isArray(e.actions)?h.text:u),typeof h=="string"&&(e.buttons+=`<button class="w2ui-btn w2ui-eaction" data-click='["action","${h}","event"]'>${h}</button>`,d=h),typeof d=="string"&&(d=d[0].toLowerCase()+d.substr(1).replace(/\s+/g,"")),c[d]=function(y){return t.on("action.buttons",b=>{b.detail.action[0].toLowerCase()+b.detail.action.substr(1).replace(/\s+/g,"")==d&&y(b)}),c}})),query("#w2ui-popup").length===0){if((n=this.trigger("open",{target:"popup",present:!1})).isCancelled===!0)return;this.status="opening",w2utils.lock(document.body,{opacity:.3,onClick:e.modal?null:()=>{this.close()}});let u="";e.showClose&&(u+=`<div class="w2ui-popup-button w2ui-popup-close">
                            <span class="w2ui-icon w2ui-icon-cross w2ui-eaction" data-mousedown="stop" data-click="close"></span>
                        </div>`),e.showMax&&(u+=`<div class="w2ui-popup-button w2ui-popup-max">
                            <span class="w2ui-icon w2ui-icon-box w2ui-eaction" data-mousedown="stop" data-click="toggle"></span>
                        </div>`),l=`
                left: ${l}px;
                top: ${a}px;
                width: ${parseInt(e.width)}px;
                height: ${parseInt(e.height)}px;
                transition: ${e.speed}s
            `,o=`<div id="w2ui-popup" class="w2ui-popup w2ui-anim-open animating" style="${w2utils.stripSpaces(l)}"></div>`,query("body").append(o),query("#w2ui-popup")[0]._w2popup={self:this,created:new Promise(h=>{this._promCreated=h}),opened:new Promise(h=>{this._promOpened=h}),closing:new Promise(h=>{this._promClosing=h}),closed:new Promise(h=>{this._promClosed=h})},l=`${e.title?"":"top: 0px !important;"} `+(e.buttons?"":"bottom: 0px !important;"),o=`
                <span name="hidden-first" tabindex="0" style="position: absolute; top: -100px"></span>
                <div class="w2ui-popup-title-btns">${u}</div>
                <div class="w2ui-popup-title" style="${e.title?"":"display: none"}"></div>
                <div class="w2ui-box" style="${l}">
                    <div class="w2ui-popup-body ${!e.title||" w2ui-popup-no-title"}
                        ${!e.buttons||" w2ui-popup-no-buttons"}" style="${e.style}">
                    </div>
                </div>
                <div class="w2ui-popup-buttons" style="${e.buttons?"":"display: none"}"></div>
                <span name="hidden-last" tabindex="0" style="position: absolute; top: -100px"></span>
            `,query("#w2ui-popup").html(o),e.title&&query("#w2ui-popup .w2ui-popup-title").append(w2utils.lang(e.title)),e.buttons&&query("#w2ui-popup .w2ui-popup-buttons").append(e.buttons),e.body&&query("#w2ui-popup .w2ui-popup-body").append(e.body),setTimeout(()=>{query("#w2ui-popup").css("transition",e.speed+"s").removeClass("w2ui-anim-open"),w2utils.bindEvents("#w2ui-popup .w2ui-eaction",this),query("#w2ui-popup").find(".w2ui-popup-body").show(),this._promCreated()},1),clearTimeout(this._timer),this._timer=setTimeout(()=>{this.status="open",t.setFocus(e.focus),n.finish(),this._promOpened(),query("#w2ui-popup").removeClass("animating")},1e3*e.speed)}else{if((n=this.trigger("open",{target:"popup",present:!0})).isCancelled===!0)return;this.status="opening",i!=null&&(i.maximized||i.width==e.width&&i.height==e.height||this.resize(e.width,e.height),e.prevSize=e.width+"px:"+e.height+"px",e.maximized=i.maximized),a=query("#w2ui-popup .w2ui-box").get(0).cloneNode(!0),query(a).removeClass("w2ui-box").addClass("w2ui-box-temp").find(".w2ui-popup-body").empty().append(e.body),query("#w2ui-popup .w2ui-box").after(a),e.buttons?(query("#w2ui-popup .w2ui-popup-buttons").show().html("").append(e.buttons),query("#w2ui-popup .w2ui-popup-body").removeClass("w2ui-popup-no-buttons"),query("#w2ui-popup .w2ui-box, #w2ui-popup .w2ui-box-temp").css("bottom","")):(query("#w2ui-popup .w2ui-popup-buttons").hide().html(""),query("#w2ui-popup .w2ui-popup-body").addClass("w2ui-popup-no-buttons"),query("#w2ui-popup .w2ui-box, #w2ui-popup .w2ui-box-temp").css("bottom","0px")),e.title?(query("#w2ui-popup .w2ui-popup-title").show().html((e.showClose?`<div class="w2ui-popup-button w2ui-popup-close">
                                <span class="w2ui-icon w2ui-icon-cross w2ui-eaction" data-mousedown="stop" data-click="close"></span>
                            </div>`:"")+(e.showMax?`<div class="w2ui-popup-button w2ui-popup-max">
                                <span class="w2ui-icon w2ui-icon-box w2ui-eaction" data-mousedown="stop" data-click="toggle"></span>
                            </div>`:"")).append(e.title),query("#w2ui-popup .w2ui-popup-body").removeClass("w2ui-popup-no-title"),query("#w2ui-popup .w2ui-box, #w2ui-popup .w2ui-box-temp").css("top","")):(query("#w2ui-popup .w2ui-popup-title").hide().html(""),query("#w2ui-popup .w2ui-popup-body").addClass("w2ui-popup-no-title"),query("#w2ui-popup .w2ui-box, #w2ui-popup .w2ui-box-temp").css("top","0px"));let u=query("#w2ui-popup .w2ui-box")[0],h=query("#w2ui-popup .w2ui-box-temp")[0];query("#w2ui-popup").addClass("animating"),w2utils.transition(u,h,e.transition,()=>{query(u).remove(),query(h).removeClass("w2ui-box-temp").addClass("w2ui-box");var d=query(h).find(".w2ui-popup-body");d.length==1&&(d[0].style.cssText=e.style,d.show()),t.setFocus(e.focus),query("#w2ui-popup").removeClass("animating")}),this.status="open",n.finish(),w2utils.bindEvents("#w2ui-popup .w2ui-eaction",this),query("#w2ui-popup").find(".w2ui-popup-body").show()}return e.openMaximized&&this.max(),e._last_focus=document.activeElement,e.keyboard&&query(document.body).on("keydown",u=>{this.keydown(u)}),query(window).on("resize",this.handleResize),r={resizing:!1,mvMove:function(u){r.resizing==1&&(u=u||window.event,r.div_x=u.screenX-r.x,r.div_y=u.screenY-r.y,(u=t.trigger("move",{target:"popup",div_x:r.div_x,div_y:r.div_y,originalEvent:u})).isCancelled!==!0)&&(query("#w2ui-popup").css({transition:"none",transform:"translate3d("+r.div_x+"px, "+r.div_y+"px, 0px)"}),t.options.moved=!0,u.finish())},mvStop:function(u){r.resizing!=1||(u=u||window.event,t.status="open",r.div_x=u.screenX-r.x,r.div_y=u.screenY-r.y,query("#w2ui-popup").css({left:r.pos_x+r.div_x+"px",top:r.pos_y+r.div_y+"px"}).css({transition:"none",transform:"translate3d(0px, 0px, 0px)"}),r.resizing=!1,query(document.body).off(".w2ui-popup"),r.isLocked)||t.unlock()}},query("#w2ui-popup .w2ui-popup-title").on("mousedown",function(u){var h;t.options.maximized||(u=(u=u)||window.event,t.status="moving",h=query("#w2ui-popup").get(0).getBoundingClientRect(),Object.assign(r,{resizing:!0,isLocked:query("#w2ui-popup > .w2ui-lock").length==1,x:u.screenX,y:u.screenY,pos_x:h.x,pos_y:h.y}),r.isLocked||t.lock({opacity:0}),query(document.body).on("mousemove.w2ui-popup",r.mvMove).on("mouseup.w2ui-popup",r.mvStop),u.stopPropagation?u.stopPropagation():u.cancelBubble=!0,u.preventDefault&&u.preventDefault())}),c}load(e){return new Promise((t,i)=>{if((e=typeof e=="string"?{url:e}:e).url==null)console.log("ERROR: The url is not defined."),i("The url is not defined");else{this.status="loading";let[n,o]=String(e.url).split("#");n&&fetch(n).then(r=>r.text()).then(r=>{t(this.template(r,o,e))})}})}template(e,t,i={}){let n;try{n=query(e)}catch{n=query.html(e)}return t&&(n=n.filter("#"+t)),Object.assign(i,{width:parseInt(query(n).css("width")),height:parseInt(query(n).css("height")),title:query(n).find("[rel=title]").html(),body:query(n).find("[rel=body]").html(),buttons:query(n).find("[rel=buttons]").html(),style:query(n).find("[rel=body]").get(0).style.cssText}),this.open(i)}action(e,t){let i=this.options.actions[e];i instanceof Object&&i.onClick&&(i=i.onClick),e=this.trigger("action",{action:e,target:"popup",self:this,originalEvent:t,value:this.input?this.input.value:null}),e.isCancelled!==!0&&(typeof i=="function"&&i.call(this,t),e.finish())}keydown(e){var t;this.options&&!this.options.keyboard||(t=this.trigger("keydown",{target:"popup",originalEvent:e})).isCancelled!==!0&&(e.keyCode===27&&(e.preventDefault(),query("#w2ui-popup .w2ui-message").length==0)&&(this.options.cancelAction?this.action(this.options.cancelAction):this.close()),t.finish())}close(e){let t=this.trigger("close",{target:"popup"});var i;t.isCancelled!==!0&&(i=()=>{query("#w2ui-popup").remove(),this.options._last_focus&&0<this.options._last_focus.length&&this.options._last_focus.focus(),this.status="closed",this.options={},t.finish(),this._promClosed()},query("#w2ui-popup").length!==0)&&this.status!="closed"&&(this.status=="opening"&&(e=!0),this.status=="closing"&&e===!0?(i(),clearTimeout(this.tmp.closingTimer),w2utils.unlock(document.body,0)):(this.status="closing",query("#w2ui-popup").css("transition",this.options.speed+"s").addClass("w2ui-anim-close animating"),w2utils.unlock(document.body,300),this._promClosing(),e?i():this.tmp.closingTimer=setTimeout(i,1e3*this.options.speed),this.options.keyboard&&query(document.body).off("keydown",this.keydown),query(window).off("resize",this.handleResize)))}toggle(){let e=this.trigger("toggle",{target:"popup"});e.isCancelled!==!0&&(this.options.maximized===!0?this.min():this.max(),setTimeout(()=>{e.finish()},1e3*this.options.speed+50))}max(){if(this.options.maximized!==!0){let t=this.trigger("max",{target:"popup"});var e;t.isCancelled!==!0&&(this.status="resizing",e=query("#w2ui-popup").get(0).getBoundingClientRect(),this.options.prevSize=e.width+":"+e.height,this.resize(1e4,1e4,()=>{this.status="open",this.options.maximized=!0,t.finish()}))}}min(){if(this.options.maximized===!0){var e=this.options.prevSize.split(":");let t=this.trigger("min",{target:"popup"});t.isCancelled!==!0&&(this.status="resizing",this.options.maximized=!1,this.resize(parseInt(e[0]),parseInt(e[1]),()=>{this.status="open",this.options.prevSize=null,t.finish()}))}}clear(){query("#w2ui-popup .w2ui-popup-title").html(""),query("#w2ui-popup .w2ui-popup-body").html(""),query("#w2ui-popup .w2ui-popup-buttons").html("")}reset(){this.open(this.defaults)}message(e){return w2utils.message({owner:this,box:query("#w2ui-popup").get(0),after:".w2ui-popup-title"},e)}confirm(e){return w2utils.confirm({owner:this,box:query("#w2ui-popup"),after:".w2ui-popup-title"},e)}setFocus(e){var n;let t=query("#w2ui-popup"),i="input, button, select, textarea, [contentEditable], .w2ui-input";e!=null?(n=isNaN(e)?t.find(i).filter(e).get(0):t.find(i).get(e))==null||n.focus():(e=t.find("[name=hidden-first]").get(0))&&e.focus(),query(t).find(i+",[name=hidden-first],[name=hidden-last]").off(".keep-focus").on("blur.keep-focus",function(o){setTimeout(()=>{var c,u,h;var r=document.activeElement,a=0<query(t).find(i).filter(r).length,l=query(r).attr("name");!a&&r&&r!==document.body&&((c=query(t).find(i).get(0))==null||c.focus()),l=="hidden-last"&&((u=query(t).find(i).get(0))==null||u.focus()),l=="hidden-first"&&((h=query(t).find(i).get(-1))==null||h.focus())},1)})}lock(e,t){var i=Array.from(arguments);i.unshift(query("#w2ui-popup")),w2utils.lock(...i)}unlock(e){w2utils.unlock(query("#w2ui-popup"),e)}center(e,t,i){let n,o;o=window.innerHeight==null?(n=parseInt(document.documentElement.offsetWidth),parseInt(document.documentElement.offsetHeight)):(n=parseInt(window.innerWidth),parseInt(window.innerHeight)),e=parseInt(e??this.options.width),t=parseInt(t??this.options.height),this.options.maximized===!0&&(e=n,t=o),n-10<e&&(e=n-10),o-10<t&&(t=o-10);var r=(o-t)/2,a=(n-e)/2;return i&&(query("#w2ui-popup").css({transition:"none",top:r+"px",left:a+"px",width:e+"px",height:t+"px"}),this.resizeMessages()),{top:r,left:a,width:e,height:t}}resize(o,r,i){let n=this;this.options.speed==null&&(this.options.speed=0);var{top:o,left:r,width:a,height:l}=this.center(o,r),c=this.options.speed;query("#w2ui-popup").css({transition:c+`s width, ${c}s height, ${c}s left, ${c}s top`,top:o+"px",left:r+"px",width:a+"px",height:l+"px"});let u=setInterval(()=>{n.resizeMessages()},10);setTimeout(()=>{clearInterval(u),n.resizeMessages(),typeof i=="function"&&i()},1e3*this.options.speed+50)}resizeMessages(){query("#w2ui-popup .w2ui-message").each(e=>{var t=e._msg_options,i=query("#w2ui-popup"),o=(parseInt(t.width)<10&&(t.width=10),parseInt(t.height)<10&&(t.height=10),i[0].getBoundingClientRect()),i=parseInt(i.find(".w2ui-popup-title")[0].clientHeight),n=parseInt(o.width),o=parseInt(o.height);t.width=t.originalWidth,t.width>n-10&&(t.width=n-10),t.height=t.originalHeight,t.height>o-i-5&&(t.height=o-i-5),t.originalHeight<0&&(t.height=o+t.originalHeight-i),t.originalWidth<0&&(t.width=n+2*t.originalWidth),query(e).css({left:(n-t.width)/2+"px",width:t.width+"px",height:t.height+"px"})})}}new Dialog;const H=class H{constructor(){this.defaults={name:null,html:"",style:"",class:"",position:"top|bottom",align:"",anchor:null,anchorClass:"",anchorStyle:"",autoShow:!1,autoShowOn:null,autoHideOn:null,arrowSize:8,margin:0,margin:1,screenMargin:2,autoResize:!0,offsetX:0,offsetY:0,maxWidth:null,maxHeight:null,watchScroll:null,watchResize:null,hideOn:null,onThen:null,onShow:null,onHide:null,onUpdate:null,onMove:null}}trigger(e,t){var i;if(arguments.length==2&&(i=e,(e=t).type=i),e.overlay)return e.overlay.trigger(e);console.log("ERROR: cannot find overlay where to trigger events")}get(e){return arguments.length==0?Object.keys(H.active):e===!0?H.active:H.active[e.replace(/[\s\.#]/g,"_")]}attach(e,t){let i,n,o=this;if(arguments.length!=0){arguments.length==1&&e.anchor?e=(i=e).anchor:arguments.length===2&&typeof t=="string"?t=(i={anchor:e,html:t}).html:arguments.length===2&&t!=null&&typeof t=="object"&&(t=(i=t).html),i=w2utils.extend({},this.defaults,i||{}),!(t=!t&&i.text?i.text:t)&&i.html&&(t=i.html),delete i.anchor;let r=i.name||e.id;e!=document&&e!=document.body||(e=document.body,r="context-menu"),r||(r="noname-"+Object.keys(H.active).length,console.log("NOTICE: name property is not defined for tooltip, could lead to too many instances")),r=r.replace(/[\s\.#]/g,"_"),H.active[r]?((n=H.active[r]).prevOptions=n.options,n.options=i,n.anchor=e,n.prevOptions.html==n.options.html&&n.prevOptions.class==n.options.class&&n.prevOptions.style==n.options.style||(n.needsUpdate=!0),i=n.options):(n=new w2base,Object.assign(n,{id:"w2overlay-"+r,name:r,options:i,anchor:e,displayed:!1,tmp:{observeResize:new ResizeObserver(()=>{this.resize(n.name)})},hide(){o.hide(r)}}),H.active[r]=n),Object.keys(n.options).forEach(l=>{var c=n.options[l];l.startsWith("on")&&typeof c=="function"&&(n[l]=c,delete n.options[l])}),i.autoShow===!0&&(i.autoShowOn=i.autoShowOn??"mouseenter",i.autoHideOn=i.autoHideOn??"mouseleave",i.autoShow=!1),i.autoShowOn&&(t="autoShow-"+n.name,query(e).off("."+t).on(i.autoShowOn+"."+t,l=>{o.show(n.name),l.stopPropagation()}),delete i.autoShowOn),i.autoHideOn&&(t="autoHide-"+n.name,query(e).off("."+t).on(i.autoHideOn+"."+t,l=>{o.hide(n.name),l.stopPropagation()}),delete i.autoHideOn),n.off(".attach");let a={overlay:n,then:l=>(n.on("show:after.attach",c=>{l(c)}),a),show:l=>(n.on("show.attach",c=>{l(c)}),a),hide:l=>(n.on("hide.attach",c=>{l(c)}),a),update:l=>(n.on("update.attach",c=>{l(c)}),a),move:l=>(n.on("move.attach",c=>{l(c)}),a)};return a}}update(e,t){var i=H.active[e];i?(i.needsUpdate=!0,i.options.html=t,this.show(e)):console.log(`Tooltip "${e}" is not displayed. Cannot update it.`)}show(e){if(e instanceof HTMLElement||e instanceof Object){let a=e,l=(e instanceof HTMLElement&&((a=arguments[1]||{}).anchor=e),this.attach(a));return query(l.overlay.anchor).off(".autoShow-"+l.overlay.name).off(".autoHide-"+l.overlay.name),setTimeout(()=>{this.show(l.overlay.name),this.initControls&&this.initControls(l.overlay)},1),l}let t,i=this,n=H.active[e.replace(/[\s\.#]/g,"_")];if(n){let a=n.options;if(!n||n.displayed&&!n.needsUpdate)this.resize(n==null?void 0:n.name);else{var o=a.position.split("|"),o=["top","bottom"].includes(o[0]);let l=a.align=="both"&&o?"":"white-space: nowrap;";if(a.maxWidth&&w2utils.getStrWidth(a.html,"")>a.maxWidth&&(l="width: "+a.maxWidth+"px; white-space: inherit; overflow: auto;"),l+=" max-height: "+(a.maxHeight||window.innerHeight-40)+"px;",a.html!==""&&a.html!=null){if(n.box){if((t=this.trigger("update",{target:e,overlay:n})).isCancelled===!0)return void(n.prevOptions&&(n.options=n.prevOptions,delete n.prevOptions));query(n.box).find(".w2ui-overlay-body").attr("style",(a.style||"")+"; "+l).removeClass().addClass("w2ui-overlay-body "+a.class).html(a.html)}else{if((t=this.trigger("show",{target:e,overlay:n})).isCancelled===!0)return;query("body").append(`<div id="${n.id}" name="${e}" style="display: none; pointer-events: none" class="w2ui-overlay"
                        data-click="stop" data-focusin="stop">
                    <style></style>
                    <div class="w2ui-overlay-body ${a.class}" style="${a.style||""}; ${l}">
                        ${a.html}
                    </div>
                </div>`),n.box=query("#"+w2utils.escapeId(n.id))[0],n.displayed=!0,o=query(n.anchor).data("tooltipName")??[],o.push(e),query(n.anchor).data("tooltipName",o),w2utils.bindEvents(n.box,{}),n.tmp.originalCSS="",0<query(n.anchor).length&&(n.tmp.originalCSS=query(n.anchor)[0].style.cssText)}this.resize(n.name),a.anchorStyle&&(n.anchor.style.cssText+=";"+a.anchorStyle),!a.anchorClass||a.anchorClass=="w2ui-focus"&&n.anchor==document.body||query(n.anchor).addClass(a.anchorClass),typeof a.hideOn=="string"&&(a.hideOn=[a.hideOn]),Array.isArray(a.hideOn)||(a.hideOn=[]),Object.assign(n.tmp,{scrollLeft:document.body.scrollLeft,scrollTop:document.body.scrollTop});{let c=d=>{i.hide(n.name)},u=query(n.anchor),h="tooltip-"+n.name;query("body").off("."+h),a.hideOn.includes("doc-click")&&(["INPUT","TEXTAREA"].includes(n.anchor.tagName)&&u.off(`.${h}-doc`).on(`click.${h}-doc`,d=>{d.stopPropagation()}),query("body").on("click."+h,c)),a.hideOn.includes("focus-change")&&query("body").on("focusin."+h,d=>{document.activeElement!=n.anchor&&i.hide(n.name)}),["INPUT","TEXTAREA"].includes(n.anchor.tagName)&&(u.off("."+h),a.hideOn.forEach(d=>{["doc-click","focus-change"].indexOf(d)==-1&&u.on(d+"."+h,{once:!0},c)}))}{var r=document.body;let c="tooltip-"+n.name,u=r;r.tagName=="BODY"&&(u=r.ownerDocument),query(u).off("."+c).on("scroll."+c,h=>{Object.assign(n.tmp,{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}),i.resize(n.name)})}return query(n.box).show(),n.tmp.observeResize.observe(n.box),H.observeRemove.observe(document.body,{subtree:!0,childList:!0}),query(n.box).css("opacity",1).find(".w2ui-overlay-body").html(a.html),setTimeout(()=>{query(n.box).css({"pointer-events":"auto"}).data("ready","yes")},100),delete n.needsUpdate,n.box.overlay=n,t&&t.finish(),{overlay:n}}i.hide(e)}}}hide(e){var o;let t;if(arguments.length==0)Object.keys(H.active).forEach(r=>{this.hide(r)});else if(e instanceof HTMLElement)(query(e).data("tooltipName")??[]).forEach(r=>{this.hide(r)});else if(typeof e=="string"&&(e=e.replace(/[\s\.#]/g,"_"),t=H.active[e]),t&&t.box&&(delete H.active[e],e=this.trigger("hide",{target:e,overlay:t}),e.isCancelled!==!0)){var i="tooltip-"+t.name;(o=t.tmp.observeResize)==null||o.disconnect(),t.options.watchScroll&&query(t.options.watchScroll).off(".w2scroll-"+t.name);let r=0;Object.keys(H.active).forEach(a=>{H.active[a].displayed&&r++}),r==0&&H.observeRemove.disconnect(),query("body").off("."+i),query(document).off("."+i),t.box.remove(),t.box=null,t.displayed=!1;var n=query(t.anchor).data("tooltipName")??[];n.indexOf(t.name)!=-1&&n.splice(n.indexOf(t.name),1),n.length==0?query(t.anchor).removeData("tooltipName"):query(t.anchor).data("tooltipName",n),t.anchor.style.cssText=t.tmp.originalCSS,query(t.anchor).off("."+i).removeClass(t.options.anchorClass),e.finish()}}resize(e){if(arguments.length==0)Object.keys(H.active).forEach(n=>{n=H.active[n],n.displayed&&this.resize(n.name)});else{var t=H.active[e.replace(/[\s\.#]/g,"_")];let n=this.getPosition(t.name);var i=n.left+"x"+n.top;let o;t.tmp.lastPos!=i&&(o=this.trigger("move",{target:e,overlay:t,pos:n})),query(t.box).css({left:n.left+"px",top:n.top+"px"}).then(r=>{n.width!=null&&r.css("width",n.width+"px").find(".w2ui-overlay-body").css("width","100%"),n.height!=null&&r.css("height",n.height+"px").find(".w2ui-overlay-body").css("height","100%")}).find(".w2ui-overlay-body").removeClass("w2ui-arrow-right w2ui-arrow-left w2ui-arrow-top w2ui-arrow-bottom").addClass(n.arrow.class).closest(".w2ui-overlay").find("style").text(n.arrow.style),t.tmp.lastPos!=i&&o&&(t.tmp.lastPos=i,o.finish())}}getPosition(e){let t=H.active[e.replace(/[\s\.#]/g,"_")];if(t&&t.box){let h=t.options;(t.tmp.resizedY||t.tmp.resizedX)&&query(t.box).css({width:"",height:"",scroll:"auto"});var e=w2utils.scrollBarSize(),i=document.body.scrollWidth!=document.body.clientWidth,n=document.body.scrollHeight!=document.body.clientHeight;let y={width:window.innerWidth-(n?e:0),height:window.innerHeight-(i?e:0)};var o,r=(h.position=="auto"?"top|bottom|right|left":h.position).split("|");let b=["top","bottom"].includes(r[0]),w=t.box.getBoundingClientRect(),g=t.anchor.getBoundingClientRect(),_=(t.anchor==document.body&&({x:a,y:l,width:c,height:u}=h.originalEvent,g={left:a-2,top:l-4,width:c,height:u,arrow:"none"}),h.arrowSize),k=(g.arrow=="none"&&(_=0),{top:g.top,bottom:y.height-(g.top+g.height)-+(i?e:0),left:g.left,right:y.width-(g.left+g.width)+(n?e:0)});w.width<22&&(w.width=22),w.height<14&&(w.height=14);let O,C,M,L,D="",K={offset:0,class:"",style:`#${t.id} { --tip-size: ${_}px; }`},J={left:0,top:0},X={posX:"",x:0,posY:"",y:0};r.forEach(j=>{["top","bottom"].includes(j)&&(!D&&w.height+_/1.893<k[j]&&(D=j),k[j]>X.y)&&Object.assign(X,{posY:j,y:k[j]}),["left","right"].includes(j)&&(!D&&w.width+_/1.893<k[j]&&(D=j),k[j]>X.x)&&Object.assign(X,{posX:j,x:k[j]})}),D=D||(b?X.posY:X.posX),h.autoResize&&(["top","bottom"].includes(D)&&(w.height>k[D]?(L=k[D],t.tmp.resizedY=!0):t.tmp.resizedY=!1),["left","right"].includes(D))&&(w.width>k[D]?(M=k[D],t.tmp.resizedX=!0):t.tmp.resizedX=!1);var a=D;switch(K.class=g.arrow||"w2ui-arrow-"+a,a){case"top":O=g.left+(g.width-(M??w.width))/2,C=g.top-(L??w.height)-_/1.5+1;break;case"bottom":O=g.left+(g.width-(M??w.width))/2,C=g.top+g.height+_/1.25+1;break;case"left":O=g.left-(M??w.width)-_/1.2-1,C=g.top+(g.height-(L??w.height))/2;break;case"right":O=g.left+g.width+_/1.2+1,C=g.top+(g.height-(L??w.height))/2}b&&(h.align=="left"&&(J.left=g.left-O,O=g.left),h.align=="right"&&(J.left=g.left+g.width-(M??w.width)-O,O=g.left+g.width-(M??w.width)),["top","bottom"].includes(D)&&h.align.startsWith("both")&&(o=h.align.split(":")[1]??50,g.width>=o)&&(O=g.left,M=g.width),h.align=="top"&&(J.top=g.top-C,C=g.top),h.align=="bottom"&&(J.top=g.top+g.height-(L??w.height)-C,C=g.top+g.height-(L??w.height)),["left","right"].includes(D)&&h.align.startsWith("both")&&(o=h.align.split(":")[1]??50,g.height>=o)&&(C=g.top,L=g.height));{let j;(["left","right"].includes(h.align)&&g.width<(M??w.width)||["top","bottom"].includes(h.align)&&g.height<(L??w.height))&&(j=!0);var l=D=="right"?_:h.screenMargin,c=D=="bottom"?_:h.screenMargin,u=y.width-(M??w.width)-(D=="left"?_:h.screenMargin),i=y.height-(L??w.height)-(D=="top"?_:h.screenMargin)+3;(["top","bottom"].includes(D)||h.autoResize)&&(O<l&&(j=!0,J.left-=O,O=l),O>u)&&(j=!0,J.left-=O-u,O+=u-O),(["left","right"].includes(D)||h.autoResize)&&(C<c&&(j=!0,J.top-=C,C=c),C>i)&&(j=!0,J.top-=C-i,C+=i-C),j&&(l=b?"left":"top",u=b?"width":"height",K.offset=-J[l],c=w[u]/2-_,Math.abs(K.offset)>c+_&&(K.class=""),Math.abs(K.offset)>c&&(K.offset=K.offset<0?-c:c),K.style=w2utils.stripSpaces(`#${t.id} .w2ui-overlay-body:after,
                            #${t.id} .w2ui-overlay-body:before {
                                --tip-size: ${_}px;
                                margin-${l}: ${K.offset}px;
                            }`))}return n=D=="top"?-h.margin:D=="bottom"?h.margin:0,e=D=="left"?-h.margin:D=="right"?h.margin:0,C=Math.floor(100*(C+parseFloat(h.offsetY)+parseFloat(n)))/100,{left:O=Math.floor(100*(O+parseFloat(h.offsetX)+parseFloat(e)))/100,top:C,arrow:K,adjust:J,width:M,height:L,pos:D}}}};me(H,"active",{}),me(H,"observeRemove",new MutationObserver(e=>{let t=0;Object.keys(H.active).forEach(i=>{i=H.active[i],i.displayed&&(i.anchor&&i.anchor.isConnected?t++:i.hide())}),t===0&&H.observeRemove.disconnect()}));let Tooltip=H;class ColorTooltip extends Tooltip{constructor(){super(),this.palette=[["000000","333333","555555","777777","888888","999999","AAAAAA","CCCCCC","DDDDDD","EEEEEE","F7F7F7","FFFFFF"],["FF011B","FF9838","FFC300","FFFD59","86FF14","14FF7A","2EFFFC","2693FF","006CE7","9B24F4","FF21F5","FF0099"],["FFEAEA","FCEFE1","FCF4DC","FFFECF","EBFFD9","D9FFE9","E0FFFF","E8F4FF","ECF4FC","EAE6F4","FFF5FE","FCF0F7"],["F4CCCC","FCE5CD","FFF1C2","FFFDA1","D5FCB1","B5F7D0","BFFFFF","D6ECFF","CFE2F3","D9D1E9","FFE3FD","FFD9F0"],["EA9899","F9CB9C","FFE48C","F7F56F","B9F77E","84F0B1","83F7F7","B5DAFF","9FC5E8","B4A7D6","FAB9F6","FFADDE"],["E06666","F6B26B","DEB737","E0DE51","8FDB48","52D189","4EDEDB","76ACE3","6FA8DC","8E7CC3","E07EDA","F26DBD"],["CC0814","E69138","AB8816","B5B20E","6BAB30","27A85F","1BA8A6","3C81C7","3D85C6","674EA7","A14F9D","BF4990"],["99050C","B45F17","80650E","737103","395E14","10783D","13615E","094785","0A5394","351C75","780172","782C5A"]],this.defaults=w2utils.extend({},this.defaults,{advanced:!1,transparent:!0,position:"top|bottom",class:"w2ui-white",color:"",liveUpdate:!0,arrowSize:12,autoResize:!1,anchorClass:"w2ui-focus",autoShowOn:"focus",hideOn:["doc-click","focus-change"],onSelect:null,onLiveUpdate:null})}attach(e,t){let i;arguments.length==1&&e.anchor?e=(i=e).anchor:arguments.length===2&&t!=null&&typeof t=="object"&&((i=t).anchor=e),t=i.hideOn,i=w2utils.extend({},this.defaults,i||{}),t&&(i.hideOn=t),i.style+="; padding: 0;",i.transparent&&this.palette[0][1]=="333333"&&(this.palette[0].splice(1,1),this.palette[0].push("")),i.transparent||this.palette[0][1]=="333333"||(this.palette[0].splice(1,0,"333333"),this.palette[0].pop()),i.color&&(i.color=String(i.color).toUpperCase()),typeof i.color=="string"&&i.color.substr(0,1)==="#"&&(i.color=i.color.substr(1)),this.index=[-1,-1];let n=super.attach(i),o=n.overlay;return o.options.html=this.getColorHTML(o.name,i),o.on("show.attach",a=>{var a=a.detail.overlay,l=a.anchor,c=a.options;["INPUT","TEXTAREA"].includes(l.tagName)&&!c.color&&l.value&&(a.tmp.initColor=l.value),delete a.newColor}),o.on("show:after.attach",r=>{var l;var a;(l=n.overlay)!=null&&l.box&&(a=query(n.overlay.box).find(".w2ui-eaction"),w2utils.bindEvents(a,this),this.initControls(n.overlay))}),o.on("update:after.attach",r=>{var l;var a;(l=n.overlay)!=null&&l.box&&(a=query(n.overlay.box).find(".w2ui-eaction"),w2utils.bindEvents(a,this),this.initControls(n.overlay))}),o.on("hide.attach",a=>{var a=a.detail.overlay,c=a.anchor,l=a.newColor??a.options.color??"",c=(["INPUT","TEXTAREA"].includes(c.tagName)&&c.value!=l&&(c.value=l),this.trigger("select",{color:l,target:a.name,overlay:a}));c.isCancelled!==!0&&c.finish()}),n.liveUpdate=r=>(o.on("liveUpdate.attach",a=>{r(a)}),n),n.select=r=>(o.on("select.attach",a=>{r(a)}),n),n}select(e,o){let i;this.index=[-1,-1],typeof o!="string"&&(i=o.target,this.index=query(i).attr("index").split(":"),o=query(i).closest(".w2ui-overlay").attr("name"));var n=this.get(o),o=this.trigger("liveUpdate",{color:e,target:o,overlay:n,param:arguments[1]});o.isCancelled!==!0&&(["INPUT","TEXTAREA"].includes(n.anchor.tagName)&&n.options.liveUpdate&&query(n.anchor).val(e),n.newColor=e,query(n.box).find(".w2ui-selected").removeClass("w2ui-selected"),i&&query(i).addClass("w2ui-selected"),o.finish())}nextColor(e){var t=this.palette;switch(e){case"up":this.index[0]--;break;case"down":this.index[0]++;break;case"right":this.index[1]++;break;case"left":this.index[1]--}return this.index[0]<0&&(this.index[0]=0),this.index[0]>t.length-2&&(this.index[0]=t.length-2),this.index[1]<0&&(this.index[1]=0),this.index[1]>t[0].length-1&&(this.index[1]=t[0].length-1),t[this.index[0]][this.index[1]]}tabClick(e,i){typeof i!="string"&&(i=query(i.target).closest(".w2ui-overlay").attr("name"));var i=this.get(i),n=query(i.box).find(`.w2ui-color-tab:nth-child(${e})`);query(i.box).find(".w2ui-color-tab").removeClass("w2ui-selected"),query(n).addClass("w2ui-selected"),query(i.box).find(".w2ui-tab-content").hide().closest(".w2ui-colors").find(".tab-"+e).show()}getColorHTML(e,t){let i=`
            <div class="w2ui-colors">
                <div class="w2ui-tab-content tab-1">`;for(let o=0;o<this.palette.length;o++){i+='<div class="w2ui-color-row">';for(let r=0;r<this.palette[o].length;r++){var n=this.palette[o][r];let a=n==="FFFFFF"?"; border: 1px solid #efefef":"";i+=`
                    <div class="w2ui-color w2ui-eaction ${n===""?"w2ui-no-color":""} ${t.color==n?"w2ui-selected":""}"
                        style="background-color: #${n+a};" name="${n}" index="${o}:${r}"
                        data-mousedown="select|'${n}'|event" data-mouseup="hide|${e}">&nbsp;
                    </div>`}i+="</div>",o<2&&(i+='<div style="height: 8px"></div>')}return i=(i=(i+="</div>")+`
            <div class="w2ui-tab-content tab-2" style="display: none">
                <div class="color-info">
                    <div class="color-preview-bg"><div class="color-preview"></div><div class="color-original"></div></div>
                    <div class="color-part">
                        <span>H</span> <input class="w2ui-input" name="h" maxlength="3" max="360" tabindex="101">
                        <span>R</span> <input class="w2ui-input" name="r" maxlength="3" max="255" tabindex="104">
                    </div>
                    <div class="color-part">
                        <span>S</span> <input class="w2ui-input" name="s" maxlength="3" max="100" tabindex="102">
                        <span>G</span> <input class="w2ui-input" name="g" maxlength="3" max="255" tabindex="105">
                    </div>
                    <div class="color-part">
                        <span>V</span> <input class="w2ui-input" name="v" maxlength="3" max="100" tabindex="103">
                        <span>B</span> <input class="w2ui-input" name="b" maxlength="3" max="255" tabindex="106">
                    </div>
                    <div class="color-part opacity">
                        <span>${w2utils.lang("Opacity")}</span>
                        <input class="w2ui-input" name="a" maxlength="5" max="1" tabindex="107">
                    </div>
                </div>
                <div class="palette" name="palette">
                    <div class="palette-bg"></div>
                    <div class="value1 move-x move-y"></div>
                </div>
                <div class="rainbow" name="rainbow">
                    <div class="value2 move-x"></div>
                </div>
                <div class="alpha" name="alpha">
                    <div class="alpha-bg"></div>
                    <div class="value2 move-x"></div>
                </div>
            </div>`)+`
            <div class="w2ui-color-tabs">
                <div class="w2ui-color-tab selected w2ui-eaction" data-click="tabClick|1|event|this"><span class="w2ui-icon w2ui-icon-colors"></span></div>
                <div class="w2ui-color-tab w2ui-eaction" data-click="tabClick|2|event|this"><span class="w2ui-icon w2ui-icon-settings"></span></div>
                <div style="padding: 5px; width: 100%; text-align: right;">
                    ${typeof t.html=="string"?t.html:""}
                </div>
            </div>`}initControls(e){let t,i=this;var n=e.options;let o=w2utils.parseColor(n.color||e.tmp.initColor),r=(o==null&&(o={r:140,g:150,b:160,a:1}),w2utils.rgb2hsv(o));n.advanced===!0&&this.tabClick(2,e.name),c(r,!0,!0),query(e.box).find("input").off(".w2color").on("change.w2color",g=>{g=query(g.target);let b=parseFloat(g.val());var w=parseFloat(g.attr("max")),w=(isNaN(b)&&(b=0,g.val(0)),1<w&&(b=parseInt(b)),0<w&&b>w&&(g.val(w),b=w),b<0&&(g.val(0),b=0),g.attr("name")),g={};["r","g","b","a"].indexOf(w)!==-1?(o[w]=b,r=w2utils.rgb2hsv(o)):["h","s","v"].indexOf(w)!==-1&&(g[w]=b),c(g,!0)}),query(e.box).find(".color-original").off(".w2color").on("click.w2color",y=>{y=w2utils.parseColor(query(y.target).css("background-color")),y!=null&&(o=y,c(r=w2utils.rgb2hsv(o),!0))}),n=`${w2utils.isIOS?"touchstart":"mousedown"}.w2color`;let a=`${w2utils.isIOS?"touchend":"mouseup"}.w2color`,l=`${w2utils.isIOS?"touchmove":"mousemove"}.w2color`;function c(y,b,w){var C;y.h!=null&&(r.h=y.h),y.s!=null&&(r.s=y.s),y.v!=null&&(r.v=y.v),y.a!=null&&(o.a=y.a,r.a=y.a);let g="rgba("+(o=w2utils.hsv2rgb(r)).r+","+o.g+","+o.b+","+o.a+")",_=[Number(o.r).toString(16).toUpperCase(),Number(o.g).toString(16).toUpperCase(),Number(o.b).toString(16).toUpperCase(),Math.round(255*Number(o.a)).toString(16).toUpperCase()];var k,O;_.forEach((M,L)=>{M.length===1&&(_[L]="0"+M)}),g=_[0]+_[1]+_[2]+_[3],o.a===1&&(g=_[0]+_[1]+_[2]),query(e.box).find(".color-preview").css("background-color","#"+g),query(e.box).find("input").each(M=>{M.name&&(o[M.name]!=null&&(M.value=o[M.name]),r[M.name]!=null&&(M.value=r[M.name]),M.name==="a")&&(M.value=o.a)}),w?(y=((C=e.tmp)==null?void 0:C.initColor)||g,query(e.box).find(".color-original").css("background-color","#"+y),query(e.box).find(".w2ui-colors .w2ui-selected").removeClass("w2ui-selected"),query(e.box).find(`.w2ui-colors [name="${y}"]`).addClass("w2ui-selected"),g.length==8&&i.tabClick(2,e.name)):i.select(g,e.name),b&&(w=query(e.box).find(".palette .value1"),y=query(e.box).find(".rainbow .value2"),b=query(e.box).find(".alpha .value2"),k=parseInt(w[0].clientWidth)/2,O=parseInt(y[0].clientWidth)/2,w.css({left:150*r.s/100-k+"px",top:125*(100-r.v)/100-k+"px"}),y.css("left",r.h/2.4-O+"px"),b.css("left",150*o.a-O+"px"),u())}function u(){var y=w2utils.hsv2rgb(r.h,100,100),y=`${y.r},${y.g},`+y.b;query(e.box).find(".palette").css("background-image",`linear-gradient(90deg, rgba(${y},0) 0%, rgba(${y},1) 100%)`)}function h(y){query("body").off(".w2color")}function d(_){var O=t.el,g=_.pageX-t.x,_=_.pageY-t.y;let b=t.left+g,w=t.top+_;var g=parseInt(O.prop("clientWidth"))/2,_=(b<-g&&(b=-g),w<-g&&(w=-g),b>t.width-g&&(b=t.width-g),w>t.height-g&&(w=t.height-g),O.hasClass("move-x")&&O.css({left:b+"px"}),O.hasClass("move-y")&&O.css({top:w+"px"}),query(O.get(0).parentNode).attr("name")),k=parseInt(O.css("left"))+g,O=parseInt(O.css("top"))+g;_==="palette"&&c({s:Math.round(k/t.width*100),v:Math.round(100-O/t.height*100)}),_==="rainbow"&&(c({h:Math.round(2.4*k)}),u()),_==="alpha"&&c({a:parseFloat(Number(k/150).toFixed(2))})}query(e.box).find(".palette, .rainbow, .alpha").off(".w2color").on(n+".w2color",function(y){var b=query(this).find(".value1, .value2"),w=parseInt(b.prop("clientWidth"))/2;b.hasClass("move-x")&&b.css({left:y.offsetX-w+"px"}),b.hasClass("move-y")&&b.css({top:y.offsetY-w+"px"}),t={el:b,x:y.pageX,y:y.pageY,width:b.prop("parentNode").clientWidth,height:b.prop("parentNode").clientHeight,left:parseInt(b.css("left")),top:parseInt(b.css("top"))},d(y),query("body").off(".w2color").on(l,d).on(a,h)})}}class MenuTooltip extends Tooltip{constructor(){super(),this.defaults=w2utils.extend({},this.defaults,{type:"normal",items:[],index:null,render:null,spinner:!1,msgNoItems:w2utils.lang("No items found"),topHTML:"",menuStyle:"",filter:!1,markSearch:!1,match:"contains",search:!1,altRows:!1,arrowSize:10,align:"left",position:"bottom|top",class:"w2ui-white",anchorClass:"w2ui-focus",autoShowOn:"focus",hideOn:["doc-click","focus-change","select"],onSelect:null,onSubMenu:null,onRemove:null})}attach(e,t){let i;arguments.length==1&&e.anchor?e=(i=e).anchor:arguments.length===2&&t!=null&&typeof t=="object"&&((i=t).anchor=e),t=i.hideOn,i=w2utils.extend({},this.defaults,i||{}),t&&(i.hideOn=t),i.style+="; padding: 0;",i.items==null&&(i.items=[]),i.html=this.getMenuHTML(i);let n=super.attach(i),o=n.overlay;return o.on("show:after.attach, update:after.attach",r=>{var l;if((l=n.overlay)!=null&&l.box){let c="";o.selected=null,o.options.items=w2utils.normMenu(o.options.items),["INPUT","TEXTAREA"].includes(o.anchor.tagName)&&(c=o.anchor.value,o.selected=o.anchor.dataset.selectedIndex);var a=query(n.overlay.box).find(".w2ui-eaction");w2utils.bindEvents(a,this),this.applyFilter(o.name,null,c).then(u=>{o.tmp.searchCount=u.count,o.tmp.search=u.search,this.refreshSearch(o.name),this.initControls(n.overlay),this.refreshIndex(o.name)})}}),o.on("hide:after.attach",r=>{w2tooltip.hide(o.name+"-tooltip")}),n.select=r=>(o.on("select.attach",a=>{r(a)}),n),n.remove=r=>(o.on("remove.attach",a=>{r(a)}),n),n.subMenu=r=>(o.on("subMenu.attach",a=>{r(a)}),n),n}update(e,t){var i,n=Tooltip.active[e];n?((i=n.options).items!=t&&(i.items=t),t=this.getMenuHTML(i),i.html!=t&&(i.html=t,n.needsUpdate=!0,this.show(e))):console.log(`Tooltip "${e}" is not displayed. Cannot update it.`)}initControls(e){query(e.box).find(".w2ui-menu:not(.w2ui-sub-menu)").off(".w2menu").on("mouseDown.w2menu",{delegate:".w2ui-menu-item"},t=>{var i=t.delegate.dataset;this.menuDown(e,t,i.index,i.parents)}).on((w2utils.isIOS?"touchStart":"click")+".w2menu",{delegate:".w2ui-menu-item"},t=>{var i=t.delegate.dataset;this.menuClick(e,t,parseInt(i.index),i.parents)}).find(".w2ui-menu-item").off(".w2menu").on("mouseEnter.w2menu",t=>{var n;var i=t.target.dataset,i=(n=e.options.items[i.index])==null?void 0:n.tooltip;i&&w2tooltip.show({name:e.name+"-tooltip",anchor:t.target,html:i,position:"right|left",hideOn:["doc-click"]})}).on("mouseLeave.w2menu",t=>{w2tooltip.hide(e.name+"-tooltip")}),["INPUT","TEXTAREA"].includes(e.anchor.tagName)&&query(e.anchor).off(".w2menu").on("input.w2menu",t=>{}).on("keyup.w2menu",t=>{t._searchType="filter",this.keyUp(e,t)}),e.options.search&&query(e.box).find("#menu-search").off(".w2menu").on("keyup.w2menu",t=>{t._searchType="search",this.keyUp(e,t)})}getCurrent(a,o){var a=Tooltip.active[a.replace(/[\s\.#]/g,"_")],i=a.options;let n=(o||(a.selected??"")).split("-");var o=n.length-1,a=n[o],r=n.slice(0,n.length-1).join("-"),a=w2utils.isInt(a)?parseInt(a):0;let l=i.items;return n.forEach((c,u)=>{u<n.length-1&&(l=l[c].items)}),{last:o,index:a,items:l,item:l[a],parents:r}}getMenuHTML(e,t,i,n){if(e.spinner)return`
            <div class="w2ui-menu">
                <div class="w2ui-no-items">
                    <div class="w2ui-spinner"></div>
                    ${w2utils.lang("Loading...")}
                </div>
            </div>`;n=n||[],t==null&&(t=e.items),Array.isArray(t)||(t=[]);let o=0,r=null,a="",l=(!i&&e.search&&(a+=`
                <div class="w2ui-menu-search">
                    <span class="w2ui-icon w2ui-icon-search"></span>
                    <input id="menu-search" class="w2ui-input" type="text"/>
                </div>`,t.forEach(c=>c.hidden=!1)),!i&&e.topHTML&&(a+=`<div class="w2ui-menu-top">${e.topHTML}</div>`),`
            ${a}
            <div class="w2ui-menu ${i?"w2ui-sub-menu":""}" ${i?"":`style="${e.menuStyle}"`}
                data-parent="${n}">
        `);return t.forEach((c,u)=>{r=c.icon;var h=(0<n.length?n.join("-")+"-":"")+u;if(r==null&&(r=null),["radio","check"].indexOf(e.type)==-1||Array.isArray(c.items)||c.group===!1||(r=c.checked===!0?"w2ui-icon-check":"w2ui-icon-empty"),c.hidden!==!0){let y=c.text,b="",w="";if(typeof(y=typeof e.render=="function"?e.render(c,e):y)=="function"&&(y=y(c,e)),r&&(String(r).slice(0,1)!=="<"&&(r=`<span class="w2ui-icon ${r}"></span>`),b=`<div class="menu-icon">${r}</span></div>`),c.type!=="break"&&y!=null&&y!==""&&String(y).substr(0,2)!="--"){var d=["w2ui-menu-item"];e.altRows==1&&d.push(o%2==0?"w2ui-even":"w2ui-odd");let g=1,_=(b===""&&g++,c.count==null&&c.hotkey==null&&c.remove!==!0&&c.items==null&&g++,c.tooltip==null&&c.hint!=null&&(c.tooltip=c.hint),"");if(c.remove===!0)_='<span class="remove">x</span>';else if(c.items!=null){let k=[];typeof c.items=="function"?k=c.items(c):Array.isArray(c.items)&&(k=c.items),_="<span></span>",w=`
                            <div class="w2ui-sub-menu-box" style="${c.expanded?"":"display: none"}">
                                ${this.getMenuHTML(e,k,!0,n.concat(u))}
                            </div>`}else c.count!=null&&(_+="<span>"+c.count+"</span>"),c.hotkey!=null&&(_+='<span class="hotkey">'+c.hotkey+"</span>");c.disabled===!0&&d.push("w2ui-disabled"),c._noSearchInside===!0&&d.push("w2ui-no-search-inside"),w!==""&&(d.push("has-sub-menu"),c.expanded?d.push("expanded"):d.push("collapsed")),l+=`
                        <div index="${h}" class="${d.join(" ")}" style="${c.style||""}"
                            data-index="${u}" data-parents="${n.join("-")}">
                                <div style="width: ${(i?20:0)+parseInt(c.indent??0)}px"></div>
                                ${b}
                                <div class="menu-text" colspan="${g}">${w2utils.lang(y)}</div>
                                <div class="menu-extra">${_}</div>
                        </div>
                        `+w,o++}else d=(y??"").replace(/^-+/g,""),l+=`
                        <div index="${h}" class="w2ui-menu-divider ${d!=""?"has-text":""}">
                            <div class="line"></div>
                            ${d?`<div class="text">${d}</div>`:""}
                        </div>`}t[u]=c}),o===0&&e.msgNoItems&&(l+=`
                <div class="w2ui-no-items">
                    ${w2utils.lang(e.msgNoItems)}
                </div>`),l+="</div>"}refreshIndex(n){var t,i,n=Tooltip.active[n.replace(/[\s\.#]/g,"_")];n&&(n.displayed||this.show(n.name),t=query(n.box).find(".w2ui-overlay-body").get(0),i=query(n.box).find(".w2ui-menu-search, .w2ui-menu-top").get(0),query(n.box).find(".w2ui-menu-item.w2ui-selected").removeClass("w2ui-selected"),n=query(n.box).find(`.w2ui-menu-item[index="${n.selected}"]`).addClass("w2ui-selected").get(0))&&(n.offsetTop+n.clientHeight>t.clientHeight+t.scrollTop&&n.scrollIntoView({behavior:"smooth",block:"start",inline:"start"}),n.offsetTop<t.scrollTop+(i?i.clientHeight:0))&&n.scrollIntoView({behavior:"smooth",block:"end",inline:"end"})}refreshSearch(e){var i,n;let t=Tooltip.active[e.replace(/[\s\.#]/g,"_")];t&&(t.displayed||this.show(t.name),query(t.box).find(".w2ui-no-items").hide(),query(t.box).find(".w2ui-menu-item, .w2ui-menu-divider").each(o=>{var a,l;var r;(a=this.getCurrent(e,o.getAttribute("index")).item)!=null&&a.hidden?query(o).hide():((r=(l=t.tmp)==null?void 0:l.search)&&t.options.markSearch&&w2utils.marker(o,r,{onlyFirst:t.options.match=="begins"}),query(o).show())}),query(t.box).find(".w2ui-sub-menu").each(o=>{var r=query(o).find(".w2ui-menu-item").get().some(a=>a.style.display!="none");this.getCurrent(e,o.dataset.parent).item.expanded&&(r?query(o).parent().show():query(o).parent().hide())}),t.tmp.searchCount!=0&&((n=(i=t.options)==null?void 0:i.items)==null?void 0:n.length)!=0||(query(t.box).find(".w2ui-no-items").length==0&&query(t.box).find(".w2ui-menu:not(.w2ui-sub-menu)").append(`
                    <div class="w2ui-no-items">
                        ${w2utils.lang(t.options.msgNoItems)}
                    </div>`),query(t.box).find(".w2ui-no-items").show()))}applyFilter(e,t,i,n){var y;let o=0;var r=Tooltip.active[e.replace(/[\s\.#]/g,"_")];let a=r.options,l,c;var u=new Promise((b,w)=>{l=b,c=w});i==null&&(i=["INPUT","TEXTAREA"].includes(r.anchor.tagName)?r.anchor.value:"");let h=[];a.selected&&(Array.isArray(a.selected)?h=a.selected.map(b=>(b==null?void 0:b.id)??b):(y=a.selected)!=null&&y.id&&(h=[a.selected.id])),r.tmp.activeChain=null;var d=r.tmp.remote??{hasMore:!0,emtpySet:!1,search:null,total:-1};if(t==null&&a.url&&d.hasMore&&d.search!==i){let b=!0,w=w2utils.lang("Loading...");i.length<a.minLength&&d.emptySet!==!0&&(w=w2utils.lang("${count} letters or more...",{count:a.minLength}),b=!1,i==="")&&(w=w2utils.lang(a.msgSearch)),query(r.box).find(".w2ui-no-items").html(w),d.search=i,a.items=[],r.tmp.remote=d,b&&this.request(r,i,n).then(g=>{this.update(e,g),this.applyFilter(e,null,i).then(_=>{l(_)})}).catch(g=>{console.log("Server Request error",g)})}else{let b;t==null&&(b=this.trigger("search",{search:i,overlay:r,prom:u,resolve:l,reject:c})).isCancelled===!0||(t==null&&(t=r.options.items),a.filter===!1?l({count:-1,search:i}):(t.forEach(w=>{let g="",_="";["is","begins","begins with"].indexOf(a.match)!==-1&&(g="^"),["is","ends","ends with"].indexOf(a.match)!==-1&&(_="$");try{new RegExp(g+i+_,"i").test(w.text)||w.text==="..."?w.hidden=!1:w.hidden=!0}catch{}a.hideSelected&&h.includes(w.id)&&(w.hidden=!0),Array.isArray(w.items)&&0<w.items.length&&(delete w._noSearchInside,this.applyFilter(e,w.items,i).then(k=>{k=k.count,0<k&&(o+=k,w.hidden&&(w._noSearchInside=!0),i&&(w.expanded=!0),w.hidden=!1)})),w.hidden!==!0&&o++}),l({count:o,search:i}),b==null||b.finish()))}return u}request(e,t,i){let n=e.options,o=e.tmp.remote,r,a;return(n.items.length===0&&o.total!==0||o.total==n.cacheMax&&t.length>o.search.length||t.length>=o.search.length&&t.substr(0,o.search.length)!==o.search||t.length<o.search.length)&&(o.controller&&o.controller.abort(),o.loading=!0,clearTimeout(o.timeout),o.timeout=setTimeout(()=>{var l=n.url;let c={search:t,max:n.cacheMax};Object.assign(c,n.postData);var u,h=this.trigger("request",{search:t,overlay:e,url:l,postData:c,httpMethod:n.method??"GET",httpHeaders:{}});h.isCancelled!==!0&&(l=new URL(h.detail.url,location),u=w2utils.prepareParams(l,{method:h.detail.httpMethod,headers:h.detail.httpHeaders,body:h.detail.postData}),o.controller=new AbortController,u.signal=o.controller.signal,fetch(l,u).then(d=>d.json()).then(d=>{o.controller=null;var y=e.trigger("load",{search:c.search,overlay:e,data:d});y.isCancelled!==!0&&(typeof(d=y.detail.data)=="string"&&(d=JSON.parse(d)),(d=Array.isArray(d)?{records:d}:d).records==null&&d.items!=null&&(d.records=d.items,delete d.items),d.error||d.records!=null||(d.records=[]),Array.isArray(d.records)?(d.records.length>=n.cacheMax?(d.records.splice(n.cacheMax,d.records.length),o.hasMore=!0):o.hasMore=!1,n.recId==null&&n.recid!=null&&(n.recId=n.recid),(n.recId||n.recText)&&d.records.forEach(b=>{typeof n.recId=="string"&&(b.id=b[n.recId]),typeof n.recId=="function"&&(b.id=n.recId(b)),typeof n.recText=="string"&&(b.text=b[n.recText]),typeof n.recText=="function"&&(b.text=n.recText(b))}),o.loading=!1,o.search=t,o.total=d.records.length,o.lastError="",o.emptySet=t===""&&d.records.length===0,y.finish(),r(w2utils.normMenu(d.records))):console.error("ERROR: server did not return proper data structure",`
`," - it should return",{records:[{id:1,text:"item"}]},`
`," - or just an array ",[{id:1,text:"item"}],`
`," - or if errorr ",{error:!0,message:"error message"}))}).catch(d=>{var y=this.trigger("error",{overlay:e,search:t,error:d});y.isCancelled!==!0&&((d==null?void 0:d.name)!=="AbortError"&&console.error("ERROR: Server communication failed.",`
`," - it should return",{records:[{id:1,text:"item"}]},`
`," - or just an array ",[{id:1,text:"item"}],`
`," - or if errorr ",{error:!0,message:"error message"}),o.loading=!1,o.search="",o.total=-1,o.emptySet=!0,o.lastError=y.detail.error||"Server communication failed",n.items=[],y.finish(),a())}),h.finish())},i?n.debounce??350:0)),new Promise((l,c)=>{r=l,a=c})}getActiveChain(e,t,i=[],n=[],o){var r=Tooltip.active[e.replace(/[\s\.#]/g,"_")];return r.tmp.activeChain!=null?r.tmp.activeChain:((t=t??r.options.items).forEach((a,l)=>{var c;a.hidden||a.disabled||(c=a==null?void 0:a.text)!=null&&c.startsWith("--")||(n.push(i.concat([l]).join("-")),Array.isArray(a.items)&&0<a.items.length&&a.expanded&&(i.push(l),this.getActiveChain(e,a.items,i,n,!0),i.pop()))}),o==null&&(r.tmp.activeChain=n),n)}menuDown(e,t,i,n){e=e.options;let o=e.items;var r=query(t.delegate).find(".w2ui-icon");let a=query(t.target).closest(".w2ui-menu:not(.w2ui-sub-menu)"),l=(typeof n=="string"&&n!==""&&n.split("-").forEach(c=>{o=o[c].items}),o[i]);if(!l.disabled){let c=(u,h)=>{u.forEach((d,y)=>{d.id!=l.id&&(d.group===l.group&&d.checked&&(a.find(`.w2ui-menu-item[index="${(h?h+"-":"")+y}"] .w2ui-icon`).removeClass("w2ui-icon-check").addClass("w2ui-icon-empty"),u[y].checked=!1),Array.isArray(d.items))&&c(d.items,y)})};e.type!=="check"&&e.type!=="radio"||l.group===!1||query(t.target).hasClass("remove")||query(t.target).closest(".w2ui-menu-item").hasClass("has-sub-menu")||(l.checked=e.type=="radio"||!l.checked,l.checked?(e.type==="radio"&&query(t.target).closest(".w2ui-menu").find(".w2ui-icon").removeClass("w2ui-icon-check").addClass("w2ui-icon-empty"),e.type==="check"&&l.group!=null&&c(e.items),r.removeClass("w2ui-icon-empty").addClass("w2ui-icon-check")):e.type==="check"&&r.removeClass("w2ui-icon-check").addClass("w2ui-icon-empty")),query(t.target).hasClass("remove")||(a.find(".w2ui-menu-item").removeClass("w2ui-selected"),query(t.delegate).addClass("w2ui-selected"))}}menuClick(e,t,i,n){var o=e.options;let r=o.items;var a=query(t.delegate).closest(".w2ui-menu-item");let l=!o.hideOn.includes("select");(t.shiftKey||t.metaKey||t.ctrlKey)&&(l=!0),typeof n=="string"&&n!==""?n.split("-").forEach(u=>{r=r[u].items}):n=null;var c=(r=typeof r=="function"?r({overlay:e,index:i,parentIndex:n,event:t}):r)[i];if(!c.disabled||query(t.target).hasClass("remove")){let u;if(query(t.target).hasClass("remove")){if((u=this.trigger("remove",{originalEvent:t,target:e.name,overlay:e,item:c,index:i,parentIndex:n,el:a[0]})).isCancelled===!0)return;l=!o.hideOn.includes("item-remove"),a.remove()}else if(a.hasClass("has-sub-menu")){if((u=this.trigger("subMenu",{originalEvent:t,target:e.name,overlay:e,item:c,index:i,parentIndex:n,el:a[0]})).isCancelled===!0)return;l=!0,a.hasClass("expanded")?(c.expanded=!1,a.removeClass("expanded").addClass("collapsed"),query(a.get(0).nextElementSibling).hide()):(c.expanded=!0,a.addClass("expanded").removeClass("collapsed"),query(a.get(0).nextElementSibling).show()),e.selected=parseInt(a.attr("index"))}else{if(o=this.findChecked(o.items),e.selected=parseInt(a.attr("index")),(u=this.trigger("select",{originalEvent:t,target:e.name,overlay:e,item:c,index:i,parentIndex:n,selected:o,keepOpen:l,el:a[0]})).isCancelled===!0)return;c.keepOpen!=null&&(l=c.keepOpen),["INPUT","TEXTAREA"].includes(e.anchor.tagName)&&(e.anchor.dataset.selected=c.id,e.anchor.dataset.selectedIndex=e.selected)}l||this.hide(e.name),u.finish()}}findChecked(e){let t=[];return e.forEach(i=>{i.checked&&t.push(i),Array.isArray(i.items)&&(t=t.concat(this.findChecked(i.items)))}),t}keyUp(e,t){var u,h;var i=e.options,n=t.target.value;let o=!0,r=!1;switch(t.keyCode){case 46:case 8:n!==""||e.displayed||(o=!1);break;case 13:if(!e.displayed||!e.selected)return;var{index:l,parents:a}=this.getCurrent(e.name);t.delegate=query(e.box).find(".w2ui-selected").get(0),this.menuClick(e,t,parseInt(l),a),o=!1;break;case 27:o=!1,e.displayed?this.hide(e.name):(l=e.anchor,["INPUT","TEXTAREA"].includes(l.tagName)&&(l.value="",delete l.dataset.selected,delete l.dataset.selectedIndex));break;case 37:{if(!e.displayed)return;let{item:d,index:y,parents:b}=this.getCurrent(e.name);b&&(d=i.items[b],y=parseInt(b),b="",r=!0),Array.isArray(d==null?void 0:d.items)&&0<d.items.length&&d.expanded&&(t.delegate=query(e.box).find(`.w2ui-menu-item[index="${y}"]`).get(0),e.selected=y,this.menuClick(e,t,parseInt(y),b)),o=!1;break}case 39:if(!e.displayed)return;var{item:a,index:l,parents:c}=this.getCurrent(e.name);Array.isArray(a==null?void 0:a.items)&&0<a.items.length&&!a.expanded&&(t.delegate=query(e.box).find(".w2ui-selected").get(0),this.menuClick(e,t,parseInt(l),c)),o=!1;break;case 38:e.displayed&&(a=this.getActiveChain(e.name),e.selected==null||((u=e.selected)==null?void 0:u.length)==0?e.selected=a[a.length-1]:((l=a.indexOf(e.selected))==-1&&(e.selected=a[a.length-1]),0<l&&(e.selected=a[l-1])),o=!1,r=!0,t.preventDefault());break;case 40:e.displayed&&(c=this.getActiveChain(e.name),e.selected==null||((h=e.selected)==null?void 0:h.length)==0?e.selected=c[0]:((a=c.indexOf(e.selected))==-1&&(e.selected=c[0]),a<c.length-1&&(e.selected=c[a+1])),o=!1,r=!0,t.preventDefault())}o&&e.displayed&&(i.filter&&t._searchType=="filter"||i.search&&t._searchType=="search")&&this.applyFilter(e.name,null,n,!0).then(d=>{e.tmp.searchCount=d.count,e.tmp.search=d.search,d.count!==0&&this.getActiveChain(e.name).includes(e.selected)||(e.selected=null),this.refreshSearch(e.name)}),r&&this.refreshIndex(e.name)}}class DateTooltip extends Tooltip{constructor(){super();var e=new Date;this.daysCount=[31,28,31,30,31,30,31,31,30,31,30,31],this.today=e.getFullYear()+"/"+(Number(e.getMonth())+1)+"/"+e.getDate(),this.defaults=w2utils.extend({},this.defaults,{position:"top|bottom",class:"w2ui-calendar",type:"date",format:"",value:"",start:null,end:null,blockDates:[],blockWeekdays:[],colored:{},arrowSize:12,autoResize:!1,anchorClass:"w2ui-focus",autoShowOn:"focus",hideOn:["doc-click","focus-change"],onSelect:null})}attach(o,n){let i;arguments.length==1&&o.anchor?o=(i=o).anchor:arguments.length===2&&n!=null&&typeof n=="object"&&((i=n).anchor=o);var n=i.hideOn,o=(i=w2utils.extend({},this.defaults,i||{}),n&&(i.hideOn=n),i.format||(o=w2utils.settings.dateFormat,n=w2utils.settings.timeFormat,i.type=="date"?i.format=o:i.type=="time"?i.format=n:i.format=o+"|"+n),i.type=="time"?this.getHourHTML(i):this.getMonthHTML(i));i.style+="; padding: 0;",i.html=o.html;let r=super.attach(i),a=r.overlay;return Object.assign(a.tmp,o),a.on("show.attach",c=>{var c=c.detail.overlay,u=c.anchor,h=c.options;["INPUT","TEXTAREA"].includes(u.tagName)&&!h.value&&u.value&&(c.tmp.initValue=u.value),delete c.newValue,delete c.newDate}),a.on("show:after.attach",l=>{var c;(c=r.overlay)!=null&&c.box&&this.initControls(r.overlay)}),a.on("update:after.attach",l=>{var c;(c=r.overlay)!=null&&c.box&&this.initControls(r.overlay)}),a.on("hide.attach",c=>{var c=c.detail.overlay,u=c.anchor;c.newValue!=null&&(c.newDate&&(c.newValue=c.newDate+" "+c.newValue),["INPUT","TEXTAREA"].includes(u.tagName)&&u.value!=c.newValue&&(u.value=c.newValue),(u=this.trigger("select",{date:c.newValue,target:c.name,overlay:c})).isCancelled!==!0)&&u.finish()}),r.select=l=>(a.on("select.attach",c=>{l(c)}),r),r}initControls(e){let t=e.options,i=o=>{let{month:r,year:a}=e.tmp;12<(r+=o)&&(r=1,a++),r<1&&(r=12,a--),o=this.getMonthHTML(t,r,a),Object.assign(e.tmp,o),query(e.box).find(".w2ui-overlay-body").html(o.html),this.initControls(e)},n=(o,r)=>{query(o.target).parent().find(".w2ui-jump-month, .w2ui-jump-year").removeClass("w2ui-selected"),query(o.target).addClass("w2ui-selected"),o=new Date;let{jumpMonth:a,jumpYear:l}=e.tmp;(a=r&&(l==null&&(l=o.getFullYear()),a==null)?o.getMonth()+1:a)&&l&&(r=this.getMonthHTML(t,a,l),Object.assign(e.tmp,r),query(e.box).find(".w2ui-overlay-body").html(r.html),e.tmp.jump=!1,this.initControls(e))};query(e.box).find(".w2ui-cal-title").off(".calendar").on("click.calendar",o=>{var r,a;Object.assign(e.tmp,{jumpYear:null,jumpMonth:null}),e.tmp.jump?({month:r,year:a}=e.tmp,r=this.getMonthHTML(t,r,a),query(e.box).find(".w2ui-overlay-body").html(r.html),e.tmp.jump=!1):(query(e.box).find(".w2ui-overlay-body .w2ui-cal-days").replace(this.getYearHTML()),(a=query(e.box).find(`[name="${e.tmp.year}"]`).get(0))&&a.scrollIntoView(!0),e.tmp.jump=!0),this.initControls(e),o.stopPropagation()}).find(".w2ui-cal-previous").off(".calendar").on("click.calendar",o=>{i(-1),o.stopPropagation()}).parent().find(".w2ui-cal-next").off(".calendar").on("click.calendar",o=>{i(1),o.stopPropagation()}),query(e.box).find(".w2ui-cal-now").off(".calendar").on("click.calendar",o=>{t.type=="datetime"?e.newDate?e.newValue=w2utils.formatTime(new Date,t.format.split("|")[1]):e.newValue=w2utils.formatDateTime(new Date,t.format):t.type=="date"?e.newValue=w2utils.formatDate(new Date,t.format):t.type=="time"&&(e.newValue=w2utils.formatTime(new Date,t.format)),this.hide(e.name)}),query(e.box).off(".calendar").on("click.calendar",{delegate:".w2ui-day.w2ui-date"},o=>{t.type=="datetime"?(e.newDate=query(o.target).attr("date"),query(e.box).find(".w2ui-overlay-body").html(this.getHourHTML(e.options).html),this.initControls(e)):(e.newValue=query(o.target).attr("date"),this.hide(e.name))}).on("click.calendar",{delegate:".w2ui-jump-month"},o=>{e.tmp.jumpMonth=parseInt(query(o.target).attr("name")),n(o)}).on("dblclick.calendar",{delegate:".w2ui-jump-month"},o=>{e.tmp.jumpMonth=parseInt(query(o.target).attr("name")),n(o,!0)}).on("click.calendar",{delegate:".w2ui-jump-year"},o=>{e.tmp.jumpYear=parseInt(query(o.target).attr("name")),n(o)}).on("dblclick.calendar",{delegate:".w2ui-jump-year"},o=>{e.tmp.jumpYear=parseInt(query(o.target).attr("name")),n(o,!0)}).on("click.calendar",{delegate:".w2ui-time.hour"},r=>{var r=query(r.target).attr("hour");let a=this.str2min(t.value)%60;e.tmp.initValue&&!t.value&&(a=this.str2min(e.tmp.initValue)%60),t.noMinutes?(e.newValue=this.min2str(60*r,t.format),this.hide(e.name)):(e.newValue=r+":"+a,r=this.getMinHTML(r,t).html,query(e.box).find(".w2ui-overlay-body").html(r),this.initControls(e))}).on("click.calendar",{delegate:".w2ui-time.min"},o=>{o=60*Math.floor(this.str2min(e.newValue)/60)+parseInt(query(o.target).attr("min")),e.newValue=this.min2str(o,t.format),this.hide(e.name)})}getMonthHTML(e,t,i){var r=w2utils.settings.fulldays.slice(),n=w2utils.settings.shortdays.slice();w2utils.settings.weekStarts!=="M"&&(r.unshift(r.pop()),n.unshift(n.pop()));let o=new Date;var r=e.type==="datetime"?w2utils.isDateTime(e.value,e.format,!0):w2utils.isDate(e.value,e.format,!0),a=w2utils.formatDate(r);t!=null&&i!=null||(i=(r||o).getFullYear(),t=r?r.getMonth()+1:o.getMonth()+1),12<t&&(t-=12,i++),(t<1||t===0)&&(t+=12,i--),i/4==Math.floor(i/4)?this.daysCount[1]=29:this.daysCount[1]=28,e.current=t+"/"+i;let l=(o=new Date(i,t-1,1)).getDay(),c="";var u=w2utils.settings.weekStarts;for(let k=0;k<n.length;k++){var h=u=="M"&&k==5||u!="M"&&k==6,d=u=="M"&&k==6||u!="M"&&k==0;c+=`<div class="w2ui-day w2ui-weekday ${h?"w2ui-sunday":""} ${d?"w2ui-saturday":""}">${n[k]}</div>`}let y=`
            <div class="w2ui-cal-title">
                <div class="w2ui-cal-previous">
                    <div></div>
                </div>
                <div class="w2ui-cal-next">
                    <div></div>
                </div>
                ${w2utils.settings.fullmonths[t-1]}, ${i}
                <span class="arrow-down"></span>
            </div>
            <div class="w2ui-cal-days">
                ${c}
        `,b=new Date(i+`/${t}/1`);r=(b=new Date(b.getTime()+432e5)).getDay(),w2utils.settings.weekStarts=="M"&&l--,0<r&&(b=new Date(b.getTime()-864e5*l));for(let k=0;k<42;k++){var w=[],g=`${b.getFullYear()}/${b.getMonth()+1}/`+b.getDate(),_=(b.getDay()===6&&w.push("w2ui-saturday"),b.getDay()===0&&w.push("w2ui-sunday"),b.getMonth()+1!==t&&w.push("outside"),g==this.today&&w.push("w2ui-today"),b.getDate());let O="",C="",M,L;L=e.type==="datetime"?(M=w2utils.formatDateTime(g,e.format),w2utils.formatDate(g,w2utils.settings.dateFormat)):M=w2utils.formatDate(g,e.format),e.colored&&e.colored[L]!==void 0&&(g=e.colored[L].split("|"),C="background-color: "+g[0]+";",O="color: "+g[1]+";"),y+=`<div class="w2ui-day ${this.inRange(M,e,!0)?"w2ui-date "+(L==a?"w2ui-selected":""):"w2ui-blocked"} ${w.join(" ")}"
                       style="${O+C}" date="${L}" data-date="${b.getTime()}">
                            ${_}
                    </div>`,b=new Date(b.getTime()+864e5)}return y+="</div>",e.btnNow&&(r=w2utils.lang("Today"+(e.type=="datetime"?" & Now":"")),y+=`<div class="w2ui-cal-now">${r}</div>`),{html:y,month:t,year:i}}getYearHTML(){let e="",t="";for(let i=0;i<w2utils.settings.fullmonths.length;i++)e+=`<div class="w2ui-jump-month" name="${i+1}">${w2utils.settings.shortmonths[i]}</div>`;for(let i=w2utils.settings.dateStartYear;i<=w2utils.settings.dateEndYear;i++)t+=`<div class="w2ui-jump-year" name="${i}">${i}</div>`;return`<div class="w2ui-cal-jump">
            <div id="w2ui-jump-month">${e}</div>
            <div id="w2ui-jump-year">${t}</div>
        </div>`}getHourHTML(e){(e=e??{}).format||(e.format=w2utils.settings.timeFormat);var t=-1<e.format.indexOf("h24"),i=e.value||(e.anchor?e.anchor.value:""),n=[];for(let a=0;a<24;a++){let l=(12<=a&&!t?a-12:a)+":00"+(t?"":a<12?" am":" pm"),c=(a!=12||t||(l="12:00 pm"),n[Math.floor(a/8)]||(n[Math.floor(a/8)]=""),this.min2str(this.str2min(l))),u=this.min2str(this.str2min(l)+59);e.type==="datetime"&&(r=w2utils.isDateTime(i,e.format,!0),o=e.format.split("|")[0].trim(),c=w2utils.formatDate(r,o)+" "+c,u=w2utils.formatDate(r,o)+" "+u);var o,r=this.inRange(c,e)||this.inRange(u,e);n[Math.floor(a/8)]+=`<span hour="${a}"
                class="hour ${r?"w2ui-time ":"w2ui-blocked"}">${l}</span>`}return{html:`<div class="w2ui-calendar">
            <div class="w2ui-time-title">${w2utils.lang("Select Hour")}</div>
            <div class="w2ui-cal-time">
                <div class="w2ui-cal-column">${n[0]}</div>
                <div class="w2ui-cal-column">${n[1]}</div>
                <div class="w2ui-cal-column">${n[2]}</div>
            </div>
            ${e.btnNow?`<div class="w2ui-cal-now">${w2utils.lang("Now")}</div>`:""}
        </div>`}}getMinHTML(e,t){e==null&&(e=0),(t=t??{}).format||(t.format=w2utils.settings.timeFormat);var i=-1<t.format.indexOf("h24"),n=t.value||(t.anchor?t.anchor.value:""),o=[];for(let u=0;u<60;u+=5){var r=(12<e&&!i?e-12:e)+":"+(u<10?0:"")+u+" "+(i?"":e<12?"am":"pm");let h=r;var a,l,c=u<20?0:u<40?1:2;o[c]||(o[c]=""),t.type==="datetime"&&(a=w2utils.isDateTime(n,t.format,!0),l=t.format.split("|")[0].trim(),h=w2utils.formatDate(a,l)+" "+h),o[c]+=`<span min="${u}" class="min ${this.inRange(h,t)?"w2ui-time ":"w2ui-blocked"}">${r}</span>`}return{html:`<div class="w2ui-calendar">
            <div class="w2ui-time-title">${w2utils.lang("Select Minute")}</div>
            <div class="w2ui-cal-time">
                <div class="w2ui-cal-column">${o[0]}</div>
                <div class="w2ui-cal-column">${o[1]}</div>
                <div class="w2ui-cal-column">${o[2]}</div>
            </div>
            ${t.btnNow?`<div class="w2ui-cal-now">${w2utils.lang("Now")}</div>`:""}
        </div>`}}inRange(e,t,i){let n=!1;if(t.type==="date"){var o=w2utils.isDate(e,t.format,!0);if(o){if(t.start||t.end){var r=typeof t.start=="string"?t.start:query(t.start).val(),a=typeof t.end=="string"?t.end:query(t.end).val();let l=w2utils.isDate(r,t.format,!0),c=w2utils.isDate(a,t.format,!0);r=new Date(o),l=l||r,c=c||r,r>=l&&r<=c&&(n=!0)}else n=!0;Array.isArray(t.blockDates)&&t.blockDates.includes(e)&&(n=!1),Array.isArray(t.blockWeekdays)&&t.blockWeekdays.includes(o.getDay())&&(n=!1)}}else if(t.type==="time")if(t.start||t.end){a=this.str2min(e);let l=this.str2min(t.start),c=this.str2min(t.end);l=l||a,c=c||a,a>=l&&a<=c&&(n=!0)}else n=!0;else t.type==="datetime"&&(r=w2utils.isDateTime(e,t.format,!0))&&(o=t.format.split("|").map(l=>l.trim()),i?(a=w2utils.formatDate(r,o[0]),e=w2utils.extend({},t,{type:"date",format:o[0]}),this.inRange(a,e)&&(n=!0)):(i=w2utils.formatTime(r,o[1]),a={type:"time",format:o[1],start:t.startTime,end:t.endTime},this.inRange(i,a)&&(n=!0)));return n}str2min(e){var t;return typeof e!="string"||(t=e.split(":")).length!==2?null:(t[0]=parseInt(t[0]),t[1]=parseInt(t[1]),e.indexOf("pm")!==-1&&t[0]!==12&&(t[0]+=12),e.includes("am")&&t[0]==12&&(t[0]=0),60*t[0]+t[1])}min2str(n,t){1440<=n&&(n%=1440),n<0&&(n=1440+n);var i=Math.floor(n/60),n=(n%60<10?"0":"")+n%60;return t=t||w2utils.settings.timeFormat,t.indexOf("h24")!==-1?i+":"+n:(i<=12?i:i-12)+":"+n+" "+(12<=i?"pm":"am")}}let w2tooltip=new Tooltip,w2menu=new MenuTooltip,w2color=new ColorTooltip;new DateTooltip;class w2toolbar extends w2base{constructor(e){super(e.name),this.box=null,this.name=null,this.routeData={},this.items=[],this.right="",this.tooltip="top|left",this.onClick=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseEnter=null,this.onMouseLeave=null,this.onRender=null,this.onRefresh=null,this.onResize=null,this.onDestroy=null,this.item_template={id:null,type:"button",text:null,html:"",tooltip:null,count:null,hidden:!1,disabled:!1,checked:!1,icon:null,route:null,arrow:null,style:null,group:null,items:null,selected:null,color:null,overlay:{anchorClass:""},onClick:null,onRefresh:null},this.last={badge:{}};var t=e.items;delete e.items,Object.assign(this,e),Array.isArray(t)&&this.add(t,!0),e.items=t,typeof this.box=="string"&&(this.box=query(this.box).get(0)),this.box&&this.render(this.box)}add(e,t){this.insert(null,e,t)}insert(e,t,i){(t=Array.isArray(t)?t:[t]).forEach((n,o,r)=>{typeof n=="string"&&(n=r[o]={id:n,text:n});var a,l=["button","check","radio","drop","menu","menu-radio","menu-check","color","text-color","html","break","spacer","new-line"];if(l.includes(String(n.type)))if(n.id!=null||["break","spacer","new-line"].includes(n.type)){if(n.type==null)console.log('ERROR: The parameter "type" is required but not supplied.',n);else if(w2utils.checkUniqueId(n.id,this.items,"toolbar",this.name)){let c=w2utils.extend({},this.item_template,n);c.type=="menu-check"?(Array.isArray(c.selected)||(c.selected=[]),Array.isArray(c.items)&&c.items.forEach(u=>{(u=typeof u=="string"?r[o]={id:u,text:u}:u).checked&&!c.selected.includes(u.id)&&c.selected.push(u.id),!u.checked&&c.selected.includes(u.id)&&(u.checked=!0),u.checked==null&&(u.checked=!1)})):c.type=="menu-radio"&&Array.isArray(c.items)&&c.items.forEach((u,h,d)=>{(u=typeof u=="string"?d[h]={id:u,text:u}:u).checked&&c.selected==null?c.selected=u.id:u.checked=!1,u.checked||c.selected!=u.id||(u.checked=!0),u.checked==null&&(u.checked=!1)}),e==null?this.items.push(c):(a=this.get(e,!0),this.items=this.items.slice(0,a).concat([c],this.items.slice(a))),c.line=c.line??1,i!==!0&&this.refresh(c.id)}}else console.log('ERROR: The parameter "id" is required but not supplied.',n);else console.log('ERROR: The parameter "type" should be one of the following:',l,`, but ${n.type} is supplied.`,n)}),i!==!0&&this.resize()}remove(){let e=0;return Array.from(arguments).forEach(t=>{var i=this.get(t);i&&String(t).indexOf(":")==-1&&(e++,query(this.box).find("#tb_"+this.name+"_item_"+w2utils.escapeId(i.id)).remove(),(t=this.get(i.id,!0))!=null)&&this.items.splice(t,1)}),this.resize(),e}set(e,t){var i=this.get(e);return i!=null&&(Object.assign(i,t),this.refresh(String(e).split(":")[0]),!0)}get(e,t){if(arguments.length===0){var i=[];for(let a=0;a<this.items.length;a++)this.items[a].id!=null&&i.push(this.items[a].id);return i}var n=String(e).split(":");for(let a=0;a<this.items.length;a++){var o=this.items[a];if(["menu","menu-radio","menu-check"].includes(o.type)&&n.length==2&&o.id==n[0]){let l=o.items;typeof l=="function"&&(l=l(this));for(let c=0;c<l.length;c++){var r=l[c];if(r.id==n[1]||r.id==null&&r.text==n[1])return t==1?c:r;if(Array.isArray(r.items)){for(let u=0;u<r.items.length;u++)if(r.items[u].id==n[1]||r.items[u].id==null&&r.items[u].text==n[1])return t==1?c:r.items[u]}}}else if(o.id==n[0])return t==1?a:o}return null}setCount(e,t,i,n){var o=query(this.box).find(`#tb_${this.name}_item_${w2utils.escapeId(e)} .w2ui-tb-count > span`);0<o.length?(o.removeClass().addClass(i??"").text(t).get(0).style.cssText=n??"",this.last.badge[e]={className:i??"",style:n??""},this.get(e).count=t):(this.set(e,{count:t}),this.setCount(...arguments))}show(){let e=[];return Array.from(arguments).forEach(t=>{var i=this.get(t);i&&(i.hidden=!1,e.push(String(t).split(":")[0]))}),setTimeout(()=>{e.forEach(t=>{this.refresh(t),this.resize()})},15),e}hide(){let e=[];return Array.from(arguments).forEach(t=>{var i=this.get(t);i&&(i.hidden=!0,e.push(String(t).split(":")[0]))}),setTimeout(()=>{e.forEach(t=>{this.refresh(t),this.tooltipHide(t),this.resize()})},15),e}enable(){let e=[];return Array.from(arguments).forEach(t=>{var i=this.get(t);i&&(i.disabled=!1,e.push(String(t).split(":")[0]))}),setTimeout(()=>{e.forEach(t=>{this.refresh(t)})},15),e}disable(){let e=[];return Array.from(arguments).forEach(t=>{var i=this.get(t);i&&(i.disabled=!0,e.push(String(t).split(":")[0]))}),setTimeout(()=>{e.forEach(t=>{this.refresh(t),this.tooltipHide(t)})},15),e}check(){let e=[];return Array.from(arguments).forEach(t=>{var i=this.get(t);i&&String(t).indexOf(":")==-1&&(i.checked=!0,e.push(String(t).split(":")[0]))}),setTimeout(()=>{e.forEach(t=>{this.refresh(t)})},15),e}uncheck(){let e=[];return Array.from(arguments).forEach(t=>{var i=this.get(t);i&&String(t).indexOf(":")==-1&&(["menu","menu-radio","menu-check","drop","color","text-color"].includes(i.type)&&i.checked&&w2tooltip.hide(this.name+"-drop"),i.checked=!1,e.push(String(t).split(":")[0]))}),setTimeout(()=>{e.forEach(t=>{this.refresh(t)})},15),e}click(e,t){var i=String(e).split(":");let n=this.get(i[0]),o=n&&n.items?w2utils.normMenu.call(this,n.items,n):[];if(1<i.length)(i=this.get(e))&&!i.disabled&&this.menuClick({name:this.name,item:n,subItem:i,originalEvent:t});else if(n&&!n.disabled&&(i=this.trigger("click",{target:e??this.name,item:n,object:n,originalEvent:t}),i.isCancelled!==!0)){o=n&&n.items?w2utils.normMenu.call(this,n.items,n):[];let l="#tb_"+this.name+"_item_"+w2utils.escapeId(n.id);if(query(this.box).find(l).removeClass("down"),n.type=="radio"){for(let c=0;c<this.items.length;c++){var r=this.items[c];r!=null&&r.id!=n.id&&r.type==="radio"&&r.group==n.group&&r.checked&&(r.checked=!1,this.refresh(r.id))}n.checked=!0,query(this.box).find(l).addClass("checked")}if(["menu","menu-radio","menu-check","drop","color","text-color"].includes(n.type)){if(this.tooltipHide(e),n.checked)return void w2tooltip.hide(this.name+"-drop");setTimeout(()=>{var c=(h,d)=>{let y=this;return function(){y.set(h,{checked:!1})}},u=query(this.box).find("#tb_"+this.name+"_item_"+w2utils.escapeId(n.id));if(w2utils.isPlainObject(n.overlay)||(n.overlay={}),n.type=="drop"&&w2tooltip.show(w2utils.extend({html:n.html,class:"w2ui-white",hideOn:["doc-click"]},n.overlay,{anchor:u[0],name:this.name+"-drop",data:{item:n,btn:l}})).hide(c(n.id)),["menu","menu-radio","menu-check"].includes(n.type)){let h="normal";n.type=="menu-radio"&&(h="radio",o.forEach(d=>{n.selected==d.id?d.checked=!0:d.checked=!1})),n.type=="menu-check"&&(h="check",o.forEach(d=>{Array.isArray(n.selected)&&n.selected.includes(d.id)?d.checked=!0:d.checked=!1})),w2menu.show(w2utils.extend({items:o},n.overlay,{type:h,name:this.name+"-drop",anchor:u[0],data:{item:n,btn:l}})).hide(c(n.id)).remove(d=>{this.menuClick({name:this.name,remove:!0,item:n,subItem:d.detail.item,originalEvent:d})}).select(d=>{this.menuClick({name:this.name,item:n,subItem:d.detail.item,originalEvent:d})})}["color","text-color"].includes(n.type)&&w2color.show(w2utils.extend({color:n.color},n.overlay,{anchor:u[0],name:this.name+"-drop",data:{item:n,btn:l}})).hide(c(n.id)).select(h=>{h.detail.color!=null&&this.colorClick({name:this.name,item:n,color:h.detail.color})})},0)}if(["check","menu","menu-radio","menu-check","drop","color","text-color"].includes(n.type)&&(n.checked=!n.checked,n.checked?query(this.box).find(l).addClass("checked"):query(this.box).find(l).removeClass("checked")),n.route){let c=("/"+n.route).replace(/\/{2,}/g,"/");var a=w2utils.parseRoute(c);if(0<a.keys.length)for(let u=0;u<a.keys.length;u++)c=c.replace(new RegExp(":"+a.keys[u].name,"g"),this.routeData[a.keys[u].name]);setTimeout(()=>{window.location.hash=c},1)}this.tooltipShow(e),i.finish()}}scroll(e,t,i){return new Promise((n,o)=>{var r=query(this.box).find(`.w2ui-tb-line:nth-child(${t}) .w2ui-scroll-wrapper`),a=r.get(0).scrollLeft,l=r.find(".w2ui-tb-right").get(0),c=r.parent().get(0).getBoundingClientRect().width,u=a+parseInt(l.offsetLeft)+parseInt(l.clientWidth);switch(e){case"left":(scroll=a-c+50)<=0&&(scroll=0),r.get(0).scrollTo({top:0,left:scroll,behavior:i?"atuo":"smooth"});break;case"right":(scroll=a+c-50)>=u-c&&(scroll=u-c),r.get(0).scrollTo({top:0,left:scroll,behavior:i?"atuo":"smooth"})}setTimeout(()=>{this.resize(),n()},i?0:500)})}render(e){var t=Date.now(),i=(typeof e=="string"&&(e=query(e).get(0)),this.trigger("render",{target:this.name,box:e??this.box}));if(i.isCancelled!==!0&&(e!=null&&(0<query(this.box).find(".w2ui-scroll-wrapper .w2ui-tb-right").length&&query(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-toolbar").html(""),this.box=e),this.box)){Array.isArray(this.right)||(this.right=[this.right]);let o="",r=0;for(let a=0;a<this.items.length;a++){var n=this.items[a];n!=null&&(n.id==null&&(n.id="item_"+a),n.caption!=null&&console.log("NOTICE: toolbar item.caption property is deprecated, please use item.text. Item -> ",n),n.hint!=null&&console.log("NOTICE: toolbar item.hint property is deprecated, please use item.tooltip. Item -> ",n),a!==0&&n.type!="new-line"||(r++,o+=`
                    <div class="w2ui-tb-line">
                        <div class="w2ui-scroll-wrapper w2ui-eaction" data-mousedown="resize">
                            <div class="w2ui-tb-right">${this.right[r-1]??""}</div>
                        </div>
                        <div class="w2ui-scroll-left w2ui-eaction" data-click='["scroll", "left", "${r}"]'></div>
                        <div class="w2ui-scroll-right w2ui-eaction" data-click='["scroll", "right", "${r}"]'></div>
                    </div>
                `),n.line=r)}return query(this.box).attr("name",this.name).addClass("w2ui-reset w2ui-toolbar").html(o),0<query(this.box).length&&(query(this.box)[0].style.cssText+=this.style),w2utils.bindEvents(query(this.box).find(".w2ui-tb-line .w2ui-eaction"),this),this.last.observeResize=new ResizeObserver(()=>{this.resize()}),this.last.observeResize.observe(this.box),this.refresh(),this.resize(),i.finish(),Date.now()-t}}refresh(e){var t=Date.now(),i=this.trigger("refresh",{target:e??this.name,item:this.get(e)});if(i.isCancelled!==!0){let l;if(e==null)for(let c=0;c<this.items.length;c++){var n=this.items[c];n.id==null&&(n.id="item_"+c),this.refresh(n.id)}else{var o=this.get(e);if(o==null)return!1;if(typeof o.onRefresh!="function"||(l=this.trigger("refresh",{target:e,item:o,object:o})).isCancelled!==!0){var r=`#tb_${this.name}_item_`+w2utils.escapeId(o.id);let c=query(this.box).find(r);var a=this.getItemHTML(o);if(this.tooltipHide(e),o.type=="spacer"&&query(this.box).find(".w2ui-tb-line:nth-child("+o.line).find(".w2ui-tb-right").css("width","auto"),c.length===0){e=parseInt(this.get(e,!0))+1;let u=query(this.box).find(`#tb_${this.name}_item_`+w2utils.escapeId(this.items[e]?this.items[e].id:""));u.length==0?u=query(this.box).find(".w2ui-tb-line:nth-child("+o.line).find(".w2ui-tb-right").before(a):u.after(a),w2utils.bindEvents(query(this.box).find(r),this)}else{query(this.box).find(r).replace(query.html(a));let u=query(this.box).find(r).get(0),h=(w2utils.bindEvents(u,this),w2tooltip.get(!0));Object.keys(h).forEach(d=>{h[d].anchor==c.get(0)&&(h[d].anchor=u)})}if(["menu","menu-radio","menu-check"].includes(o.type)&&o.checked){let u=Array.isArray(o.selected)?o.selected:[o.selected];o.items.forEach(h=>{u.includes(h.id)?h.checked=!0:h.checked=!1}),w2menu.update(this.name+"-drop",o.items)}return typeof o.onRefresh=="function"&&l.finish(),i.finish(),Date.now()-t}}}}resize(){var e=Date.now(),t=this.trigger("resize",{target:this.name});if(t.isCancelled!==!0)return query(this.box).find(".w2ui-tb-line").each(n=>{var n=query(n),o=(n.find(".w2ui-scroll-left, .w2ui-scroll-right").hide(),n.find(".w2ui-scroll-wrapper").get(0)),a=n.find(".w2ui-tb-right"),r=n.get(0).getBoundingClientRect().width,a=0<a.length?a[0].offsetLeft+a[0].clientWidth:0;r<a&&(0<o.scrollLeft&&n.find(".w2ui-scroll-left").show(),r<a-o.scrollLeft)&&n.find(".w2ui-scroll-right").show()}),t.finish(),Date.now()-e}destroy(){var t;var e=this.trigger("destroy",{target:this.name});e.isCancelled!==!0&&(0<query(this.box).find(".w2ui-scroll-wrapper  .w2ui-tb-right").length&&query(this.box).removeAttr("name").removeClass("w2ui-reset w2ui-toolbar").html(""),query(this.box).html(""),(t=this.last.observeResize)==null||t.disconnect(),delete w2ui[this.name],e.finish())}getItemHTML(e){let t="",i=(e.caption!=null&&e.text==null&&(e.text=e.caption),e.text==null&&(e.text=""),e.tooltip==null&&e.hint!=null&&(e.tooltip=e.hint),e.tooltip==null&&(e.tooltip=""),typeof e.get=="function"||!Array.isArray(e.items)&&typeof e.items!="function"||(e.get=function(a){let l=e.items;return(l=typeof l=="function"?e.items(e):l).find(c=>c.id==a)}),""),n=typeof e.text=="function"?e.text.call(this,e):e.text;e.icon&&(i=e.icon,typeof e.icon=="function"&&(i=e.icon.call(this,e)),i=`<div class="w2ui-tb-icon">${i=String(i).slice(0,1)!=="<"?`<span class="${i}"></span>`:i}</div>`);var o=["w2ui-tb-button"];switch(e.checked&&o.push("checked"),e.disabled&&o.push("disabled"),e.hidden&&o.push("hidden"),i||o.push("no-icon"),e.type){case"color":case"text-color":typeof e.color=="string"&&(e.color.slice(0,1)=="#"&&(e.color=e.color.slice(1)),[3,6,8].includes(e.color.length))&&(e.color="#"+e.color),e.type=="color"&&(n=`<span class="w2ui-tb-color-box" style="background-color: ${e.color!=null?e.color:"#fff"}"></span>
                           `+(e.text?`<div style="margin-left: 17px;">${w2utils.lang(e.text)}</div>`:"")),e.type=="text-color"&&(n='<span style="color: '+(e.color!=null?e.color:"#444")+';">'+(e.text?w2utils.lang(e.text):"<b>Aa</b>")+"</span>");case"menu":case"menu-check":case"menu-radio":case"button":case"check":case"radio":case"drop":var r=e.arrow===!0||e.arrow!==!1&&["menu","menu-radio","menu-check","drop","color","text-color"].includes(e.type);t=`
                    <div id="tb_${this.name}_item_${e.id}" style="${e.hidden?"display: none":""}"
                        class="${o.join(" ")} ${e.class||""}"
                        ${e.disabled?"":`data-click='["click","${e.id}"]'
                               data-mouseenter='["mouseAction", "event", "this", "Enter", "${e.id}"]'
                               data-mouseleave='["mouseAction", "event", "this", "Leave", "${e.id}"]'
                               data-mousedown='["mouseAction", "event", "this", "Down", "${e.id}"]'
                               data-mouseup='["mouseAction", "event", "this", "Up", "${e.id}"]'`}
                    >
                        ${i}
                        ${n!=""?`<div class="w2ui-tb-text" style="${e.style||""}">
                                    ${w2utils.lang(n)}
                                    ${e.count!=null?w2utils.stripSpaces(`<span class="w2ui-tb-count">
                                                <span class="${this.last.badge[e.id]?this.last.badge[e.id].className??"":""}"
                                                    style="${this.last.badge[e.id]?this.last.badge[e.id].style??"":""}"
                                                >${e.count}</span>
                                           </span>`):""}
                                    ${r?'<span class="w2ui-tb-down"><span></span></span>':""}
                                </div>`:""}
                    </div>
                `;break;case"break":t=`<div id="tb_${this.name}_item_${e.id}" class="w2ui-tb-break"
                            style="${e.hidden?"display: none":""}; ${e.style||""}">
                            &#160;
                        </div>`;break;case"spacer":t=`<div id="tb_${this.name}_item_${e.id}" class="w2ui-tb-spacer"
                            style="${e.hidden?"display: none":""}; ${e.style||""}">
                        </div>`;break;case"html":t=`<div id="tb_${this.name}_item_${e.id}" class="w2ui-tb-html ${o.join(" ")}"
                            style="${e.hidden?"display: none":""}; ${e.style||""}">
                            ${typeof e.html=="function"?e.html.call(this,e):e.html}
                        </div>`}return t}tooltipShow(e){if(this.tooltip!=null){var t=query(this.box).find("#tb_"+this.name+"_item_"+w2utils.escapeId(e)).get(0),e=this.get(e),i=this.tooltip;let o=e.tooltip;typeof o=="function"&&(o=o.call(this,e)),["menu","menu-radio","menu-check","drop","color","text-color"].includes(e.type)&&e.checked==1||w2tooltip.show({anchor:t,name:this.name+"-tooltip",html:o,position:i})}}tooltipHide(e){this.tooltip!=null&&w2tooltip.hide(this.name+"-tooltip")}menuClick(e){if(e.item&&!e.item.disabled){var t=this.trigger(e.remove!==!0?"click":"remove",{target:e.item.id+":"+e.subItem.id,item:e.item,subItem:e.subItem,originalEvent:e.originalEvent});if(t.isCancelled!==!0){let o=e.subItem,r=this.get(e.item.id),a=r.items;if(typeof a=="function"&&(a=r.items()),r.type=="menu"&&(r.selected=o.id),r.type=="menu-radio"&&(r.selected=o.id,Array.isArray(a)&&a.forEach(l=>{l.checked===!0&&delete l.checked,Array.isArray(l.items)&&l.items.forEach(c=>{c.checked===!0&&delete c.checked})}),o.checked=!0),r.type=="menu-check"){if(Array.isArray(r.selected)||(r.selected=[]),o.group==null){var i=r.selected.indexOf(o.id);i==-1?(r.selected.push(o.id),o.checked=!0):(r.selected.splice(i,1),o.checked=!1)}else if(o.group!==!1){let l=[];i=r.selected.indexOf(o.id);let c=u=>{u.forEach(h=>{var d;h.group===o.group&&(d=r.selected.indexOf(h.id))!=-1&&(h.id!=o.id&&l.push(h.id),r.selected.splice(d,1)),Array.isArray(h.items)&&c(h.items)})};c(a),i==-1&&(r.selected.push(o.id),o.checked=!0)}}if(typeof o.route=="string"){let l=o.route!==""?("/"+o.route).replace(/\/{2,}/g,"/"):"";var n=w2utils.parseRoute(l);if(0<n.keys.length)for(let c=0;c<n.keys.length;c++)this.routeData[n.keys[c].name]!=null&&(l=l.replace(new RegExp(":"+n.keys[c].name,"g"),this.routeData[n.keys[c].name]));setTimeout(()=>{window.location.hash=l},1)}this.refresh(e.item.id),t.finish()}}}colorClick(e){var t;e.item&&!e.item.disabled&&(t=this.trigger("click",{target:e.item.id,item:e.item,color:e.color,final:e.final,originalEvent:e.originalEvent})).isCancelled!==!0&&(e.item.color=e.color,this.refresh(e.item.id),t.finish())}mouseAction(r,t,i,n){var o=this.get(n),r=this.trigger("mouse"+i,{target:n,item:o,object:o,originalEvent:r});if(r.isCancelled!==!0&&!o.disabled&&!o.hidden){switch(i){case"Enter":query(t).addClass("over"),this.tooltipShow(n);break;case"Leave":query(t).removeClass("over down"),this.tooltipHide(n);break;case"Down":query(t).addClass("down");break;case"Up":query(t).removeClass("down")}r.finish()}}}class ToolbarManager{constructor(e){this.config={source:e,selector:e.selector,id:e.id,styles:{mainToolbar:"border-top: 1px solid black; background-color: blue",button:""},toolbarMainMenu:{type:"menu",id:"main-menu",text:"APP",icon:"fa fa-camera",items:[{text:"About",id:"main-menu-about",icon:"fa fa-camera"}]}},this.instances={container:null,callbacks:{optionClicked:null}},this.vars={initialized:!1,toolbarItems:[this.config.toolbarMainMenu,{type:"break"}]}}onButtonClicked(e){this.instances.callbacks.optionClicked=e}add_application_selector(e,t,i,n){let o={type:"button",id:t,text:e,onClick:i===void 0?null:i};if(this.instances.container==null){this.vars.toolbarItems.push(o);return}this.instances.container.add(o)}add_menu_option(e,t,i,n){let o={type:"button",id:t,text:e,onClick:i===void 0?null:i};if(this.config.toolbarMainMenu.items.length==1){let r={type:"break"};this.config.toolbarMainMenu.items=[r].concat(this.config.toolbarMainMenu.items)}this.config.toolbarMainMenu.items=[o].concat(this.config.toolbarMainMenu.items),this.instances.container!=null&&(this.instances.container.get("main-menu").items=this.config.toolbarMainMenu.items,this.instances.container.refresh())}appcontroller(e){return e!==void 0&&(this.controller=e),this.controller!=null&&(this.controller.add_menu_option=this.add_menu_option.bind(this),this.controller.add_application_selector=this.add_application_selector.bind(this),this.controller.on("add-window-selector",this.add_application_selector.bind(this)),this.controller.on("add-startup-option",this.add_menu_option.bind(this))),this.controller}Init(){}Start(){this._scrach_start(),this._render()}_scrach_start(){console.log("scrach toolbar"),w2ui.hasOwnProperty(this.config.id)&&w2ui[this.config.id].destroy();let e=this;this.instances.container=new w2toolbar({name:this.config.id,style:"border-top: 1px solid black",items:e.vars.toolbarItems,onRender(t){e.vars.initialized=!0,e.onRendered!==void 0&&e.onRendered()},onClick(t){console.log(`ctoolbar : clicked : [${t.target}]`),e._button_clicked(t.target),e.controller.signal_event("on-toolbar-option-click",t.target)}})}_render(){this.instances.container.render(this.config.selector)}_button_clicked(e){this.instances.callbacks.optionClicked!=null&&this.instances.callbacks.optionClicked(e)}}const _sfc_main$2={__name:"CToolbar",props:{title:{type:String},options:{type:Object,required:!0}},emits:[],setup(s,{expose:e,emit:t}){const i=s;let n=new ToolbarManager({selector:"#ctoolbar",id:"maintoolbar",options:i.options});n.onRendered=()=>{};let o=null;switch(i.options.position){case"top":o=`
      position:absolute;
      top: 0;
      left:0;
      height: ${i.options.width};
      width:100%;
      border-bottom: 1px solid black;
    `;break;case"left":o=`
      position:absolute;
      top: 0;
      left:0;
      height:100%;
      width: ${i.options.width};
      border-right: 1px solid black;
    `;break;case"right":o=`
      position:absolute;
      top: 0;
      right:0;
      height:100%;
      width: ${i.options.width};
      border-left: 1px solid black;
    `;break;case"down":default:o=`
      position:absolute;
      bottom: 0;
      left:0;
      height: ${i.options.width};
      width:100%;
      border-top: 1px solid black;
    `}return onMounted(()=>{console.log("montada ctoolbar-vue")}),e({manager:function(){return n}}),(a,l)=>(openBlock(),createElementBlock("div",{id:"ctoolbar",style:normalizeStyle(unref(o))},"hola mundo",4))}};class CWIoLikeWrapper{constructor(e){this.config={source:e,connectionchain:null,hostname:null,port:0,protocol:"ws://"},this.vars={connectionchain:"",connected:!1},this.instances={socket:null,callbacks:{onopen:[],onclose:[],onerror:[],onrawdata:[],onmessage:{}}},typeof this.config.source=="string"?this.vars.connectionchain=this.config.source:this.config.source==null&&(this.config.hostname=window.location.hostname,this.config.port=window.location.port,this.config.protocol=window.location.protocol=="http:"?"ws:":"wss:",this.vars.connectionchain=`${this.config.protocol}//${this.config.source.hostname};${this.config.source.port}`),console.log(`constructed ${typeof this.config.source} : ${this.vars.connectionchain}`),this.open()}open(){let e=this.vars.connectionchain;console.log(`cwebsocketiowrap : open : opening connection to [${e}]`),this.instances.socket!==null&&(this.instances.socket.close(),this.instances.socket=null);try{this.instances.socket=new WebSocket(e),this.instances.socket.onopen=this.onopen.bind(this),this.instances.socket.onclose=this.onclose.bind(this),this.instances.socket.onerror=this.onerror.bind(this),this.instances.socket.onmessage=this.onmessage.bind(this),console.log(`cwebsocketwrapper : open : launched connection to [${e}]`)}catch(t){this.instances.socket=null,console.error(`cwebsocketwrapper : error opening connection with [${e}] , reason(${t})`),setTimeout(()=>this.open(),5e3)}}close(){try{this.instances.socket.close(),console.log("cwebsocketwrapper : close : closed connection")}catch(e){log.error(`cwebsocketwrapper : error closing socket-wrapper : reason(${e})`)}this.instances.socket=null}onopen(e){this.instances.callbacks.onopen.length!=0&&this.instances.callbacks.onopen.forEach(t=>{t(e)})}onclose(e){this.instances.callbacks.onclose.length!=0&&this.instances.callbacks.onclose.forEach(t=>{t(e)})}onerror(e){this.instances.callbacks.onerror.length!=0&&this.instances.callbacks.onerror.forEach(t=>{t(e)})}onrawdata(e){this.instances.callbacks.onrawdata.length!=0&&this.instances.callbacks.onrawdata.forEach(t=>{t(e)})}onmessage(e){let t;try{t=JSON.parse(e.data.toString())}catch{this.onmessageraw(e.data)}"type"in t?this.onmessagepacket(t):this.onmessageraw(e.data)}onmessageraw(e){this.vars.instances.onrawdata!==void 0&&this.vars.instances.onrawdata(e)}onmessagepacket(e){const t=this.instances.callbacks.onmessage;if(t[e.type]==null)return;t[e.type].forEach(n=>{n(e.payload)})}on(e,t){switch(e){case"connection":this.instances.callbacks.onopen.push(t);break;case"disconnect":this.instances.callbacks.onclose.push(t);break;case"error":this.instances.callbacks.onerror.push(t);break;case"rawdata":this.instances.callbacks.onrawdata.push(t);break}this.instances.callbacks.onmessage[e]===void 0&&(this.instances.callbacks.onmessage[e]=[]),this.instances.callbacks.onmessage[e].push(t)}emit(e,t){if(this.instances.socket==null)return!1;var i={type:e.toString(),timestamp:Date.now(),payload:t};try{this.instances.send(JSON.stringify(i)+`\r
`)}catch(n){return console.error(`CWIoLikeWrapper : emit : error sending message (${n})`),!1}return!0}}const PACKET_TYPES=Object.create(null);PACKET_TYPES.open="0";PACKET_TYPES.close="1";PACKET_TYPES.ping="2";PACKET_TYPES.pong="3";PACKET_TYPES.message="4";PACKET_TYPES.upgrade="5";PACKET_TYPES.noop="6";const PACKET_TYPES_REVERSE=Object.create(null);Object.keys(PACKET_TYPES).forEach(s=>{PACKET_TYPES_REVERSE[PACKET_TYPES[s]]=s});const ERROR_PACKET={type:"error",data:"parser error"},withNativeBlob$1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",withNativeArrayBuffer$2=typeof ArrayBuffer=="function",isView$1=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s&&s.buffer instanceof ArrayBuffer,encodePacket=({type:s,data:e},t,i)=>withNativeBlob$1&&e instanceof Blob?t?i(e):encodeBlobAsBase64(e,i):withNativeArrayBuffer$2&&(e instanceof ArrayBuffer||isView$1(e))?t?i(e):encodeBlobAsBase64(new Blob([e]),i):i(PACKET_TYPES[s]+(e||"")),encodeBlobAsBase64=(s,e)=>{const t=new FileReader;return t.onload=function(){const i=t.result.split(",")[1];e("b"+(i||""))},t.readAsDataURL(s)};function toArray(s){return s instanceof Uint8Array?s:s instanceof ArrayBuffer?new Uint8Array(s):new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}let TEXT_ENCODER;function encodePacketToBinary(s,e){if(withNativeBlob$1&&s.data instanceof Blob)return s.data.arrayBuffer().then(toArray).then(e);if(withNativeArrayBuffer$2&&(s.data instanceof ArrayBuffer||isView$1(s.data)))return e(toArray(s.data));encodePacket(s,!1,t=>{TEXT_ENCODER||(TEXT_ENCODER=new TextEncoder),e(TEXT_ENCODER.encode(t))})}const chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lookup$1=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let s=0;s<chars.length;s++)lookup$1[chars.charCodeAt(s)]=s;const decode$1=s=>{let e=s.length*.75,t=s.length,i,n=0,o,r,a,l;s[s.length-1]==="="&&(e--,s[s.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(i=0;i<t;i+=4)o=lookup$1[s.charCodeAt(i)],r=lookup$1[s.charCodeAt(i+1)],a=lookup$1[s.charCodeAt(i+2)],l=lookup$1[s.charCodeAt(i+3)],u[n++]=o<<2|r>>4,u[n++]=(r&15)<<4|a>>2,u[n++]=(a&3)<<6|l&63;return c},withNativeArrayBuffer$1=typeof ArrayBuffer=="function",decodePacket=(s,e)=>{if(typeof s!="string")return{type:"message",data:mapBinary(s,e)};const t=s.charAt(0);return t==="b"?{type:"message",data:decodeBase64Packet(s.substring(1),e)}:PACKET_TYPES_REVERSE[t]?s.length>1?{type:PACKET_TYPES_REVERSE[t],data:s.substring(1)}:{type:PACKET_TYPES_REVERSE[t]}:ERROR_PACKET},decodeBase64Packet=(s,e)=>{if(withNativeArrayBuffer$1){const t=decode$1(s);return mapBinary(t,e)}else return{base64:!0,data:s}},mapBinary=(s,e)=>{switch(e){case"blob":return s instanceof Blob?s:new Blob([s]);case"arraybuffer":default:return s instanceof ArrayBuffer?s:s.buffer}},SEPARATOR="",encodePayload=(s,e)=>{const t=s.length,i=new Array(t);let n=0;s.forEach((o,r)=>{encodePacket(o,!1,a=>{i[r]=a,++n===t&&e(i.join(SEPARATOR))})})},decodePayload=(s,e)=>{const t=s.split(SEPARATOR),i=[];for(let n=0;n<t.length;n++){const o=decodePacket(t[n],e);if(i.push(o),o.type==="error")break}return i};function createPacketEncoderStream(){return new TransformStream({transform(s,e){encodePacketToBinary(s,t=>{const i=t.length;let n;if(i<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,i);else if(i<65536){n=new Uint8Array(3);const o=new DataView(n.buffer);o.setUint8(0,126),o.setUint16(1,i)}else{n=new Uint8Array(9);const o=new DataView(n.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(i))}s.data&&typeof s.data!="string"&&(n[0]|=128),e.enqueue(n),e.enqueue(t)})}})}let TEXT_DECODER;function totalLength(s){return s.reduce((e,t)=>e+t.length,0)}function concatChunks(s,e){if(s[0].length===e)return s.shift();const t=new Uint8Array(e);let i=0;for(let n=0;n<e;n++)t[n]=s[0][i++],i===s[0].length&&(s.shift(),i=0);return s.length&&i<s[0].length&&(s[0]=s[0].slice(i)),t}function createPacketDecoderStream(s,e){TEXT_DECODER||(TEXT_DECODER=new TextDecoder);const t=[];let i=0,n=-1,o=!1;return new TransformStream({transform(r,a){for(t.push(r);;){if(i===0){if(totalLength(t)<1)break;const l=concatChunks(t,1);o=(l[0]&128)===128,n=l[0]&127,n<126?i=3:n===126?i=1:i=2}else if(i===1){if(totalLength(t)<2)break;const l=concatChunks(t,2);n=new DataView(l.buffer,l.byteOffset,l.length).getUint16(0),i=3}else if(i===2){if(totalLength(t)<8)break;const l=concatChunks(t,8),c=new DataView(l.buffer,l.byteOffset,l.length),u=c.getUint32(0);if(u>Math.pow(2,21)-1){a.enqueue(ERROR_PACKET);break}n=u*Math.pow(2,32)+c.getUint32(4),i=3}else{if(totalLength(t)<n)break;const l=concatChunks(t,n);a.enqueue(decodePacket(o?l:TEXT_DECODER.decode(l),e)),i=0}if(n===0||n>s){a.enqueue(ERROR_PACKET);break}}}})}const protocol$1=4;function Emitter(s){if(s)return mixin(s)}function mixin(s){for(var e in Emitter.prototype)s[e]=Emitter.prototype[e];return s}Emitter.prototype.on=Emitter.prototype.addEventListener=function(s,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+s]=this._callbacks["$"+s]||[]).push(e),this};Emitter.prototype.once=function(s,e){function t(){this.off(s,t),e.apply(this,arguments)}return t.fn=e,this.on(s,t),this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(s,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+s];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+s],this;for(var i,n=0;n<t.length;n++)if(i=t[n],i===e||i.fn===e){t.splice(n,1);break}return t.length===0&&delete this._callbacks["$"+s],this};Emitter.prototype.emit=function(s){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+s],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(t){t=t.slice(0);for(var i=0,n=t.length;i<n;++i)t[i].apply(this,e)}return this};Emitter.prototype.emitReserved=Emitter.prototype.emit;Emitter.prototype.listeners=function(s){return this._callbacks=this._callbacks||{},this._callbacks["$"+s]||[]};Emitter.prototype.hasListeners=function(s){return!!this.listeners(s).length};const nextTick=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),globalThisShim=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),defaultBinaryType="arraybuffer";function createCookieJar(){}function pick(s,...e){return e.reduce((t,i)=>(s.hasOwnProperty(i)&&(t[i]=s[i]),t),{})}const NATIVE_SET_TIMEOUT=globalThisShim.setTimeout,NATIVE_CLEAR_TIMEOUT=globalThisShim.clearTimeout;function installTimerFunctions(s,e){e.useNativeTimers?(s.setTimeoutFn=NATIVE_SET_TIMEOUT.bind(globalThisShim),s.clearTimeoutFn=NATIVE_CLEAR_TIMEOUT.bind(globalThisShim)):(s.setTimeoutFn=globalThisShim.setTimeout.bind(globalThisShim),s.clearTimeoutFn=globalThisShim.clearTimeout.bind(globalThisShim))}const BASE64_OVERHEAD=1.33;function byteLength(s){return typeof s=="string"?utf8Length(s):Math.ceil((s.byteLength||s.size)*BASE64_OVERHEAD)}function utf8Length(s){let e=0,t=0;for(let i=0,n=s.length;i<n;i++)e=s.charCodeAt(i),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(i++,t+=4);return t}function randomString(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function encode(s){let e="";for(let t in s)s.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(s[t]));return e}function decode(s){let e={},t=s.split("&");for(let i=0,n=t.length;i<n;i++){let o=t[i].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class TransportError extends Error{constructor(e,t,i){super(e),this.description=t,this.context=i,this.type="TransportError"}}class Transport extends Emitter{constructor(e){super(),this.writable=!1,installTimerFunctions(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,i){return super.emitReserved("error",new TransportError(e,t,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=decodePacket(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=encode(e);return t.length?"?"+t:""}}class Polling extends Transport{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||t()})),this.writable||(i++,this.once("drain",function(){--i||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};decodePayload(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,encodePayload(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=randomString()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let value=!1;try{value=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const hasCORS=value;function empty(){}class BaseXHR extends Polling{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let i=location.port;i||(i=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}}doWrite(e,t){const i=this.request({method:"POST",data:e});i.on("success",t),i.on("error",(n,o)=>{this.onError("xhr post error",n,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,i)=>{this.onError("xhr poll error",t,i)}),this.pollXhr=e}}class Request extends Emitter{constructor(e,t,i){super(),this.createRequest=e,installTimerFunctions(this,i),this._opts=i,this._method=i.method||"GET",this._uri=t,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var e;const t=pick(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(t);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&i.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var n;i.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=Request.requestsCount++,Request.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=empty,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Request.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Request.requestsCount=0;Request.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",unloadHandler);else if(typeof addEventListener=="function"){const s="onpagehide"in globalThisShim?"pagehide":"unload";addEventListener(s,unloadHandler,!1)}}function unloadHandler(){for(let s in Request.requests)Request.requests.hasOwnProperty(s)&&Request.requests[s].abort()}const hasXHR2=function(){const s=newRequest({xdomain:!1});return s&&s.responseType!==null}();class XHR extends BaseXHR{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=hasXHR2&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Request(newRequest,this.uri(),e)}}function newRequest(s){const e=s.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||hasCORS))return new XMLHttpRequest}catch{}if(!e)try{return new globalThisShim[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const isReactNative=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class BaseWS extends Transport{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,i=isReactNative?{}:pick(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,i)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const i=e[t],n=t===e.length-1;encodePacket(i,this.supportsBinary,o=>{try{this.doWrite(i,o)}catch{}n&&nextTick(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=randomString()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const WebSocketCtor=globalThisShim.WebSocket||globalThisShim.MozWebSocket;class WS extends BaseWS{createSocket(e,t,i){return isReactNative?new WebSocketCtor(e,t,i):t?new WebSocketCtor(e,t):new WebSocketCtor(e)}doWrite(e,t){this.ws.send(t)}}class WT extends Transport{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=createPacketDecoderStream(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=e.readable.pipeThrough(t).getReader(),n=createPacketEncoderStream();n.readable.pipeTo(e.writable),this._writer=n.writable.getWriter();const o=()=>{i.read().then(({done:a,value:l})=>{a||(this.onPacket(l),o())}).catch(a=>{})};o();const r={type:"open"};this.query.sid&&(r.data=`{"sid":"${this.query.sid}"}`),this._writer.write(r).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const i=e[t],n=t===e.length-1;this._writer.write(i).then(()=>{n&&nextTick(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const transports={websocket:WS,webtransport:WT,polling:XHR},re=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,parts=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function parse(s){if(s.length>8e3)throw"URI too long";const e=s,t=s.indexOf("["),i=s.indexOf("]");t!=-1&&i!=-1&&(s=s.substring(0,t)+s.substring(t,i).replace(/:/g,";")+s.substring(i,s.length));let n=re.exec(s||""),o={},r=14;for(;r--;)o[parts[r]]=n[r]||"";return t!=-1&&i!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=pathNames(o,o.path),o.queryKey=queryKey(o,o.query),o}function pathNames(s,e){const t=/\/{2,9}/g,i=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&i.splice(0,1),e.slice(-1)=="/"&&i.splice(i.length-1,1),i}function queryKey(s,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,n,o){n&&(t[n]=o)}),t}const withEventListeners=typeof addEventListener=="function"&&typeof removeEventListener=="function",OFFLINE_EVENT_LISTENERS=[];withEventListeners&&addEventListener("offline",()=>{OFFLINE_EVENT_LISTENERS.forEach(s=>s())},!1);class SocketWithoutUpgrade extends Emitter{constructor(e,t){if(super(),this.binaryType=defaultBinaryType,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const i=parse(e);t.hostname=i.host,t.secure=i.protocol==="https"||i.protocol==="wss",t.port=i.port,i.query&&(t.query=i.query)}else t.host&&(t.hostname=parse(t.host).host);installTimerFunctions(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(i=>{const n=i.prototype.name;this.transports.push(n),this._transportsByName[n]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=decode(this.opts.query)),withEventListeners&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},OFFLINE_EVENT_LISTENERS.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=protocol$1,t.transport=e,this.id&&(t.sid=this.id);const i=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&SocketWithoutUpgrade.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",SocketWithoutUpgrade.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let i=0;i<this.writeBuffer.length;i++){const n=this.writeBuffer[i].data;if(n&&(t+=byteLength(n)),i>0&&t>this._maxPayload)return this.writeBuffer.slice(0,i);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,nextTick(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,i){return this._sendPacket("message",e,t,i),this}send(e,t,i){return this._sendPacket("message",e,t,i),this}_sendPacket(e,t,i,n){if(typeof t=="function"&&(n=t,t=void 0),typeof i=="function"&&(n=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const o={type:e,data:t,options:i};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},i=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():e()}):this.upgrading?i():e()),this}_onError(e){if(SocketWithoutUpgrade.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),withEventListeners&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=OFFLINE_EVENT_LISTENERS.indexOf(this._offlineEventListener);i!==-1&&OFFLINE_EVENT_LISTENERS.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}SocketWithoutUpgrade.protocol=protocol$1;class SocketWithUpgrade extends SocketWithoutUpgrade{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),i=!1;SocketWithoutUpgrade.priorWebsocketSuccess=!1;const n=()=>{i||(t.send([{type:"ping",data:"probe"}]),t.once("packet",h=>{if(!i)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;SocketWithoutUpgrade.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const d=new Error("probe error");d.transport=t.name,this.emitReserved("upgradeError",d)}}))};function o(){i||(i=!0,u(),t.close(),t=null)}const r=h=>{const d=new Error("probe error: "+h);d.transport=t.name,o(),this.emitReserved("upgradeError",d)};function a(){r("transport closed")}function l(){r("socket closed")}function c(h){t&&h.name!==t.name&&o()}const u=()=>{t.removeListener("open",n),t.removeListener("error",r),t.removeListener("close",a),this.off("close",l),this.off("upgrading",c)};t.once("open",n),t.once("error",r),t.once("close",a),this.once("close",l),this.once("upgrading",c),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{i||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let i=0;i<e.length;i++)~this.transports.indexOf(e[i])&&t.push(e[i]);return t}}let Socket$1=class extends SocketWithUpgrade{constructor(e,t={}){const i=typeof e=="object"?e:t;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(n=>transports[n]).filter(n=>!!n)),super(e,i)}};function url(s,e="",t){let i=s;t=t||typeof location<"u"&&location,s==null&&(s=t.protocol+"//"+t.host),typeof s=="string"&&(s.charAt(0)==="/"&&(s.charAt(1)==="/"?s=t.protocol+s:s=t.host+s),/^(https?|wss?):\/\//.test(s)||(typeof t<"u"?s=t.protocol+"//"+s:s="https://"+s),i=parse(s)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const o=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+o+":"+i.port+e,i.href=i.protocol+"://"+o+(t&&t.port===i.port?"":":"+i.port),i}const withNativeArrayBuffer=typeof ArrayBuffer=="function",isView=s=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(s):s.buffer instanceof ArrayBuffer,toString=Object.prototype.toString,withNativeBlob=typeof Blob=="function"||typeof Blob<"u"&&toString.call(Blob)==="[object BlobConstructor]",withNativeFile=typeof File=="function"||typeof File<"u"&&toString.call(File)==="[object FileConstructor]";function isBinary(s){return withNativeArrayBuffer&&(s instanceof ArrayBuffer||isView(s))||withNativeBlob&&s instanceof Blob||withNativeFile&&s instanceof File}function hasBinary(s,e){if(!s||typeof s!="object")return!1;if(Array.isArray(s)){for(let t=0,i=s.length;t<i;t++)if(hasBinary(s[t]))return!0;return!1}if(isBinary(s))return!0;if(s.toJSON&&typeof s.toJSON=="function"&&arguments.length===1)return hasBinary(s.toJSON(),!0);for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t)&&hasBinary(s[t]))return!0;return!1}function deconstructPacket(s){const e=[],t=s.data,i=s;return i.data=_deconstructPacket(t,e),i.attachments=e.length,{packet:i,buffers:e}}function _deconstructPacket(s,e){if(!s)return s;if(isBinary(s)){const t={_placeholder:!0,num:e.length};return e.push(s),t}else if(Array.isArray(s)){const t=new Array(s.length);for(let i=0;i<s.length;i++)t[i]=_deconstructPacket(s[i],e);return t}else if(typeof s=="object"&&!(s instanceof Date)){const t={};for(const i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=_deconstructPacket(s[i],e));return t}return s}function reconstructPacket(s,e){return s.data=_reconstructPacket(s.data,e),delete s.attachments,s}function _reconstructPacket(s,e){if(!s)return s;if(s&&s._placeholder===!0){if(typeof s.num=="number"&&s.num>=0&&s.num<e.length)return e[s.num];throw new Error("illegal attachments")}else if(Array.isArray(s))for(let t=0;t<s.length;t++)s[t]=_reconstructPacket(s[t],e);else if(typeof s=="object")for(const t in s)Object.prototype.hasOwnProperty.call(s,t)&&(s[t]=_reconstructPacket(s[t],e));return s}const RESERVED_EVENTS$1=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],protocol=5;var PacketType;(function(s){s[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK"})(PacketType||(PacketType={}));class Encoder{constructor(e){this.replacer=e}encode(e){return(e.type===PacketType.EVENT||e.type===PacketType.ACK)&&hasBinary(e)?this.encodeAsBinary({type:e.type===PacketType.EVENT?PacketType.BINARY_EVENT:PacketType.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===PacketType.BINARY_EVENT||e.type===PacketType.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=deconstructPacket(e),i=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(i),n}}function isObject(s){return Object.prototype.toString.call(s)==="[object Object]"}class Decoder extends Emitter{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const i=t.type===PacketType.BINARY_EVENT;i||t.type===PacketType.BINARY_ACK?(t.type=i?PacketType.EVENT:PacketType.ACK,this.reconstructor=new BinaryReconstructor(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(isBinary(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const i={type:Number(e.charAt(0))};if(PacketType[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===PacketType.BINARY_EVENT||i.type===PacketType.BINARY_ACK){const o=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const r=e.substring(o,t);if(r!=Number(r)||e.charAt(t)!=="-")throw new Error("Illegal attachments");i.attachments=Number(r)}if(e.charAt(t+1)==="/"){const o=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););i.nsp=e.substring(o,t)}else i.nsp="/";const n=e.charAt(t+1);if(n!==""&&Number(n)==n){const o=t+1;for(;++t;){const r=e.charAt(t);if(r==null||Number(r)!=r){--t;break}if(t===e.length)break}i.id=Number(e.substring(o,t+1))}if(e.charAt(++t)){const o=this.tryParse(e.substr(t));if(Decoder.isPayloadValid(i.type,o))i.data=o;else throw new Error("invalid payload")}return i}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case PacketType.CONNECT:return isObject(t);case PacketType.DISCONNECT:return t===void 0;case PacketType.CONNECT_ERROR:return typeof t=="string"||isObject(t);case PacketType.EVENT:case PacketType.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&RESERVED_EVENTS$1.indexOf(t[0])===-1);case PacketType.ACK:case PacketType.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class BinaryReconstructor{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const parser=Object.freeze(Object.defineProperty({__proto__:null,Decoder,Encoder,get PacketType(){return PacketType},protocol},Symbol.toStringTag,{value:"Module"}));function on(s,e,t){return s.on(e,t),function(){s.off(e,t)}}const RESERVED_EVENTS=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Socket extends Emitter{constructor(e,t,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[on(e,"open",this.onopen.bind(this)),on(e,"packet",this.onpacket.bind(this)),on(e,"error",this.onerror.bind(this)),on(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var i,n,o;if(RESERVED_EVENTS.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const r={type:PacketType.EVENT,data:t};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const u=this.ids++,h=t.pop();this._registerAckCallback(u,h),r.id=u}const a=(n=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||n===void 0?void 0:n.writable,l=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!a||(l?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,t){var i;const n=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(n===void 0){this.acks[e]=t;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);t.call(this,new Error("operation has timed out"))},n),r=(...a)=>{this.io.clearTimeoutFn(o),t.apply(this,a)};r.withError=!0,this.acks[e]=r}emitWithAck(e,...t){return new Promise((i,n)=>{const o=(r,a)=>r?n(r):i(a);o.withError=!0,t.push(o),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((n,...o)=>i!==this._queue[0]?void 0:(n!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(n)):(this._queue.shift(),t&&t(null,...o)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:PacketType.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(i=>String(i.id)===e)){const i=this.acks[e];delete this.acks[e],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case PacketType.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case PacketType.EVENT:case PacketType.BINARY_EVENT:this.onevent(e);break;case PacketType.ACK:case PacketType.BINARY_ACK:this.onack(e);break;case PacketType.DISCONNECT:this.ondisconnect();break;case PacketType.CONNECT_ERROR:this.destroy();const i=new Error(e.data.message);i.data=e.data.data,this.emitReserved("connect_error",i);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const i of t)i.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let i=!1;return function(...n){i||(i=!0,t.packet({type:PacketType.ACK,id:e,data:n}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:PacketType.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let i=0;i<t.length;i++)if(e===t[i])return t.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const i of t)i.apply(this,e.data)}}}function Backoff(s){s=s||{},this.ms=s.min||100,this.max=s.max||1e4,this.factor=s.factor||2,this.jitter=s.jitter>0&&s.jitter<=1?s.jitter:0,this.attempts=0}Backoff.prototype.duration=function(){var s=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*s);s=Math.floor(e*10)&1?s+t:s-t}return Math.min(s,this.max)|0};Backoff.prototype.reset=function(){this.attempts=0};Backoff.prototype.setMin=function(s){this.ms=s};Backoff.prototype.setMax=function(s){this.max=s};Backoff.prototype.setJitter=function(s){this.jitter=s};class Manager extends Emitter{constructor(e,t){var i;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,installTimerFunctions(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((i=t.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Backoff({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const n=t.parser||parser;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Socket$1(this.uri,this.opts);const t=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const n=on(t,"open",function(){i.onopen(),e&&e()}),o=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},r=on(t,"error",o);if(this._timeout!==!1){const a=this._timeout,l=this.setTimeoutFn(()=>{n(),o(new Error("timeout")),t.close()},a);this.opts.autoUnref&&l.unref(),this.subs.push(()=>{this.clearTimeoutFn(l)})}return this.subs.push(n),this.subs.push(r),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(on(e,"ping",this.onping.bind(this)),on(e,"data",this.ondata.bind(this)),on(e,"error",this.onerror.bind(this)),on(e,"close",this.onclose.bind(this)),on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){nextTick(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let i=this.nsps[e];return i?this._autoConnect&&!i.active&&i.connect():(i=new Socket(this,e,t),this.nsps[e]=i),i}_destroy(e){const t=Object.keys(this.nsps);for(const i of t)if(this.nsps[i].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let i=0;i<t.length;i++)this.engine.write(t[i],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(n=>{n?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",n)):e.onreconnect()}))},t);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const cache={};function lookup(s,e){typeof s=="object"&&(e=s,s=void 0),e=e||{};const t=url(s,e.path||"/socket.io"),i=t.source,n=t.id,o=t.path,r=cache[n]&&o in cache[n].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||r;let l;return a?l=new Manager(i,e):(cache[n]||(cache[n]=new Manager(i,e)),l=cache[n]),t.query&&!e.query&&(e.query=t.queryKey),l.socket(t.path,e)}Object.assign(lookup,{Manager,Socket,io:lookup,connect:lookup});class AppControll3r{constructor(s){this.config={source:s,comms:{CWIoLikeWrapper:{constructor:function(e){return new CWIoLikeWrapper(e)},instance:null,reconnectionth:null,subscriptions:{}},socketio:{constructor:function(e){return lookup(e)},instance:null,reconnectionth:null,subscriptions:{}}}},this.instances={comms:{socket_interface:null,config:{type:"cytwebsocketwrapper",claimModules:!1}},mods:{obtained:!1,nameless:[],list:{},imported:[]},events:{},variables:{}},this.vars={is_initialized:!1,capp_connection:{key:"",ts:0,ts_ext:0,programmed_reboot:!1},async_init:!1},this.comms_send_packet=this.__comms_send_packet_zero.bind(this)}setServerWebsocketPort(s){console.log(`capp-controller : set-server-websocket-port : updating port to [${s}]`),this.config.source.comms.port=s}Init(){console.log("capp-controller : initializing nameless modules"),this.instances.mods.nameless.forEach(s=>{s.Init()}),console.log("capp-controller : initializing cmodules"),Object.keys(this.instances.mods.list).forEach(s=>{let e=this.instances.mods.list[s].Init();typeof e!="boolean"?console.warn(`capp-controller : init : cmodule [${s}] does not serve boolean for Init()`):e===!1&&console.warn(`capp-controller : init : cmodule [${s}] Init() was not ok`)}),console.log("capp-controller : initializating imported"),this.instances.mods.imported.forEach(s=>{console.log("TO-DO : capp-controller : init : working with imported module")})}Start(){console.log("capp-controller : starting nameless modules"),this.instances.mods.nameless.forEach(s=>{s.Start()}),console.log("capp-controller : starting cmodules"),Object.keys(this.instances.mods.list).forEach(s=>{let e=this.instances.mods.list[s].Start();typeof e!="boolean"?console.warn(`capp-controller : init : cmodule [${s}] does not serve boolean for Init()`):e===!1&&console.warn(`capp-controller : init : cmodule [${s}] Init() was not ok`)}),console.log("capp-controller : initializating imported"),this.instances.mods.imported.forEach(s=>{console.log("TO-DO : capp-controller : init : working with imported module")})}connect(){let s=this.config.source;s.comms.connectorType.length==0&&(s.comms.connectorType="CWIoLikeWrapper"),s.comms.host.length==0&&(s.comms.host=window.location.hostname),s.comms.port==0&&(s.comms.port=window.location.port),s.comms.protocol.length==0&&(s.comms.protocol=window.location.protocol=="http:"?"ws:":"wss:");let e=s.comms.protocol+"//"+s.comms.host.toString()+":"+s.comms.port.toString();if(this.instances.comms.socket_interface=this.config.comms[s.comms.connectorType],this.instances.comms.socket_interface==null)return log.error(`capp-controller : the connector [${s.comms.connectorType}] is NOT defined!. stopping process`),!1;console.log(`capp-controller : creating instance of [${s.comms.connectorType}}] to connect to [${e}]`),this.instances.comms.socket_interface.instance=new this.instances.comms.socket_interface.constructor(e),this.instances.comms.socket_interface.instance.on("connection",this._on_connection.bind(this)),this.instances.comms.socket_interface.instance.on("disconnect",this._on_discomms.bind(this)),this.instances.comms.socket_interface.instance.on("ping",this.on_keep_alive_ping.bind(this)),this.instances.comms.socket_interface.instance.on("error",this._on_error.bind(this)),Object.keys(this.instances.comms.socket_interface.subscriptions).forEach(t=>{let i=this.instances.comms.socket_interface.subscriptions[t];this._connect_socket_event_subscription(evt,i.gencallback.bind(this))})}_connect_socket_event_subscription(s,e){console.log(`capp-controller : connect-socket-event-subscription : subscribing to gencallback for [${s}]`),this.instances.comms.socket_interface.instance.on(s,e)}__comms_send_packet_zero(...s){}csend_packet(s,...e){this.instances.comms.socket_interface.emit(s,...e)}setVar(s,e){this.instances.variables[s]=e}getVar(s){return this.instances.variables[s]}value(s,e){return e!==void 0&&(this.instances.variables[s]=e),this.instances.variables[s]}on(s,e){this.instances.events[s]==null&&(this.instances.events[s]=[]),this.instances.events[s].push(e)}signal_event(s,...e){if(this.instances.events[s]==null)return!1;let t=!0;return this.instances.events[s].forEach(i=>{t|=i(...e)!==!1}),!0}comms_send(...s){return this.comms_send_packet(...s)}comms_send_packet(s,...e){this.instances.comms.socket_interface.emit(s,...e)}comms_on(...s){return this.comms_subscribe_event(...s)}comms_subscribe_event(evtDescriptor,callback,name){return console.log(`capp-controller : socketio-wrapper : event [${evtDescriptor}], subscribing [${name}]`),typeof evtDescriptor!="string"?(console.error(`socket io subscribe : making subscription with name [${name}] to an non-string event [${JSON.stringify(evtDescriptor)}]`),!1):(console.log(`capp-controller : socketio-wrapper : event [${evtDescriptor}], subscribing [${name}]`),this.instances.comms.socket_interface.subscriptions[evtDescriptor]===void 0&&(this.instances.comms.socket_interface.subscriptions[evtDescriptor]={gencallback:(...args)=>{this.instances.comms.socket_interface.subscriptions[eval(`"${evtDescriptor}"`)].callbacks.forEach(s=>{s(...args)})},callbacks:[]},this.instances.comms.socket_interface.instance.on(evtDescriptor,this.instances.comms.socket_interface.subscriptions[evtDescriptor].gencallback.bind(this))),this.instances.comms.socket_interface.subscriptions[evtDescriptor].callbacks.push(callback),!0)}on_keep_alive_check_pulse(){this.vars.capp_comms.ts-Date.now()>1e4&&console.log("capp-controller : no connection to server")}on_socket_connects(){this.comms_send_packet=this.csend_packet.bind(this)}on_socket_disconnects(){this.comms_send_packet=this.__comms_send_packet_zero.bind(this)}on_socket_error(){console.log("capp-controller : error communicating with server.")}add_module(s,e,t=!1){if(s.controller=this,e==null&&s.mod_name==null)console.log("capp-controller : inserting nameless module"),this.instances.mods.nameless.push(s);else{let i;if(e==null?i=s.mod_name:i=e,console.log(`capp-controller : inserting module [${i}]`),this.instances.mods.list[i]!=null)return console.error(`capp-controller : insert-module : module [${e.toString()}] already inserted`),!1;s.app_controller=this,this.instances.mods.list[i]=s}return(this.is_initialized()==!0||t==!0)&&(console.log("capp-controller : initializing module"),typeof s.Init=="function"?(s.Init(),s.Start()):typeof s.initialize=="function"&&s.initialize(this)),!0}_on_connection(){console.warn("connected")}_on_discomms(){console.warn("disconnected"),setTimeout(()=>{this.instances.comms.socket_interface.instance.open()},5e3)}_on_error(){}on_keep_alive_ping(s){if(s.key!==this.vars.capp_connection.key){if(this.vars.capp_connection.key!==""){if(this.vars.capp_connection.programmed_reboot==!0)return;console.warn(`capp-controller : observed session key change from server. from [${this.vars.capp_connection.key}] to [${s.key}] programming reboot in 20 seconds`),setTimeout(()=>{location.reload()},2e4),this.vars.capp_connection.programmed_reboot==!0;return}this.vars.capp_connection.key=s.key}this.vars.capp_connection.ts=Date.now(),this.vars.capp_connection.ts_ext=s.ts}hello(){return console.log("hello from the controller!"),"hello there!"}is_initialized(){return this.vars.is_initialized}}let Tools={configure_external_host(s,e,t){(s==null||s=="")&&(s=window.location.protocol),(e==null||e=="")&&(e=window.location.hostname),(t==null||t==0)&&(t=window.location.port),window.document.CTARGET_CHAIN=`${s}//${e}:${t}/`,console.log(`tools : setting target-chain to [${window.document.CTARGET_CHAIN}]`)},timestampToDateString:function(s){typeof s=="string"&&/^\d+$/.test(s)&&(s=parseInt(s));let e=new Date(s),t=s%1e3;return typeof s!="number"?`Ts 2 input error (${typeof s};${s})`:`${e.getFullYear()}/${e.getMonth()+1<10?"0":""}${e.getMonth()+1}/${e.getDate()}T${e.getHours()<10?"0":""}${e.getHours()}:${e.getMinutes()<10?"0":""}${e.getMinutes()}:${e.getSeconds()<10?"0":""}${e.getSeconds()}.${t<100?"0":""}${t<10?"0":""}${t}`},getCurrentTimestamp:function(){return Date.now()},getCurrentTimeString:function(){return Tools.timestampToDateString(Tools.getCurrentTimestamp())},getCircularReplacer:()=>{const s=new WeakSet;return(e,t)=>{if(typeof t=="object"&&t!==null){if(s.has(t))return;s.add(t)}return t}},stringify(s){return JSON.stringify(s,Tools.getCircularReplacer())},stopMouseEventPropagation:function(s){$(s).click(function(e){e.stopPropagation()})},onClickGoTop:function(s){$(s).on("click",function(){var e=$(this).parent();e.append($(this).detach())})},LoadExternalCss:function(s,e){var t=document.head;window.document.CTARGET_CHAIN!=""&&s.startsWith("http")==!1&&(s=window.document.CTARGET_CHAIN+s);var i=document.createElement("link");return i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",s),i.addEventListener("load",()=>{e&&e()}),i.addEventListener("error",n=>{console.log("tools error : "),e&&e(n)}),t.appendChild(i),i},LoadExternalJsonContent:function(s,e){let t=new XMLHttpRequest;window.document.CTARGET_CHAIN!=""&&s.startsWith("http")==!1&&(s=window.document.CTARGET_CHAIN+s),t.open("GET",s,!0),t.onreadystatechange=function(){let i=!1;if(this.readyState===4){{if(this.status!==200)return;try{i=JSON.parse(this.responseText)}catch{i=!1}}e(i)}},t.send(),console.log("lo")},CreateElementFromHTML(s){var e=document.createElement("div");return e.innerHTML=s.trim(),e.firstChild},LoadExternalHtmlContentOrig:function(s,e){let t=new XMLHttpRequest;window.document.CTARGET_CHAIN!=""&&s.startsWith("http")==!1&&(s=window.document.CTARGET_CHAIN+s),t.open("GET",s,!0),t.onreadystatechange=function(){if(this.readyState!==4)return e("not ready state");if(this.status!==200)return e("<b>error</b> <BR/>200 or whatever");e(Tools.CreateElementFromHTML(this.responseText))},t.send()},LoadExternalHtmlContent:function(s,e){var t=$("<span></span>");return window.document.CTARGET_CHAIN!=""&&s.startsWith("http")==!1&&(s=window.document.CTARGET_CHAIN+s),t.load(s,null,()=>{console.log(`TOOLS : load-external-adress-content : loaded content from [${s}] launching callback`),jQuery(function(i){e(s,t)})}),t},LoadExternalJs:function(s,e){if(s=="")return console.error("cyt-tools : load-external-js : invoking with no content!"),null;window.document.CTARGET_CHAIN!=""&&s.startsWith("http")==!1&&(s=window.document.CTARGET_CHAIN+s);var t=document.createElement("script");t.setAttribute("src",s),t.addEventListener("load",()=>{e()}),t.addEventListener("error",i=>{console.log("tools error : "),e(i)}),document.body.appendChild(t)},bringOnTop:function(s){if(typeof s=="object"){var e=s.parent();e.children().css("z-index","100"),s.css("z-index","1000")}else if(typeof s=="text"){var t=$(s),e=t.parent();e.children().css("z-index","100"),t.css("z-index","1000")}},dragheader:function(s,e){var t=document.getElementById(s),i=document.getElementById(e);i.onmousedown=l;var n=0,o=0,r=0,a=0;function l(h){var d=$(`#${s}`).parent(0);d.append($(`#${s}`).detach()),t.style.filter="invert(100%)",i.getBoundingClientRect(),h=h||window.event,h.preventDefault(),r=h.clientX,a=h.clientY,document.onmouseup=u,document.onmousemove=c}function c(h){h=h||window.event,h.preventDefault(),n=r-h.clientX,o=a-h.clientY,r=h.clientX,a=h.clientY,t.style.top=t.offsetTop-o+"px",t.style.left=t.offsetLeft-n+"px"}function u(){document.onmouseup=null,document.onmousemove=null,t.style.filter=""}},jqresizable:function(s,e){s.mousedown(t=>{console.log(`coords : ${t.clientX}, ${t.clientY}`),s.mousemove(i=>{}),s.mouseup(()=>{})})},resizable:function(s,e){var t=document.getElementById(s);t.onmousedown=n;var i=!1;t.style.resize="both",t.style.overflow="auto";function n(r){t=document.getElementById(s);var a=t.getBoundingClientRect();if(r.clientY-a.top>t.clientHeight*.95&&r.clientX-a.left>t.clientWidth*.95){console.log("resizing"),i=!0,document.onmouseup=o;return}}function o(){if(i==!0){console.log("end resize"),typeof e=="function"&&e(),i=!1;return}document.onmouseup=null,document.onmousemove=null}},generateRandomString:function(s){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=t.length;let n=0;for(;n<s;)e+=t.charAt(Math.floor(Math.random()*i)),n+=1;return e},dragAndResize:function(s,e,t){const i={ALL:"ALL",RESIZABLE:"RESIZABLE"};var n=!1,o=!1,r=document.getElementById(s),a=0,l=0,c=0,u=0;if(document.getElementById(r.id+"header")?document.getElementById(r.id+"header").onmousedown=d:r.onmousedown=d,t!==void 0)switch(t){case i.DRAG:n=!0;break;case i.RESIZABLE:r.style.resize="both",r.style.overflow="auto",o=!0;break;case i.ALL:r.style.resize="both",r.style.overflow="auto",o=!0,n=!0;break}else r.style.resize="both",r.style.overflow="auto",o=!0,n=!0;var h=!1;function d(w){r=document.getElementById(s);var g=r.getBoundingClientRect();if(w.clientY-g.top>r.clientHeight*.95&&w.clientX-g.left>r.clientWidth*.95){if(o==!1)return;console.log("resizing"),h=!0,document.onmouseup=b;return}n!=!1&&(w=w||window.event,w.preventDefault(),c=w.clientX,u=w.clientY,document.onmouseup=b,document.onmousemove=y)}function y(w){w=w||window.event,w.preventDefault(),a=c-w.clientX,l=u-w.clientY,c=w.clientX,u=w.clientY,r.style.top=r.offsetTop-l+"px",r.style.left=r.offsetLeft-a+"px"}function b(){if(h==!0){console.log("end resize"),e(),h=!1;return}document.onmouseup=null,document.onmousemove=null}},SelectorItem:function(s,e){this.instance=null,this._id=s.attr("id"),this._html="",this._choices={},console.log(`Selector Item : initializing for [${this._id}]`),this.setValue=function(t){var i=!1;return Object.keys(this._choices).forEach(n=>{i!=!0&&t==this._choices[n].value&&(this.instance.val(n),i=!0)}),i},this.getSelected=function(){return this._choices[this.instance.val()]},this.addClass=function(t){this.instance.addClass(t)},this.onChange=function(t,i){console.log(`Selector item [${this._id}] : change (${t},${i})`)},this._reorg_choices=function(){Object.keys(e).forEach(t=>{console.log(`selector item [${this._id}] : adding choice [${t}]`),this._choices[t]={text:t,value:e[t]}})},this._init=function(){this._html=`<select id="${this._id}" name="name">`,Object.keys(this._choices).forEach(t=>{this._html+=`<option value="${this._choices[t].text}">${this._choices[t].text}</option>`}),this._html+="</select>"},this._take_place=function(){s.after(this._html),s.remove(),this.instance=$(`#${this._id}`)},this._reorg_choices(),this._init(),this._take_place(),this.instance.change(()=>{this.onChange(this._choices[this.instance.val()].value,this.instance.val())})},InputItem:function(s){this.instance=null,this._html="",this._id=s.attr("id"),this._init=function(){this._html=`<input id="${this._id}" value ="val"/>`},this._take_place=function(){s.after(this._html),s.remove(),this.instance=$(`#${this._id}`),this.instance.change(()=>{this.onChange(this.instance.val())})},this._init(),this._take_place(),this.addClass=function(e){this.instance.addClass(e)},this.onChange=function(e){console.log(`Input Instance : [${this._id}] : change : value = ${e}`)},this.getValue=function(){return this.instance.val()},this.setValue=function(e){this.instance.val(e)}},ButtonItem:function(s,e,t){this.instance=null,this.itext=null,this._html="",this._id=s.attr("id"),this._active=!0,this._image=null,this.vars={text:"",is_text:!0,image:""},this._is_standalone=!1,(this._id===void 0||this._id.length==0)&&(this._is_standalone=!0),this._init=function(){this._html=`<div id="${this._id}" style="position:relative;">
        <div id="_button_text" style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);">
          ${e}
        </div>
        <div id='_img_cnt' style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)">
          <img id="_img_src" style="visibility:hidden;"/>
        </div>
      </div>`,this._is_standalone==!1?(s.after(this._html),s.remove(),this.instance=$(`#${this._id}`),this._image=this.instance.find("#_img_src"),this._image.removeAttr("id"),this._icnt=this.instance.find("#_img_cnt"),this._icnt.removeAttr("id"),s=this.instance):(this.instance=$(this._html),this._image=this.instance.find("#_img_src"),this._image.removeAttr("id"),this._icnt=this.instance.find("#_img_cnt"),this._icnt.removeAttr("id")),this.instance.click(()=>{this._active!=!1&&this.onClick()}),this.itext=this.instance.find("#_button_text"),this.itext.removeAttr("id")},this.Active=function(i){return i!=null&&(this._active=i),this._active},this.onClick=function(){console.log(`button item : ${this._id} : button clicked`)},this.addClass=function(i){this.instance.addClass(i)},this.setClass=function(i){this.instance.attr("class",i)},this.setText=function(i){this.vars.text==i&&this.vars.is_text==!0||(this.vars.text=i,this.itext.text(i),this.itext.css("visibility","visible"),this._image.css("visibility","hidden"),this.vars.is_text=!0)},this.setImage=function(i){this.itext.css("visibility","hidden"),this._image.css("visibility","visible"),this.imgSrc!=i&&(setTimeout(()=>{this.instance.width()>this.instance.height()?(this._icnt.css("height","100%"),this._image.css("height","100%"),this._image.css("width","auto")):(this._icnt.css("width","100%"),this._image.css("height","auto"),this._image.css("width","100%"))},500),this.imgSrc=i,this._image.attr("src",i))},this.hide=function(i){this.instance.hide(i)},this.show=function(i){this.instance.show(i)},this.toggle=function(i){this.instance.toggle(i)},this._init(),this.getInstance=function(){return this.instance}},SwitchItem:function(s,e,t="60px",i="34px"){this.instance=null,this.inputInstance=null,this._html="",this._id=s.attr("id"),this._init=function(){this._html=`<label id="${this._id} style="position: relative; display: inline-block; height: ${i}; width : ${t}">
        <input type="checkbox" style="opacity: 0;width 0; height: 0;">
        <span class="${e}"><span>
      </label>`,s.after(this._html),s.remove(),this.instance=$(`#${this._id}`),this.inputInstance=this.instance.find("input"),this.inputInstance.change(()=>{console.log(" checkbox"),this.prop("checked")?console.log("is checked"):console.log("is NOT checked")}),s=this.instance},this.onActivate=function(){console.log("activate")},this.onDeactiate=function(){},this._init()}};class LayoutComponent{constructor(){this.data={content_id:"",format:{maximized:!1,minimized:!1,x:"0",y:"0",w:"0",h:"0",classes:[""]}}}toJson(){return this.data}fromJson(e){return!("content_id"in e)||!("format"in e)?(console.error("-cyt-mod-spec : layout-component : not all required parameters in component (content_id,format)"),!1):!("maximized"in e.format)||!("minimized"in e.format)||!("x"in e.format)||!("y"in e.format)||!("w"in e.format)||!("h"in e.format)?(console.error("-cyt-mod-spec : layout-component : not all required parameters in component.format (maximized,minimized,x,y,w,h,classes)"),!1):(this.data.content_id=e.content_id,this.data.format.maximized=e.format.maximized,this.data.format.minimized=e.format.minimized,this.data.format.x=e.format.x,this.data.format.y=e.format.y,this.data.format.w=e.format.w,this.data.format.h=e.format.h,this.data.format.classes=e.format.classes,!0)}id(e){return e!==void 0&&(this.data.content_id=e),this.data.content_id}X(){return this.data.format.x}Y(){return this.data.format.y}W(){return this.data.format.w}H(){return this.data.format.h}minimized(e){return e!=null&&(this.data.format.minimized=e),this.data.format.minimized===!0}maximized(e){return e!=null&&(this.data.format.maximized=e),this.data.format.maximized===!0}hasPosition(){return this.data.format.x!=null&&this.data.format.y!=null}hasDimensions(){return this.data.format.w!=null&&this.data.format.h!=null}}class Layout{constructor(){this.data={id:"",name:"",active:!0,toolbar_fastaccess:!0,components:{}}}id(e){return e!==void 0&&(this.data.id=e),this.data.id}name(e){return e!==void 0&&(this.data.name=e),this.data.name}active(e){return e!==void 0&&(this.data.active=e),this.data.active}toolbar_fastaccess(e){return e!==void 0&&(this.data.toolbar_fastaccess=e),this.data.toolbar_fastaccess}component(e){return e===void 0?this.data.components:this.data.components[e]}toJson(){let e=[];return Object.keys(this.data.components).forEach(t=>{e.push(this.data.components[t].toJson())}),{id:this.data.id,name:this.data.name,active:this.data.active,toolbar_fastaccess:this.data.toolbar_fastaccess,components:e}}fromJson(e){return console.log("------"),this.data.id=e.id,this.data.name=e.name,this.data.active=e.active,this.data.toolbar_fastaccess=e.toolbar_fastaccess,e.components.forEach(t=>{let i=new LayoutComponent;if(i.fromJson(t)!==!0){console.error(`-cyt-mod-spec : layout : fromjson : error parsing input for [${this.data.id}]`);return}console.log(`-cyt-mod-spec : layout : fromjson : adding component [${i.id()}]`),this.data.components[i.id()]=i}),!0}}class ModuleSpecification{constructor(e){this.data={id:"",name:e,active:!0,content:{html:{id:"",title:"",src:"",icon:"",alias:"",format:{maximized:!1,minimized:!1,x:"0",y:"0",w:"0",h:"0",classes:[""]}},css:[""],css_night:[""],js:[{script:"",init:""}],data:[""]}},this.vars={there_is_html:!1,there_is_css:!1,there_is_css_night:!1,there_is_js:!1,there_is_data:!1}}Id(e){return e!==void 0&&(this.data.id=e),this.data.id}Name(e){return e!==void 0&&(this.data.name=e),this.data.name}Active(e){return e!==void 0&&(this.data.active=e),this.data.active}Title(e){return e!==void 0&&(this.data.content.html.title=e),this.data.content.html.title}Icon(e){return e!==void 0&&(this.data.content.html.icon=e),this.data.content.html.icon}setFormat(e,t,i,n){return this.data.content.html.format.x=e,this.data.content.html.format.y=t,this.data.content.html.format.w=i,this.data.content.html.format.h=n,!0}X(){return this.data.content.html.format.x}Y(){return this.data.content.html.format.y}W(){return this.data.content.html.format.w}H(){return this.data.content.html.format.h}minimized(e){return e!=null&&(this.data.content.html.format.minimized=e),this.data.content.html.format.minimized===!0}maximized(e){return e!=null&&(this.data.content.html.format.maximized=e),this.data.content.html.format.maximized===!0}hasPosition(){return this.data.content.html.format.x!=null&&this.data.content.html.format.y!=null}hasDimensions(){return this.data.content.html.format.w!=null&&this.data.content.html.format.h!=null}fromRaw(e){if(this.data.content.js=[],this.data.content.css=[],this.data.content.html.format={},this.data.content.html.src="",this.data.content.html.alias="",this.data.content.html.title="",!("name"in e))return console.log("cyt-module-specification : error : no name specified"),!1;if(this.data.name=e.name,"id"in e?this.data.id=e.id:this.data.id=this.data.name,"active"in e?this.data.active=e.active:this.data.active=!0,!("content"in e))return console.log("cyt-module-specification : error : no content object"),!1;let t=e.content;if("css"in t?(this.data.content.css=t.css,this.data.content.css_night=t.css_night,this.data.content.css.length==1&&this.data.content.css[0].length==0?this.vars.there_is_css=!1:this.vars.there_is_css=!0):this.vars.there_is_css=!1,"css_night"in t?(this.data.content.css_night=t.css_night,this.data.content.css_night.length==1&&this.data.content.css_night[0].length==0?this.vars.there_is_css_night=!1:this.vars.there_is_css_night=!0):this.vars.there_is_css_night=!1,"data"in t?(this.data.content.data=t.data,this.vars.there_is_data=!0):this.vars.there_is_data=!1,!("js"in t))this.vars.there_is_js=!1;else try{this.data.content.js=[],this.vars.there_is_js=!1,t.js.forEach(i=>{!("script"in i)||!("init"in i)?console.log("cyt-module-specification : ERROR : js module specification incomplete because does not have required targets ('src', 'init')"):(this.vars.there_is_js=!0,this.data.content.js.push(i))})}catch{console.log("cyt-module-specification : error : loading js-data")}if(!("html"in t))delete this.data.content.html,this.vars.there_is_html=!1;else{let i=t.html;if(!("source"in i)&&!("alias"in i))return this.vars.there_is_html=!1,console.log("cyt-module-specification : error : no alias or source has been specified!"),!1;if(this.data.content.html.source=i.source,this.data.content.html.alias=i.alias,this.data.content.html.icon!==void 0&&(this.data.content.html.icon=i.icon),!("title"in i))return console.log("cyt-module-specification : error : no title specified"),!1;if("id"in i||(i.id=i.title),this.data.content.html.title=i.title,"format"in i){let n=i.format;this.data.content.html.format.minimized=n.minimized,this.data.content.html.format.maximized=n.maximized,this.data.content.html.format.x=n.x,this.data.content.html.format.y=n.y,this.data.content.html.format.w=n.w,this.data.content.html.format.h=n.h,"classes"in n&&(this.data.content.html.format.classes=n.classes)}this.vars.there_is_html=!0}return!0}toJson(){return this.data}toJsonExport(){let e=this.toJson();try{delete e.content.html.source}catch{}return e}thereIsHtml(){return this.vars.there_is_html}htmlSource(e){return e!==void 0&&(this.data.content.html.source=e),this.data.content.html.source}htmlAlias(e){return e!==void 0&&(this.data.content.html.alias=e),this.data.content.html.alias}thereIsCss(){return this.vars.there_is_css}getCssList(){return this.data.content.css}thereIsCssNight(){return this.vars.there_is_css_night}getCssNightList(){return this.data.content.css_night}thereIsJs(){return this.vars.there_is_js}getJsItems(){return this.data.content.js}thereIsData(){return this.vars.there_is_data}getDataContent(){return this.data.content.data}isEmpty(){return this.thereIsCss()||this.thereIsData()||this.thereIsHtml()||this.thereIsJs()}}class CEnvironmentManager{constructor(s){console.log("creating instance of environment-manager"),this.controller=s,this.controller.get_content_instance=this.get_content_instance.bind(this),this.config={selectors:{windows_selector:"",dashboard:"#app",toolbarModel:"#milla-toolbar",toolbarAboutIcon:"#milla-toolbar-icon",layouts_selector:"#desktop-layouts-selector"},classes:{windowContainerAlert:"milla_window_modifier_state_alert"},models:{toolbar:'<div class="c_milla_toolbar"></div>'},params:{ask_mods_to_server:!0},misc:{cascade_increment:30,custom_layout_select_prefix:"custom_layout_select_"},viewport:{top:0,bottom:0,left:0,right:0}},this.vars={modules:{do_request:!0,list:{}},layouts:{},initial_position:{x:5,y:5},misc:{cascade_window_size:0,ongoing_global_alert:{state_on:!1,timer_instance:null,frontend_transition_state:!1}},hotkeys:{enabled:!0,layouts:{}},windows:{listeners:{instances:{}}},layout:{font_size:14,font_size_default:14,badge_dimension:92,badge_dimension_default:92,night_mode:!1}},this.instances={appcontroller:null,test:null,screen_lock:null,toolbarContainer:null,contents:{winboxes:{},html:{},css:{},js:{}},dashboard:null,layout_selector:null,layout_selector_insertion_point:null,layout_fonts_size_choice:null,layout_selector_daynight:null,flicker_events:{}}}setViewport(s){this.config.viewport=s}askModsToServer(s){this.config.params.ask_mods_to_server=s}Init(){}Start(){console.log("cyt-modules-loader : initializing"),this.controller.get_content_instance=this.get_content_instance.bind(this),this.controller.add_window_listener=this.add_window_listener.bind(this),this.controller.comms_subscribe_event("mods-loader-claim-response",this.on_modules_list_response.bind(this),"cyt-mods-loader"),this.instances.dashboard=$("body"),this.claim_modules_list(),function(){let s=console.error;console.error=function(e){s.apply(console,arguments)}}()}claim_modules_list(){if(this.config.params.ask_mods_to_server!==!0)return console.log("cenvironment-manager : claim-modules-list : from server is deactivated."),!0;if(console.log("cyt-modules-loader : claim-modules-list : "),this.vars.modules.do_request!=!0)return console.log("cyt-modules-loader : claim-modules-list : already here"),!1;this.controller.comms_send_packet("mods-loader-claim-request",""),setTimeout(this.claim_modules_list.bind(this),2e3)}on_modules_list_response(s){return console.log("Obtained modules list from server. Now parsing."),this.vars.modules.do_request===!1||(this.vars.modules.do_request=!1,this.configure_workspace_context(s)),!0}configure_workspace_context(s){this.vars.modules_configuration=s.mods,this.vars.layouts_configuration=s.layouts,s.mods.forEach((t,i)=>{console.log(`Parsing module [${t.name}]`);let n=new ModuleSpecification;if(!n.fromRaw(t))return console.error(`cyt-modules-controller : error : imposible to create module model instance from [${JSON.stringify(t)}]`),console.log(`Parsing module [${t.name}] : ERROR PARSING MODULE SPECIFICATION.`),!1;console.log(`cyt-modules-controller : on-mods-list-response : checking-in instance for [${n.Name()}]`),this.vars.modules.list[n.Name()]=n,console.log(`Parsing module [${t.name}] : OK.`)});let e=1;s.layouts.forEach((t,i)=>{let n=new Layout;if(console.log(`Parsing layout specification: [${t.name}]`),n.fromJson(t)==!1)return console.log(`cyt-modules-controller : on-mods-list-response specification: checking-in instance for [${n.id()}]`),console.log(`Parsing layout : [${t.name}] : ERROR!`),!1;if(n.active()!==!0){console.log(`cyt-modules-controller : on-mods-list-response specification: ignoring layout [${n.id()}]`);return}this.vars.layouts[n.id()]=n,console.log(`Parsing layout specification: [${t.name}] : ok`),e<10&&(this.vars.hotkeys.layouts[e.toString()]=n,e++)}),setTimeout(()=>{this.vars.module_initialization_index=0,this.initialize_incoming_modules_list(),setTimeout(()=>{this.set_default_layout(),this.controller.signal_event("engine-initialized",!0)},1500)},1e3)}set_default_layout(){}get_content_instance(s){return this.instances.contents.html[s]==null?(console.error(`cyt-modules-manager : get-content-instance : not found content-instance for [${s}]`),null):(console.log(`cyt-modules-manager : get-content-instance : serving jqmodel for [${s}]`),this.instances.contents.html[s])}initialize_incoming_modules_list(){if(this.vars.module_initialization_index>=Object.keys(this.vars.modules.list).length){console.log("cyt-modules-manager : all modules initialized"),this.set_default_layout();return}this._initialize_module(this.vars.modules.list[Object.keys(this.vars.modules.list)[this.vars.module_initialization_index]])}_initialize_module_prepare_next(){this.vars.module_initialization_index++,this.initialize_incoming_modules_list()}_initialize_module(s){console.log(`cyt-modules-loader : initialize_module : initializing [${s.Name()}]`),s.thereIsCss()==!0&&this._initialize_module_css(s.getCssList(),s.Name()),s.thereIsHtml()==!0?this._initialize_module_html(s):s.thereIsJs()==!0?this._initialize_module_js(s):this._initialize_module_prepare_next()}_initialize_module_css(s,e){s.forEach(t=>{console.log(`cyt-modules-loader : -initialize-module-css : loading [${t}]`),console.log(`Rendering module [${e}] : loading css : ${t}`),this.instances.contents.css[t]=Tools.LoadExternalCss(t,this._initialize_module_css_callback_initialized.bind(this))})}_initialize_module_css_callback_initialized(s){console.log(`cyt-modules-manager : -initialize-module-css-loaded : done [${s}]`)}add_window_listener(s,e,t){return this.vars.windows.listeners.instances[s]===void 0?(console.log(`cyt-environment-loader : add-window-listener : ERROR : no module found with name [${s}]`),!1):this.vars.windows.listeners.instances[s][e]===void 0?(console.log(`cyt-environment-loader : add-window-listener : ERROR : for module [${s}] it is not possible to add listener for event [${e}]`),!1):(this.vars.windows.listeners.instances[s][e].push(t),console.log(`cyt-environment-loader : add-window-listener : for module [${s}] added listener callback for event [${e}]`),!0)}_dispatch_window_event(s,e,...t){try{this.vars.windows.listeners.instances[s][e].forEach(i=>{i(...t)})}catch(i){console.log(`For [${s}], exception rised dispatching event [${e}] because [${i.toString()}]`)}}_initialize_module_html(s){let e="";s.htmlSource()!=null?e=s.htmlSource():e=s.htmlAlias(),console.log(`cyt-modules-manager : -initialize-module-html : loading module [${e}]`),console.log(`Rendering module [${s.Name()}] : loading html : [${e}]`),this.instances.contents.html[s.Name()]=Tools.LoadExternalHtmlContent(e,(t,i)=>{console.log(`-initialize-module-html : loaded for module [${s.Name()}]. Now checking Js`);let n={onload:()=>{},top:this.config.viewport.top,bottom:this.config.viewport.bottom,left:this.config.viewport.left,right:this.config.viewport.right,class:["no-close","no-full"],border:2};s.Icon()!==void 0&&(n.icon=s.Icon()),this.instances.contents.winboxes[s.Name()]=new WinBox(s.Title(),n),this.controller.signal_event("add-window-selector",s.Title(),s.Name(),this.on_toolbar_selector_clicked.bind(this)),this.vars.windows.listeners.instances[s.Name()]={oncreate:[],onshow:[],onhide:[],onclose:[],onfocus:[],onblur:[],onmove:[],onresize:[],onfullscreen:[],onmaximize:[],onminimize:[],onrestore:[]};let o=this;this.instances.contents.winboxes[s.Name()].onfocus=function(){o.on_winbox_focus(this),o._dispatch_window_event(s.Name(),"onfocus"),this.show()},this.instances.contents.winboxes[s.Name()].onminimize=function(){this.hide(),o._dispatch_window_event(s.Name(),"onminimize")},this.instances.contents.winboxes[s.Name()].onrestore=function(){this.show(),o._dispatch_window_event(s.Name(),"onrestore")},this.instances.contents.winboxes[s.Name()].oncreate=function(r){o._dispatch_window_event(s.Name(),"oncreate",r,this.width,this.height)},this.instances.contents.winboxes[s.Name()].onmove=function(r,a){o._dispatch_window_event(s.Name(),"onmove",r,a,this.width,this.height)},this.instances.contents.winboxes[s.Name()].onresize=function(r,a){o._dispatch_window_event(s.Name(),"onresize",r,a)},this.instances.contents.winboxes[s.Name()].onfullscreen=function(r,a){o._dispatch_window_event(s.Name(),"onfullscreen",r,a,this.width,this.height)},this.instances.contents.winboxes[s.Name()].onmaximize=function(){o._dispatch_window_event(s.Name(),"onmaximize")},this.instances.contents.winboxes[s.Name()].onrestore=function(){o._dispatch_window_event(s.Name(),"onrestore")},this.instances.contents.winboxes[s.Name()].onhide=function(){o._dispatch_window_event(s.Name(),"onhide")},this.instances.contents.winboxes[s.Name()].onshow=function(){o._dispatch_window_event(s.Name(),"onshow")},this.instances.contents.winboxes[s.Name()].onclose=function(r){o._dispatch_window_event(s.Name(),"onclose",r)},this.instances.contents.winboxes[s.Name()].onblur=function(r){o._dispatch_window_event(s.Name(),"onblur")},this.instances.contents.html[s.Name()].container=this.instances.contents.winboxes[s.Name()].body,this.instances.contents.winboxes[s.Name()].mount(this.instances.contents.html[s.Name()].get(0)),s.hasDimensions()&&this.instances.contents.winboxes[s.Name()].resize(s.W(),s.H()),s.hasPosition()?this.instances.contents.winboxes[s.Name()].move(s.X(),s.Y()):(this.instances.contents.winboxes[s.Name()].move(`${this.vars.initial_position.x}px`,`${this.vars.initial_position.y}px`),this.vars.initial_position.x+=15,this.vars.initial_position.y+=15),this.instances.contents.winboxes[s.Name()].onmove,s.thereIsJs()==!0?(console.log("-initialize-module-html-winbox-created : contains js-modules"),this._initialize_module_js(s)):this._initialize_module_prepare_next(),console.log(`Rendering module [${s.Name()}] : loading html : DONE : [${e}]`)})}on_toolbar_selector_clicked(s){console.log(`cenvironment-manager : toolbar-selector-clicked : [${s.target}]`),this.instances.contents.winboxes[s.target].focus()}on_winbox_focus(s){}_initialize_module_js(mod){if(mod.thereIsJs()==!1)return;let res=0;mod.getJsItems().forEach((jsItem,index)=>{console.log(`cyt-modules-manager : -initialize-modules-js : for [${mod.Name()}] getting js item [${jsItem.script}]`),console.log(`Rendering module [${mod.Name()}] : loading js : [${jsItem.script}]`),Tools.LoadExternalJs(jsItem.script,err=>{if(res++,err)return console.error(`cyt-modules-manager : -initialize-module-js : error loading js-item [${jsItem.script}]. Error=((${JSON.stringify(err)}))`),!1;console.log(`cyt-modules-manager : -initialize-module-js : initialized ((${jsItem.script})). Now launching Init command [${jsItem.init}]`);try{jsItem.init.length>0&&eval(jsItem.init),console.log(`Rendering module [${mod.Name()}] : loading js : OK : [${jsItem.script}]`)}catch(s){console.error(`cyt-modules-manager : -initialize-module-js : for [${mod.Name()}] error initializing js with command [${jsItem.init}]. Error=((${s}))`),console.log(`Rendering module [${mod.Name()}] : loading js : ERROR!: [${jsItem.script}]`)}res>=mod.getJsItems().length&&this._initialize_module_prepare_next()})})}check_environment_status(){switch(this.controller.getVar("linkStatus")){case"good":this.ongoing_global_alert(!1);break;case"bad":this.ongoing_global_alert(!0);break;default:this.ongoing_global_alert(!1)}}_create_toolbar_prepare_menu(s){console.log("toolbar - menu : preparing");let e=[{text:"Tile",id:"distwin_tile"},{text:"Cascade",id:"distwin_cascade"},{text:"Default",id:"distwin_default"}];Object.keys(this.vars.layouts).forEach(t=>{let i=this.vars.layouts[t];e.push({text:i.name(),id:`${this.config.misc.custom_layout_select_prefix}${i.id()}`})}),s.push({type:"menu",id:"main-menu",text:"MENU",style:"background-color: rgba(255,255,255,0.5);border-radius:5pt; border: 1pt solid rgba(0,0,127,0.5)",items:[{type:"menu",id:"view",text:"Layouts",items:e},{text:"Engine",id:"engine"},{text:"About",id:"about"},{text:"Reload",id:"reload"}]},{type:"break"}),console.log("toolbar - menu : preparing : OK")}_dispatch_menu_command(s){let e=s.split(":");switch(console.log(`dispatching-menu-command : ${s} >> ${e[e.length-1]}`),e[e.length-1]){case"distwin_tile":return this._organize_windows_tiled();case"distwin_cascade":return this._organize_windows_cascade();case"distwin_default":return this._organize_windows_default();case"reload":return this._reload_contents();case"engine":return this._engine_toggle();case"about":return this._show_about_box()}if(e[e.length-1].indexOf(this.config.misc.custom_layout_select_prefix)==0){let t=e[e.length-1].substring(this.config.misc.custom_layout_select_prefix.length);console.log(`-dispatch-menu-command : custom layout select : ${e[e.length-1]}] => [${t}]`),this._organize_windows_layout(t)}}_engine_toggle(){}_show_about_box(){console.log("show about"),w2popup.open({title:"About",body:"Milla Vehicle Embed Supervision Interface.<br><br>Version 1.5",actions:{Close(e){w2popup.close()}}})}_reload_contents(){this.controller.getVar("isTeleopInstance"),console.log("reload-contents"),w2popup.open({title:"Reload Window",body:"Do you really want to reload this window?",actions:{Ok(s){w2popup.close(),location.reload()},Cancel(s){w2popup.close()}}})}_organize_windows_tiled(){let s=0,e=0,t,i;t=this.instances.dashboard.width(),i=this.instances.dashboard.height();let n=Object.keys(this.instances.contents.winboxes).length,o=Math.ceil(Math.sqrt(n));console.log(`organize-windows-tiled : ${o} per row`),t=t/o,i=i/o;let r=0;Object.keys(this.instances.contents.winboxes).forEach(a=>{let l=this.instances.contents.winboxes[a];l.move(`${s}px`,`${e}px`),l.resize(`${t}px`,`${i}px`),s+=t,r++,r>=o&&(s=0,e+=i,r=0)})}_calculate_cascade_size(){let s,e;s=this.instances.dashboard.width(),e=this.instances.dashboard.height();let t=Object.keys(this.instances.contents.winboxes).length;s>e?this.vars.misc.cascade_window_size=e-this.config.misc.cascade_increment*t:this.vars.misc.cascade_window_size=s-this.config.misc.cascade_increment*t}_organize_windows_cascade(){let s=0,e=0;this.instances.dashboard.width(),this.instances.dashboard.height(),this._calculate_cascade_size(),e=this.vars.misc.cascade_window_size,Object.keys(this.instances.contents.winboxes).forEach(t=>{let i=this.instances.contents.winboxes[t];i.move(`${s}px`,`${s}px`),i.resize(`${e}px`,`${e}px`),s+=this.config.misc.cascade_increment})}__set_window_layout(s,e){if(e.minimized()==!0){s.minimize(e.minimized());return}else if(e.maximized()==!0){s.maximize(e.maximized()),s.focus();return}s.minimize(!1),s.maximize(!1),e.hasPosition()&&s.move(e.X(),e.Y()),e.hasDimensions()&&s.resize(e.W(),e.H()),s.focus()}_winbox_focus(s){this.instances.contents.winboxes[s]!==void 0&&(console.log("*** focusalizannnndo"),this.instances.contents.winboxes[s].focus(),this.instances.contents.winboxes[s].restore())}}const CONF_MODEL={controller:{comms:{host:"",test_ports:[0,8080],protocol:"",connectorType:"CWIoLikeWrapper"}}};class CDesktopWebapp{appcontroller(){return this.instances.appcontroller}toolbarmanager(){return this.instances.toolbarmanager}environmentmanager(){return this.instances.environmentmanager}constructor(e){console.log("creating instance of cdesktop-webapp"),this.config={source:Object.assign(CONF_MODEL,e),config_file_path:"/config/config-coyot3.json"},this.instances={appcontroller:null,toolbarmanager:null,environmentmanager:null},this.vars={source_port_tests_index:0},this.instances.appcontroller=new AppControll3r(this.config.source.controller),this.instances.environmentmanager=new CEnvironmentManager(this.instances.appcontroller),this.instances.environmentmanager.setViewport(this.config.source.viewport),Tools.LoadExternalJsonContent(this.config.config_file_path,this.on_json_config_load_response.bind(this))}setToolbar(e){this.instances.toolbarmanager=e,this.instances.toolbarmanager.appcontroller(this.instances.appcontroller)}on_json_config_load_response(e){if(e===!1){this.vars.source_port_tests_index++,this.vars.source_port_tests_index>=this.config.source.controller.comms.test_ports.length&&(this.vars.source_port_tests_index=0),console.warn(`cdesktop-webapp : on-json-config-load-response : error loading file [${this.config.config_file_path}]. retrying in 2 seconds `),Tools.configure_external_host("","",this.config.source.controller.comms.test_ports[this.vars.source_port_tests_index]),setTimeout(()=>{Tools.LoadExternalJsonContent(this.config.config_file_path,this.on_json_config_load_response.bind(this))},2e3);return}this.instances.appcontroller.setServerWebsocketPort(this.config.source.controller.comms.test_ports[this.vars.source_port_tests_index]),this.construction_bis(e)}construction_bis(e){this.instances.appcontroller.connect(),this.instances.appcontroller.Init(),this.instances.appcontroller.Start(),this.instances.environmentmanager.askModsToServer(e.config.ask_mods_to_server),this.instances.environmentmanager.Init(),this.instances.environmentmanager.Start(),this.instances.environmentmanager.configure_workspace_context(e)}add_module(e){}Init(){this.instances.toolbarmanager.Init(),this.instances.toolbarmanager.Start()}Start(){this.instances.appcontroller.Init(),this.instances.appcontroller.Start()}}const _sfc_main$1={__name:"CDesktopWebapp",setup(s){let e={toolbar:{title:"CDWA",options:{position:"bottom",width:35}}},t={top:0,bottom:0,left:0,right:0};switch(e.toolbar.options.position){case"top":t.top=e.toolbar.options.width+4;break;case"right":t.right=e.toolbar.options.width+4;break;case"left":t.left=e.toolbar.options.width+4;break;case"bottom":default:t.bottom=e.toolbar.options.width+4}const i=ref();return ref(),onMounted(()=>{console.log("mounted desktop webapp vue");let n=new CDesktopWebapp({viewport:t});n.setToolbar(i.value.manager()),window.CAppControll3r=n.appcontroller(),n.Init(),n.Start()}),(n,o)=>(openBlock(),createBlock(_sfc_main$2,{ref_key:"ctoolbar",ref:i,options:unref(e).toolbar.options},null,8,["options"]))}},_sfc_main={__name:"App",setup(s){let e=ref();return onMounted(()=>{console.log("montada app ")}),(t,i)=>(openBlock(),createBlock(_sfc_main$1,{ref_key:"desktopApp",ref:e},null,512))}};window.document.CTARGET_CHAIN="";let app=createApp(_sfc_main);app.mount("#app");
